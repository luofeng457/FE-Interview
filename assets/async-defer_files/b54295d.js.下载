(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1126:function(t,e,n){(function(e){t.exports=function(){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},n=function(t){return t&&t.Math==Math&&t},r=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")(),i={},o=function(t){try{return!!t()}catch(t){return!0}},c=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={},a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,h=l&&!a.call({1:2},1);s.f=h?function(t){var e=l(this,t);return!!e&&e.enumerable}:a;var u,f,d=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},v={}.toString,p=function(t){return v.call(t).slice(8,-1)},y=p,g="".split,m=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==y(t)?g.call(t,""):Object(t)}:Object,k=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},w=m,b=k,x=function(t){return w(b(t))},C=function(t){return"object"==typeof t?null!==t:"function"==typeof t},T=r,_=function(t){return"function"==typeof t?t:void 0},E=function(t,e){return arguments.length<2?_(T[t]):T[t]&&T[t][e]},S=E("navigator","userAgent")||"",P=r,R=S,O=P.process,L=P.Deno,A=O&&O.versions||L&&L.version,I=A&&A.v8;I?f=(u=I.split("."))[0]<4?1:u[0]+u[1]:R&&(!(u=R.match(/Edge\/(\d+)/))||u[1]>=74)&&(u=R.match(/Chrome\/(\d+)/))&&(f=u[1]);var D=f&&+f,M=D,N=o,F=!!Object.getOwnPropertySymbols&&!N((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&M&&M<41})),B=F&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,j=E,U=B?function(t){return"symbol"==typeof t}:function(t){var e=j("Symbol");return"function"==typeof e&&Object(t)instanceof e},H=C,V={exports:{}},G=r,W=function(t,e){try{Object.defineProperty(G,t,{value:e,configurable:!0,writable:!0})}catch(n){G[t]=e}return e},Y=W,K="__core-js_shared__",z=r[K]||Y(K,{}),X=z;(V.exports=function(t,e){return X[t]||(X[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.16.2",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var $=k,q=function(t){return Object($(t))},Z=q,J={}.hasOwnProperty,Q=Object.hasOwn||function(t,e){return J.call(Z(t),e)},tt=0,et=Math.random(),nt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++tt+et).toString(36)},it=r,ot=V.exports,st=Q,at=nt,ct=F,lt=B,ut=ot("wks"),ht=it.Symbol,ft=lt?ht:ht&&ht.withoutSetter||at,pt=function(t){return st(ut,t)&&(ct||"string"==typeof ut[t])||(ct&&st(ht,t)?ut[t]=ht[t]:ut[t]=ft("Symbol."+t)),ut[t]},vt=C,gt=U,yt=pt("toPrimitive"),mt=function(t,e){if(!vt(t)||gt(t))return t;var n,i=t[yt];if(void 0!==i){if(void 0===e&&(e="default"),n=i.call(t,e),!vt(n)||gt(n))return n;throw TypeError("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var n,i;if("string"===e&&"function"==typeof(n=t.toString)&&!H(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!H(i=n.call(t)))return i;if("string"!==e&&"function"==typeof(n=t.toString)&&!H(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}(t,e)},kt=mt,bt=U,wt=function(t){var e=kt(t,"string");return bt(e)?e:String(e)},xt=C,Ct=r.document,Tt=xt(Ct)&&xt(Ct.createElement),_t=function(t){return Tt?Ct.createElement(t):{}},Et=_t,St=!c&&!o((function(){return 7!=Object.defineProperty(Et("div"),"a",{get:function(){return 7}}).a})),Pt=c,Rt=s,Ot=d,Lt=x,At=wt,It=Q,Dt=St,Mt=Object.getOwnPropertyDescriptor;i.f=Pt?Mt:function(t,e){if(t=Lt(t),e=At(e),Dt)try{return Mt(t,e)}catch(t){}if(It(t,e))return Ot(!Rt.f.call(t,e),t[e])};var Nt={},Ft=C,Bt=function(t){if(!Ft(t))throw TypeError(String(t)+" is not an object");return t},jt=c,Ut=St,Ht=Bt,Vt=wt,Gt=Object.defineProperty;Nt.f=jt?Gt:function(t,e,n){if(Ht(t),e=Vt(e),Ht(n),Ut)try{return Gt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Wt=Nt,Yt=d,Kt=c?function(t,e,n){return Wt.f(t,e,Yt(1,n))}:function(t,e,n){return t[e]=n,t},zt={exports:{}},Xt=z,qt=Function.toString;"function"!=typeof Xt.inspectSource&&(Xt.inspectSource=function(t){return qt.call(t)});var $t,Zt,Jt,Qt=Xt.inspectSource,te=Qt,ee=r.WeakMap,ne="function"==typeof ee&&/native code/.test(te(ee)),ie=V.exports,re=nt,oe=ie("keys"),rt=function(t){return oe[t]||(oe[t]=re(t))},se={},ae=ne,ce=C,le=Kt,ue=Q,he=z,fe=rt,de=se,dt="Object already initialized",pe=r.WeakMap;if(ae||he.state){var ve=he.state||(he.state=new pe),ge=ve.get,ye=ve.has,me=ve.set;$t=function(t,e){if(ye.call(ve,t))throw new TypeError(dt);return e.facade=t,me.call(ve,t,e),e},Zt=function(t){return ge.call(ve,t)||{}},Jt=function(t){return ye.call(ve,t)}}else{var ke=fe("state");de[ke]=!0,$t=function(t,e){if(ue(t,ke))throw new TypeError(dt);return e.facade=t,le(t,ke,e),e},Zt=function(t){return ue(t,ke)?t[ke]:{}},Jt=function(t){return ue(t,ke)}}var be={set:$t,get:Zt,has:Jt,enforce:function(t){return Jt(t)?Zt(t):$t(t,{})},getterFor:function(t){return function(e){var n;if(!ce(e)||(n=Zt(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},we=r,xe=Kt,Ce=Q,Te=W,_e=Qt,Ee=be.get,Se=be.enforce,Pe=String(String).split("String");(zt.exports=function(t,e,n,i){var r,o=!!i&&!!i.unsafe,s=!!i&&!!i.enumerable,a=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof e||Ce(n,"name")||xe(n,"name",e),(r=Se(n)).source||(r.source=Pe.join("string"==typeof e?e:""))),t!==we?(o?!a&&t[e]&&(s=!0):delete t[e],s?t[e]=n:xe(t,e,n)):s?t[e]=n:Te(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&Ee(this).source||_e(this)}));var Re={},Oe=Math.ceil,Le=Math.floor,Ae=function(t){return isNaN(t=+t)?0:(t>0?Le:Oe)(t)},Ie=Ae,De=Math.min,Me=function(t){return t>0?De(Ie(t),9007199254740991):0},Ne=Ae,Fe=Math.max,Be=Math.min,je=function(t,e){var n=Ne(t);return n<0?Fe(n+e,0):Be(n,e)},Ue=x,He=Me,Ve=je,Ge=function(t){return function(e,n,i){var r,o=Ue(e),s=He(o.length),a=Ve(i,s);if(t&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},We={includes:Ge(!0),indexOf:Ge(!1)},Ye=Q,Ke=x,ze=We.indexOf,Xe=se,qe=function(t,e){var n,i=Ke(t),r=0,o=[];for(n in i)!Ye(Xe,n)&&Ye(i,n)&&o.push(n);for(;e.length>r;)Ye(i,n=e[r++])&&(~ze(o,n)||o.push(n));return o},$e=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ze=qe,Je=$e.concat("length","prototype");Re.f=Object.getOwnPropertyNames||function(t){return Ze(t,Je)};var Qe={};Qe.f=Object.getOwnPropertySymbols;var tn,en=Re,nn=Qe,rn=Bt,on=E("Reflect","ownKeys")||function(t){var e=en.f(rn(t)),n=nn.f;return n?e.concat(n(t)):e},sn=Q,an=on,cn=i,ln=Nt,un=o,hn=/#|\.prototype\./,fn=function(t,e){var n=pn[dn(t)];return n==gn||n!=vn&&("function"==typeof e?un(e):!!e)},dn=fn.normalize=function(t){return String(t).replace(hn,".").toLowerCase()},pn=fn.data={},vn=fn.NATIVE="N",gn=fn.POLYFILL="P",yn=fn,mn=r,kn=i.f,bn=Kt,wn=zt.exports,xn=W,Cn=function(t,e){for(var n=an(e),i=ln.f,r=cn.f,o=0;o<n.length;o++){var s=n[o];sn(t,s)||i(t,s,r(e,s))}},Tn=yn,_n=function(t,e){var n,i,r,o,s,a=t.target,c=t.global,l=t.stat;if(n=c?mn:l?mn[a]||xn(a,{}):(mn[a]||{}).prototype)for(i in e){if(o=e[i],r=t.noTargetGet?(s=kn(n,i))&&s.value:n[i],!Tn(c?i:a+(l?".":"#")+i,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;Cn(o,r)}(t.sham||r&&r.sham)&&bn(o,"sham",!0),wn(n,i,o,t)}},En=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Sn=qe,Pn=$e,Rn=Object.keys||function(t){return Sn(t,Pn)},On=Nt,Ln=Bt,An=Rn,In=c?Object.defineProperties:function(t,e){Ln(t);for(var n,i=An(e),r=i.length,o=0;r>o;)On.f(t,n=i[o++],e[n]);return t},Dn=E("document","documentElement"),Mn=Bt,Nn=In,Fn=$e,Bn=se,jn=Dn,Un=_t,Hn=rt("IE_PROTO"),Vn=function(){},Gn=function(t){return"<script>"+t+"<\/script>"},Wn=function(t){t.write(Gn("")),t.close();var e=t.parentWindow.Object;return t=null,e},Yn=function(){try{tn=new ActiveXObject("htmlfile")}catch(t){}var t,e;Yn="undefined"!=typeof document?document.domain&&tn?Wn(tn):((e=Un("iframe")).style.display="none",jn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Gn("document.F=Object")),t.close(),t.F):Wn(tn);for(var n=Fn.length;n--;)delete Yn.prototype[Fn[n]];return Yn()};Bn[Hn]=!0;var Kn=Object.create||function(t,e){var n;return null!==t?(Vn.prototype=Mn(t),n=new Vn,Vn.prototype=null,n[Hn]=t):n=Yn(),void 0===e?n:Nn(n,e)},zn=En,Xn=C,qn=[].slice,$n={},Zn=function(t,e,n){if(!(e in $n)){for(var i=[],r=0;r<e;r++)i[r]="a["+r+"]";$n[e]=Function("C,a","return new C("+i.join(",")+")")}return $n[e](t,n)},Jn=Function.bind||function(t){var e=zn(this),n=qn.call(arguments,1),i=function(){var r=n.concat(qn.call(arguments));return this instanceof i?Zn(e,r.length,r):e.apply(t,r)};return Xn(e.prototype)&&(i.prototype=e.prototype),i},Qn=_n,ti=En,ei=Bt,ni=C,ii=Kn,ri=Jn,oi=o,si=E("Reflect","construct"),ai=oi((function(){function t(){}return!(si((function(){}),[],t)instanceof t)})),ci=!oi((function(){si((function(){}))})),li=ai||ci;function ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hi(t,e){return(hi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hi(t,e)}function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vi(t,e){if(e&&("object"===di(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pi(t)}function gi(t){return(gi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Qn({target:"Reflect",stat:!0,forced:li,sham:li},{construct:function(t,e){ti(t),ei(e);var n=arguments.length<3?t:ti(arguments[2]);if(ci&&!ai)return si(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var i=[null];return i.push.apply(i,e),new(ri.apply(t,i))}var r=n.prototype,o=ii(ni(r)?r:Object.prototype),s=Function.apply.call(t,o,e);return ni(s)?s:o}});var mi=p,ki=Array.isArray||function(t){return"Array"==mi(t)},bi=U,wi=function(t){if(bi(t))throw TypeError("Cannot convert a Symbol value to a string");return String(t)},xi={},Ci=x,Ti=Re.f,_i={}.toString,Ei="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];xi.f=function(t){return Ei&&"[object Window]"==_i.call(t)?function(t){try{return Ti(t)}catch(t){return Ei.slice()}}(t):Ti(Ci(t))};var Si={},Pi=pt;Si.f=Pi;var Ri=r,Oi=Q,Li=Si,Ai=Nt.f,Ii=Nt.f,Di=Q,Mi=pt("toStringTag"),Ni=function(t,e,n){t&&!Di(t=n?t:t.prototype,Mi)&&Ii(t,Mi,{configurable:!0,value:e})},Fi=En,Bi=function(t,e,n){if(Fi(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},ji=C,Ui=ki,Hi=pt("species"),Vi=function(t,e){return new(function(t){var e;return Ui(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!Ui(e.prototype)?ji(e)&&null===(e=e[Hi])&&(e=void 0):e=void 0),void 0===e?Array:e}(t))(0===e?0:e)},Gi=Bi,Wi=m,Yi=q,Ki=Me,zi=Vi,Xi=[].push,qi=function(t){var e=1==t,n=2==t,i=3==t,r=4==t,o=6==t,s=7==t,a=5==t||o;return function(c,l,u,h){for(var f,d,p=Yi(c),v=Wi(p),g=Gi(l,u,3),y=Ki(v.length),m=0,k=h||zi,b=e?k(c,y):n||s?k(c,0):void 0;y>m;m++)if((a||m in v)&&(d=g(f=v[m],m,p),t))if(e)b[m]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:Xi.call(b,f)}else switch(t){case 4:return!1;case 7:Xi.call(b,f)}return o?-1:i||r?r:b}},$i={forEach:qi(0),map:qi(1),filter:qi(2),some:qi(3),every:qi(4),find:qi(5),findIndex:qi(6),filterReject:qi(7)},Zi=_n,Ji=r,Qi=E,tr=c,er=F,nr=o,ir=Q,rr=ki,or=C,sr=U,ar=Bt,cr=q,lr=x,hr=wt,ur=wi,fr=d,dr=Kn,pr=Rn,vr=Re,gr=xi,yr=Qe,mr=i,br=Nt,kr=s,wr=Kt,xr=zt.exports,Cr=V.exports,Tr=se,_r=nt,Er=pt,Sr=Si,Pr=Ni,Rr=be,Or=$i.forEach,Lr=rt("hidden"),Ar="Symbol",Ir=Er("toPrimitive"),Dr=Rr.set,Mr=Rr.getterFor(Ar),Nr=Object.prototype,Fr=Ji.Symbol,Br=Qi("JSON","stringify"),jr=mr.f,Ur=br.f,Hr=gr.f,Vr=kr.f,Gr=Cr("symbols"),Wr=Cr("op-symbols"),Yr=Cr("string-to-symbol-registry"),Kr=Cr("symbol-to-string-registry"),zr=Cr("wks"),Xr=Ji.QObject,qr=!Xr||!Xr.prototype||!Xr.prototype.findChild,$r=tr&&nr((function(){return 7!=dr(Ur({},"a",{get:function(){return Ur(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=jr(Nr,e);i&&delete Nr[e],Ur(t,e,n),i&&t!==Nr&&Ur(Nr,e,i)}:Ur,Zr=function(t,e){var n=Gr[t]=dr(Fr.prototype);return Dr(n,{type:Ar,tag:t,description:e}),tr||(n.description=e),n},Jr=function(t,e,n){t===Nr&&Jr(Wr,e,n),ar(t);var i=hr(e);return ar(n),ir(Gr,i)?(n.enumerable?(ir(t,Lr)&&t[Lr][i]&&(t[Lr][i]=!1),n=dr(n,{enumerable:fr(0,!1)})):(ir(t,Lr)||Ur(t,Lr,fr(1,{})),t[Lr][i]=!0),$r(t,i,n)):Ur(t,i,n)},Qr=function(t,e){ar(t);var n=lr(e),i=pr(n).concat(io(n));return Or(i,(function(e){tr&&!to.call(n,e)||Jr(t,e,n[e])})),t},to=function(t){var e=hr(t),n=Vr.call(this,e);return!(this===Nr&&ir(Gr,e)&&!ir(Wr,e))&&(!(n||!ir(this,e)||!ir(Gr,e)||ir(this,Lr)&&this[Lr][e])||n)},eo=function(t,e){var n=lr(t),i=hr(e);if(n!==Nr||!ir(Gr,i)||ir(Wr,i)){var r=jr(n,i);return!r||!ir(Gr,i)||ir(n,Lr)&&n[Lr][i]||(r.enumerable=!0),r}},no=function(t){var e=Hr(lr(t)),n=[];return Or(e,(function(t){ir(Gr,t)||ir(Tr,t)||n.push(t)})),n},io=function(t){var e=t===Nr,n=Hr(e?Wr:lr(t)),i=[];return Or(n,(function(t){!ir(Gr,t)||e&&!ir(Nr,t)||i.push(Gr[t])})),i};er||(xr((Fr=function(){if(this instanceof Fr)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?ur(arguments[0]):void 0,e=_r(t),n=function(t){this===Nr&&n.call(Wr,t),ir(this,Lr)&&ir(this[Lr],e)&&(this[Lr][e]=!1),$r(this,e,fr(1,t))};return tr&&qr&&$r(Nr,e,{configurable:!0,set:n}),Zr(e,t)}).prototype,"toString",(function(){return Mr(this).tag})),xr(Fr,"withoutSetter",(function(t){return Zr(_r(t),t)})),kr.f=to,br.f=Jr,mr.f=eo,vr.f=gr.f=no,yr.f=io,Sr.f=function(t){return Zr(Er(t),t)},tr&&(Ur(Fr.prototype,"description",{configurable:!0,get:function(){return Mr(this).description}}),xr(Nr,"propertyIsEnumerable",to,{unsafe:!0}))),Zi({global:!0,wrap:!0,forced:!er,sham:!er},{Symbol:Fr}),Or(pr(zr),(function(t){!function(t){var e=Ri.Symbol||(Ri.Symbol={});Oi(e,t)||Ai(e,t,{value:Li.f(t)})}(t)})),Zi({target:Ar,stat:!0,forced:!er},{for:function(t){var e=ur(t);if(ir(Yr,e))return Yr[e];var n=Fr(e);return Yr[e]=n,Kr[n]=e,n},keyFor:function(t){if(!sr(t))throw TypeError(t+" is not a symbol");if(ir(Kr,t))return Kr[t]},useSetter:function(){qr=!0},useSimple:function(){qr=!1}}),Zi({target:"Object",stat:!0,forced:!er,sham:!tr},{create:function(t,e){return void 0===e?dr(t):Qr(dr(t),e)},defineProperty:Jr,defineProperties:Qr,getOwnPropertyDescriptor:eo}),Zi({target:"Object",stat:!0,forced:!er},{getOwnPropertyNames:no,getOwnPropertySymbols:io}),Zi({target:"Object",stat:!0,forced:nr((function(){yr.f(1)}))},{getOwnPropertySymbols:function(t){return yr.f(cr(t))}}),Br&&Zi({target:"JSON",stat:!0,forced:!er||nr((function(){var t=Fr();return"[null]"!=Br([t])||"{}"!=Br({a:t})||"{}"!=Br(Object(t))}))},{stringify:function(t,e,n){for(var i,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=e,(or(e)||void 0!==t)&&!sr(t))return rr(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!sr(e))return e}),r[1]=e,Br.apply(null,r)}}),Fr.prototype[Ir]||wr(Fr.prototype,Ir,Fr.prototype.valueOf),Pr(Fr,Ar),Tr[Lr]=!0;var ro=_n,oo=o,so=x,ao=i.f,co=c,lo=oo((function(){ao(1)}));ro({target:"Object",stat:!0,forced:!co||lo,sham:!co},{getOwnPropertyDescriptor:function(t,e){return ao(so(t),e)}});var uo=wt,ho=Nt,fo=d,po=function(t,e,n){var i=uo(e);i in t?ho.f(t,i,fo(0,n)):t[i]=n},vo=on,go=x,yo=i,mo=po;function ko(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bo(t,e,n){return e&&ko(t.prototype,e),n&&ko(t,n),t}function wo(t,e,n){return(wo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gi(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}_n({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(t){for(var e,n,i=go(t),r=yo.f,o=vo(i),s={},a=0;o.length>a;)void 0!==(n=r(i,e=o[a++]))&&mo(s,e,n);return s}});var xo=Kn,Co=Nt,To=pt("unscopables"),_o=Array.prototype;null==_o[To]&&Co.f(_o,To,{configurable:!0,value:xo(null)});var Eo=function(t){_o[To][t]=!0},So=_n,Po=$i.find,Ro=Eo,Oo=!0;"find"in[]&&Array(1).find((function(){Oo=!1})),So({target:"Array",proto:!0,forced:Oo},{find:function(t){return Po(this,t,arguments.length>1?arguments[1]:void 0)}}),Ro("find");var Lo=o,Ao=D,Io=pt("species"),Do=function(t){return Ao>=51||!Lo((function(){var e=[];return(e.constructor={})[Io]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Mo=_n,No=o,Fo=ki,Bo=C,jo=q,Uo=Me,Ho=po,Vo=Vi,Go=Do,Wo=D,Yo=pt("isConcatSpreadable"),Ko=9007199254740991,zo="Maximum allowed index exceeded",Xo=Wo>=51||!No((function(){var t=[];return t[Yo]=!1,t.concat()[0]!==t})),qo=Go("concat"),$o=function(t){if(!Bo(t))return!1;var e=t[Yo];return void 0!==e?!!e:Fo(t)};Mo({target:"Array",proto:!0,forced:!Xo||!qo},{concat:function(t){var e,n,i,r,o,s=jo(this),a=Vo(s,0),c=0;for(e=-1,i=arguments.length;e<i;e++)if($o(o=-1===e?s:arguments[e])){if(c+(r=Uo(o.length))>Ko)throw TypeError(zo);for(n=0;n<r;n++,c++)n in o&&Ho(a,c,o[n])}else{if(c>=Ko)throw TypeError(zo);Ho(a,c++,o)}return a.length=c,a}});var Zo={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Jo=o,Qo=function(t,e){var n=[][t];return!!n&&Jo((function(){n.call(null,e||function(){throw 1},1)}))},ts=$i.forEach,es=r,ns=Zo,is=Qo("forEach")?[].forEach:function(t){return ts(this,t,arguments.length>1?arguments[1]:void 0)},rs=Kt;for(var os in ns){var ss=es[os],as=ss&&ss.prototype;if(as&&as.forEach!==is)try{rs(as,"forEach",is)}catch(t){as.forEach=is}}var cs=q,ls=Rn;_n({target:"Object",stat:!0,forced:o((function(){ls(1)}))},{keys:function(t){return ls(cs(t))}});var us=_n,hs=C,fs=ki,ds=je,ps=Me,vs=x,gs=po,ys=pt,ms=Do("slice"),ks=ys("species"),bs=[].slice,ws=Math.max;us({target:"Array",proto:!0,forced:!ms},{slice:function(t,e){var n,i,r,o=vs(this),s=ps(o.length),a=ds(t,s),c=ds(void 0===e?s:e,s);if(fs(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!fs(n.prototype)?hs(n)&&null===(n=n[ks])&&(n=void 0):n=void 0,n===Array||void 0===n))return bs.call(o,a,c);for(i=new(void 0===n?Array:n)(ws(c-a,0)),r=0;a<c;a++,r++)a in o&&gs(i,r,o[a]);return i.length=r,i}});var xs=Bt,Cs=function(){var t=xs(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},Ts={},_s=o,Es=r.RegExp;Ts.UNSUPPORTED_Y=_s((function(){var t=Es("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Ts.BROKEN_CARET=_s((function(){var t=Es("^r","gy");return t.lastIndex=2,null!=t.exec("str")}));var Ss=o,Ps=r.RegExp,Rs=Ss((function(){var t=Ps(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),Os=o,Ls=r.RegExp,As=Os((function(){var t=Ls("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Is=wi,Ds=Cs,Ms=Ts,Ns=V.exports,Fs=Kn,Bs=be.get,js=Rs,Us=As,Hs=RegExp.prototype.exec,Vs=Ns("native-string-replace",String.prototype.replace),Gs=Hs,Ws=function(){var t=/a/,e=/b*/g;return Hs.call(t,"a"),Hs.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Ys=Ms.UNSUPPORTED_Y||Ms.BROKEN_CARET,Ks=void 0!==/()??/.exec("")[1];(Ws||Ks||Ys||js||Us)&&(Gs=function(t){var e,n,i,r,o,s,a,c=this,l=Bs(c),u=Is(t),h=l.raw;if(h)return h.lastIndex=c.lastIndex,e=Gs.call(h,u),c.lastIndex=h.lastIndex,e;var f=l.groups,d=Ys&&c.sticky,p=Ds.call(c),v=c.source,g=0,y=u;if(d&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),y=u.slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==u.charAt(c.lastIndex-1))&&(v="(?: "+v+")",y=" "+y,g++),n=new RegExp("^(?:"+v+")",p)),Ks&&(n=new RegExp("^"+v+"$(?!\\s)",p)),Ws&&(i=c.lastIndex),r=Hs.call(d?n:c,y),d?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:Ws&&r&&(c.lastIndex=c.global?r.index+r[0].length:i),Ks&&r&&r.length>1&&Vs.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r&&f)for(r.groups=s=Fs(null),o=0;o<f.length;o++)s[(a=f[o])[0]]=r[a[1]];return r});var zs=Gs;_n({target:"RegExp",proto:!0,forced:/./.exec!==zs},{exec:zs});var Xs=zt.exports,qs=zs,$s=o,Zs=pt,Js=Kt,Qs=Zs("species"),ta=RegExp.prototype,ea=function(t,e,n,i){var r=Zs(t),o=!$s((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),s=o&&!$s((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Qs]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return e=!0,null},n[r](""),!e}));if(!o||!s||n){var a=/./[r],c=e(r,""[t],(function(t,e,n,i,r){var s=e.exec;return s===qs||s===ta.exec?o&&!r?{done:!0,value:a.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}));Xs(String.prototype,t,c[0]),Xs(ta,r,c[1])}i&&Js(ta[r],"sham",!0)},na=C,ia=p,ra=pt("match"),oa=function(t){var e;return na(t)&&(void 0!==(e=t[ra])?!!e:"RegExp"==ia(t))},sa=Bt,aa=En,ca=pt("species"),la=function(t,e){var n,i=sa(t).constructor;return void 0===i||null==(n=sa(i)[ca])?e:aa(n)},ua=Ae,ha=wi,fa=k,da=function(t){return function(e,n){var i,r,o=ha(fa(e)),s=ua(n),a=o.length;return s<0||s>=a?t?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?t?o.charAt(s):i:t?o.slice(s,s+2):r-56320+(i-55296<<10)+65536}},pa={codeAt:da(!1),charAt:da(!0)},va=pa.charAt,ga=function(t,e,n){return e+(n?va(t,e).length:1)},ya=p,ma=zs,ka=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==ya(t))throw TypeError("RegExp#exec called on incompatible receiver");return ma.call(t,e)},ba=ea,wa=oa,xa=Bt,Ca=k,Ta=la,_a=ga,Ea=Me,Sa=wi,Pa=ka,Ra=zs,Oa=o,La=Ts.UNSUPPORTED_Y,Aa=[].push,Ia=Math.min,Da=4294967295;ba("split",(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=Sa(Ca(this)),r=void 0===n?Da:n>>>0;if(0===r)return[];if(void 0===t)return[i];if(!wa(t))return e.call(i,t,r);for(var o,s,a,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,h=new RegExp(t.source,l+"g");(o=Ra.call(h,i))&&!((s=h.lastIndex)>u&&(c.push(i.slice(u,o.index)),o.length>1&&o.index<i.length&&Aa.apply(c,o.slice(1)),a=o[0].length,u=s,c.length>=r));)h.lastIndex===o.index&&h.lastIndex++;return u===i.length?!a&&h.test("")||c.push(""):c.push(i.slice(u)),c.length>r?c.slice(0,r):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=Ca(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,r,n):i.call(Sa(r),e,n)},function(t,r){var o=xa(this),s=Sa(t),a=n(i,o,s,r,i!==e);if(a.done)return a.value;var c=Ta(o,RegExp),l=o.unicode,u=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(La?"g":"y"),h=new c(La?"^(?:"+o.source+")":o,u),f=void 0===r?Da:r>>>0;if(0===f)return[];if(0===s.length)return null===Pa(h,s)?[s]:[];for(var d=0,p=0,v=[];p<s.length;){h.lastIndex=La?0:p;var g,y=Pa(h,La?s.slice(p):s);if(null===y||(g=Ia(Ea(h.lastIndex+(La?p:0)),s.length))===d)p=_a(s,p,l);else{if(v.push(s.slice(d,p)),v.length===f)return v;for(var m=1;m<=y.length-1;m++)if(v.push(y[m]),v.length===f)return v;p=d=g}}return v.push(s.slice(d)),v}]}),!!Oa((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),La);var Ma=_n,Na=x,Fa=[].join,Ba=m!=Object,ja=Qo("join",",");Ma({target:"Array",proto:!0,forced:Ba||!ja},{join:function(t){return Fa.call(Na(this),void 0===t?",":t)}});var Ua=_n,Ha=je,Va=Ae,Ga=Me,Wa=q,Ya=Vi,Ka=po,za=Do("splice"),Xa=Math.max,qa=Math.min,$a=9007199254740991,Za="Maximum allowed length exceeded";Ua({target:"Array",proto:!0,forced:!za},{splice:function(t,e){var n,i,r,o,s,a,c=Wa(this),l=Ga(c.length),u=Ha(t,l),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=l-u):(n=h-2,i=qa(Xa(Va(e),0),l-u)),l+n-i>$a)throw TypeError(Za);for(r=Ya(c,i),o=0;o<i;o++)(s=u+o)in c&&Ka(r,o,c[s]);if(r.length=i,n<i){for(o=u;o<l-i;o++)a=o+n,(s=o+i)in c?c[a]=c[s]:delete c[a];for(o=l;o>l-i+n;o--)delete c[o-1]}else if(n>i)for(o=l-i;o>u;o--)a=o+n-1,(s=o+i-1)in c?c[a]=c[s]:delete c[a];for(o=0;o<n;o++)c[o+u]=arguments[o+2];return c.length=l-i+n,r}});var Ja={};Ja[pt("toStringTag")]="z";var Qa="[object z]"===String(Ja),tc=Qa,ec=p,nc=pt("toStringTag"),ic="Arguments"==ec(function(){return arguments}()),rc=tc?ec:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),nc))?n:ic?ec(e):"Object"==(i=ec(e))&&"function"==typeof e.callee?"Arguments":i},oc=rc,sc=Qa?{}.toString:function(){return"[object "+oc(this)+"]"},ac=Qa,cc=zt.exports,lc=sc;ac||cc(Object.prototype,"toString",lc,{unsafe:!0});var uc=r.Promise,hc=zt.exports,fc=function(t,e,n){for(var i in e)hc(t,i,e[i],n);return t},dc=C,pc=Bt,vc=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,i){return pc(n),function(t){if(!dc(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(i),e?t.call(n,i):n.__proto__=i,n}}():void 0),gc=E,yc=Nt,mc=c,kc=pt("species"),bc=function(t){var e=gc(t),n=yc.f;mc&&e&&!e[kc]&&n(e,kc,{configurable:!0,get:function(){return this}})},wc=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},xc={},Cc=xc,Tc=pt("iterator"),_c=Array.prototype,Ec=function(t){return void 0!==t&&(Cc.Array===t||_c[Tc]===t)},Sc=rc,Pc=xc,Rc=pt("iterator"),Oc=function(t){if(null!=t)return t[Rc]||t["@@iterator"]||Pc[Sc(t)]},Lc=Bt,Ac=function(t){var e=t.return;if(void 0!==e)return Lc(e.call(t)).value},Ic=Bt,Dc=Ec,Mc=Me,Nc=Bi,Fc=Oc,Bc=Ac,jc=function(t,e){this.stopped=t,this.result=e},Uc=pt("iterator"),Hc=!1;try{var Vc=0,Gc={next:function(){return{done:!!Vc++}},return:function(){Hc=!0}};Gc[Uc]=function(){return this},Array.from(Gc,(function(){throw 2}))}catch(t){}var Wc,Yc,Kc,zc,Xc=/(?:ipad|iphone|ipod).*applewebkit/i.test(S),qc="process"==p(r.process),$c=r,Zc=o,Jc=Bi,Qc=Dn,tl=_t,ol=Xc,el=qc,nl=$c.setImmediate,il=$c.clearImmediate,rl=$c.process,ul=$c.MessageChannel,sl=$c.Dispatch,al=0,dl={};try{Wc=$c.location}catch(t){}var cl=function(t){if(dl.hasOwnProperty(t)){var e=dl[t];delete dl[t],e()}},ll=function(t){return function(){cl(t)}},hl=function(t){cl(t.data)},fl=function(t){$c.postMessage(String(t),Wc.protocol+"//"+Wc.host)};nl&&il||(nl=function(t){for(var e=[],n=arguments.length,i=1;n>i;)e.push(arguments[i++]);return dl[++al]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Yc(al),al},il=function(t){delete dl[t]},el?Yc=function(t){rl.nextTick(ll(t))}:sl&&sl.now?Yc=function(t){sl.now(ll(t))}:ul&&!ol?(zc=(Kc=new ul).port2,Kc.port1.onmessage=hl,Yc=Jc(zc.postMessage,zc,1)):$c.addEventListener&&"function"==typeof postMessage&&!$c.importScripts&&Wc&&"file:"!==Wc.protocol&&!Zc(fl)?(Yc=fl,$c.addEventListener("message",hl,!1)):Yc="onreadystatechange"in tl("script")?function(t){Qc.appendChild(tl("script")).onreadystatechange=function(){Qc.removeChild(this),cl(t)}}:function(t){setTimeout(ll(t),0)});var pl,vl,gl,yl,ml,kl,bl,wl,xl={set:nl,clear:il},Cl=r,Tl=/ipad|iphone|ipod/i.test(S)&&void 0!==Cl.Pebble,_l=/web0s(?!.*chrome)/i.test(S),El=r,Sl=i.f,Pl=xl.set,Rl=Xc,Ol=Tl,Ll=_l,Al=qc,Il=El.MutationObserver||El.WebKitMutationObserver,Dl=El.document,Ml=El.process,Nl=El.Promise,Fl=Sl(El,"queueMicrotask"),Bl=Fl&&Fl.value;Bl||(pl=function(){var t,e;for(Al&&(t=Ml.domain)&&t.exit();vl;){e=vl.fn,vl=vl.next;try{e()}catch(t){throw vl?yl():gl=void 0,t}}gl=void 0,t&&t.enter()},Rl||Al||Ll||!Il||!Dl?!Ol&&Nl&&Nl.resolve?((bl=Nl.resolve(void 0)).constructor=Nl,wl=bl.then,yl=function(){wl.call(bl,pl)}):yl=Al?function(){Ml.nextTick(pl)}:function(){Pl.call(El,pl)}:(ml=!0,kl=Dl.createTextNode(""),new Il(pl).observe(kl,{characterData:!0}),yl=function(){kl.data=ml=!ml}));var jl=Bl||function(t){var e={fn:t,next:void 0};gl&&(gl.next=e),vl||(vl=e,yl()),gl=e},Ul={},Hl=En,Vl=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=Hl(e),this.reject=Hl(n)};Ul.f=function(t){return new Vl(t)};var Gl,Wl,Yl,Kl,zl=Bt,Xl=C,ql=Ul,$l=r,Zl="object"==typeof window,Jl=_n,Ql=r,tu=E,eu=uc,nu=zt.exports,iu=fc,ru=vc,ou=Ni,su=bc,au=C,cu=En,lu=wc,uu=Qt,hu=function(t,e,n){var i,r,o,s,a,c,l,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),p=Nc(e,u,1+h+d),v=function(t){return i&&Bc(i),new jc(!0,t)},g=function(t){return h?(Ic(t),d?p(t[0],t[1],v):p(t[0],t[1])):d?p(t,v):p(t)};if(f)i=t;else{if("function"!=typeof(r=Fc(t)))throw TypeError("Target is not iterable");if(Dc(r)){for(o=0,s=Mc(t.length);s>o;o++)if((a=g(t[o]))&&a instanceof jc)return a;return new jc(!1)}i=r.call(t)}for(c=i.next;!(l=c.call(i)).done;){try{a=g(l.value)}catch(t){throw Bc(i),t}if("object"==typeof a&&a&&a instanceof jc)return a}return new jc(!1)},fu=la,du=xl.set,pu=jl,vu=Ul,gu=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},yu=be,mu=yn,ku=Zl,bu=qc,wu=D,xu=pt("species"),Cu="Promise",Tu=yu.get,_u=yu.set,Eu=yu.getterFor(Cu),Su=eu&&eu.prototype,Pu=eu,Ru=Su,Ou=Ql.TypeError,Lu=Ql.document,Au=Ql.process,Iu=vu.f,Du=Iu,Mu=!!(Lu&&Lu.createEvent&&Ql.dispatchEvent),Nu="function"==typeof PromiseRejectionEvent,Fu="unhandledrejection",Bu=!1,ju=mu(Cu,(function(){var t=uu(Pu),e=t!==String(Pu);if(!e&&66===wu)return!0;if(wu>=51&&/native code/.test(t))return!1;var n=new Pu((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))};return(n.constructor={})[xu]=i,!(Bu=n.then((function(){}))instanceof i)||!e&&ku&&!Nu})),Uu=ju||!function(t,e){if(!e&&!Hc)return!1;var n=!1;try{var i={};i[Uc]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(t){}return n}((function(t){Pu.all(t).catch((function(){}))})),Hu=function(t){var e;return!(!au(t)||"function"!=typeof(e=t.then))&&e},Vu=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;pu((function(){for(var i=t.value,r=1==t.state,o=0;n.length>o;){var s,a,c,l=n[o++],u=r?l.ok:l.fail,h=l.resolve,f=l.reject,d=l.domain;try{u?(r||(2===t.rejection&&Ku(t),t.rejection=1),!0===u?s=i:(d&&d.enter(),s=u(i),d&&(d.exit(),c=!0)),s===l.promise?f(Ou("Promise-chain cycle")):(a=Hu(s))?a.call(s,h,f):h(s)):f(i)}catch(t){d&&!c&&d.exit(),f(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Wu(t)}))}},Gu=function(t,e,n){var i,r;Mu?((i=Lu.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),Ql.dispatchEvent(i)):i={promise:e,reason:n},!Nu&&(r=Ql["on"+t])?r(i):t===Fu&&function(t,e){var n=$l.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Wu=function(t){du.call(Ql,(function(){var e,n=t.facade,i=t.value;if(Yu(t)&&(e=gu((function(){bu?Au.emit("unhandledRejection",i,n):Gu(Fu,n,i)})),t.rejection=bu||Yu(t)?2:1,e.error))throw e.value}))},Yu=function(t){return 1!==t.rejection&&!t.parent},Ku=function(t){du.call(Ql,(function(){var e=t.facade;bu?Au.emit("rejectionHandled",e):Gu("rejectionhandled",e,t.value)}))},th=function(t,e,n){return function(i){t(e,i,n)}},zu=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Vu(t,!0))},Xu=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw Ou("Promise can't be resolved itself");var i=Hu(e);i?pu((function(){var n={done:!1};try{i.call(e,th(Xu,n,t),th(zu,n,t))}catch(e){zu(n,e,t)}})):(t.value=e,t.state=1,Vu(t,!1))}catch(e){zu({done:!1},e,t)}}};if(ju&&(Ru=(Pu=function(t){lu(this,Pu,Cu),cu(t),Gl.call(this);var e=Tu(this);try{t(th(Xu,e),th(zu,e))}catch(t){zu(e,t)}}).prototype,(Gl=function(t){_u(this,{type:Cu,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=iu(Ru,{then:function(t,e){var n=Eu(this),i=Iu(fu(this,Pu));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=bu?Au.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&Vu(n,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),Wl=function(){var t=new Gl,e=Tu(t);this.promise=t,this.resolve=th(Xu,e),this.reject=th(zu,e)},vu.f=Iu=function(t){return t===Pu||t===Yl?new Wl(t):Du(t)},"function"==typeof eu&&Su!==Object.prototype)){Kl=Su.then,Bu||(nu(Su,"then",(function(t,e){var n=this;return new Pu((function(t,e){Kl.call(n,t,e)})).then(t,e)}),{unsafe:!0}),nu(Su,"catch",Ru.catch,{unsafe:!0}));try{delete Su.constructor}catch(t){}ru&&ru(Su,Ru)}Jl({global:!0,wrap:!0,forced:ju},{Promise:Pu}),ou(Pu,Cu,!1),su(Cu),Yl=tu(Cu),Jl({target:Cu,stat:!0,forced:ju},{reject:function(t){var e=Iu(this);return e.reject.call(void 0,t),e.promise}}),Jl({target:Cu,stat:!0,forced:ju},{resolve:function(t){return function(t,e){if(zl(t),Xl(e)&&e.constructor===t)return e;var n=ql.f(t);return(0,n.resolve)(e),n.promise}(this,t)}}),Jl({target:Cu,stat:!0,forced:Uu},{all:function(t){var e=this,n=Iu(e),i=n.resolve,r=n.reject,o=gu((function(){var n=cu(e.resolve),o=[],s=0,a=1;hu(t,(function(t){var c=s++,l=!1;o.push(void 0),a++,n.call(e,t).then((function(t){l||(l=!0,o[c]=t,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(t){var e=this,n=Iu(e),i=n.reject,r=gu((function(){var r=cu(e.resolve);hu(t,(function(t){r.call(e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var qu=c,$u=Nt.f,Zu=Function.prototype,Ju=Zu.toString,Qu=/^\s*function ([^ (]*)/;qu&&!("name"in Zu)&&$u(Zu,"name",{configurable:!0,get:function(){try{return Ju.call(this).match(Qu)[1]}catch(t){return""}}});var eh=C,nh=vc,ih=function(t,e,n){var i,r;return nh&&"function"==typeof(i=e.constructor)&&i!==n&&eh(r=i.prototype)&&r!==n.prototype&&nh(t,r),t},rh=k,oh=wi,sh="[\t\n\v\f\r                　\u2028\u2029\ufeff]",ah=RegExp("^"+sh+sh+"*"),ch=RegExp(sh+sh+"*$"),lh=function(t){return function(e){var n=oh(rh(e));return 1&t&&(n=n.replace(ah,"")),2&t&&(n=n.replace(ch,"")),n}},uh={start:lh(1),end:lh(2),trim:lh(3)},hh=c,fh=r,dh=yn,ph=zt.exports,vh=Q,gh=p,yh=ih,mh=U,kh=mt,bh=o,wh=Kn,xh=Re.f,Ch=i.f,Th=Nt.f,_h=uh.trim,Eh="Number",Sh=fh.Number,Ph=Sh.prototype,Rh=gh(wh(Ph))==Eh,Oh=function(t){if(mh(t))throw TypeError("Cannot convert a Symbol value to a number");var e,n,i,r,o,s,a,c,l=kh(t,"number");if("string"==typeof l&&l.length>2)if(43===(e=(l=_h(l)).charCodeAt(0))||45===e){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(s=(o=l.slice(2)).length,a=0;a<s;a++)if((c=o.charCodeAt(a))<48||c>r)return NaN;return parseInt(o,i)}return+l};if(dh(Eh,!Sh(" 0o1")||!Sh("0b1")||Sh("+0x1"))){for(var Lh,Ah=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Ah&&(Rh?bh((function(){Ph.valueOf.call(n)})):gh(n)!=Eh)?yh(new Sh(Oh(e)),n,Ah):Oh(e)},Ih=hh?xh(Sh):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Dh=0;Ih.length>Dh;Dh++)vh(Sh,Lh=Ih[Dh])&&!vh(Ah,Lh)&&Th(Ah,Lh,Ch(Sh,Lh));Ah.prototype=Ph,Ph.constructor=Ah,ph(fh,Eh,Ah)}var Mh=$i.map;_n({target:"Array",proto:!0,forced:!Do("map")},{map:function(t){return Mh(this,t,arguments.length>1?arguments[1]:void 0)}});var Nh=$i.filter;_n({target:"Array",proto:!0,forced:!Do("filter")},{filter:function(t){return Nh(this,t,arguments.length>1?arguments[1]:void 0)}});var Fh=c,Bh=o,jh=Rn,Uh=Qe,Hh=s,Vh=q,Gh=m,Wh=Object.assign,Yh=Object.defineProperty,Kh=!Wh||Bh((function(){if(Fh&&1!==Wh({b:1},Wh(Yh({},"a",{enumerable:!0,get:function(){Yh(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=Wh({},t)[n]||jh(Wh({},e)).join("")!=i}))?function(t,e){for(var n=Vh(t),i=arguments.length,r=1,o=Uh.f,s=Hh.f;i>r;)for(var a,c=Gh(arguments[r++]),l=o?jh(c).concat(o(c)):jh(c),u=l.length,h=0;u>h;)a=l[h++],Fh&&!s.call(c,a)||(n[a]=c[a]);return n}:Wh,zh=Kh;_n({target:"Object",stat:!0,forced:Object.assign!==zh},{assign:zh});var Xh={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],a]:t._events[c].push(a):(t._events[c]=a,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,o),!0;case 6:return u.fn.call(u.context,e,i,r,o,s),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var f,d=u.length;for(l=0;l<d;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,i);break;case 4:u[l].fn.call(u[l].context,e,i,r);break;default:if(!c)for(f=1,c=new Array(h-1);f<h;f++)c[f-1]=arguments[f];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||s(this,o);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==e||r&&!a[c].once||i&&a[c].context!==i)&&l.push(a[c]);l.length?this._events[o]=1===l.length?l[0]:l:s(this,o)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a}(Xh);var qh=Xh.exports;function $h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Zh(t){return function(t){if(Array.isArray(t))return $h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return $h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$h(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Jh=Bt,Qh=Me,tf=wi,ef=k,nf=ga,rf=ka;ea("match",(function(t,e,n){return[function(e){var n=ef(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](tf(n))},function(t){var i=Jh(this),r=tf(t),o=n(e,i,r);if(o.done)return o.value;if(!i.global)return rf(i,r);var s=i.unicode;i.lastIndex=0;for(var a,c=[],l=0;null!==(a=rf(i,r));){var u=tf(a[0]);c[l]=u,""===u&&(i.lastIndex=nf(r,Qh(i.lastIndex),s)),l++}return 0===l?null:c}]}));var of=c,sf=r,af=yn,cf=ih,lf=Kt,uf=Nt.f,hf=Re.f,ff=oa,df=wi,pf=Cs,vf=Ts,gf=zt.exports,yf=o,mf=Q,kf=be.enforce,bf=bc,wf=Rs,xf=As,Cf=pt("match"),Tf=sf.RegExp,_f=Tf.prototype,Ef=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Sf=/a/g,Pf=/a/g,Rf=new Tf(Sf)!==Sf,Of=vf.UNSUPPORTED_Y,Lf=of&&(!Rf||Of||wf||xf||yf((function(){return Pf[Cf]=!1,Tf(Sf)!=Sf||Tf(Pf)==Pf||"/a/i"!=Tf(Sf,"i")})));if(af("RegExp",Lf)){for(var Af=function(t,e){var n,i,r,o,s,a,c=this instanceof Af,l=ff(t),u=void 0===e,h=[],f=t;if(!c&&l&&u&&t.constructor===Af)return t;if((l||t instanceof Af)&&(t=t.source,u&&(e="flags"in f?f.flags:pf.call(f))),t=void 0===t?"":df(t),e=void 0===e?"":df(e),f=t,wf&&"dotAll"in Sf&&(i=!!e&&e.indexOf("s")>-1)&&(e=e.replace(/s/g,"")),n=e,Of&&"sticky"in Sf&&(r=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,"")),xf&&(t=(o=function(t){for(var e,n=t.length,i=0,r="",o=[],s={},a=!1,c=!1,l=0,u="";i<=n;i++){if("\\"===(e=t.charAt(i)))e+=t.charAt(++i);else if("]"===e)a=!1;else if(!a)switch(!0){case"["===e:a=!0;break;case"("===e:Ef.test(t.slice(i+1))&&(i+=2,c=!0),r+=e,l++;continue;case">"===e&&c:if(""===u||mf(s,u))throw new SyntaxError("Invalid capture group name");s[u]=!0,o.push([u,l]),c=!1,u="";continue}c?u+=e:r+=e}return[r,o]}(t))[0],h=o[1]),s=cf(Tf(t,e),c?this:_f,Af),(i||r||h.length)&&(a=kf(s),i&&(a.dotAll=!0,a.raw=Af(function(t){for(var e,n=t.length,i=0,r="",o=!1;i<=n;i++)"\\"!==(e=t.charAt(i))?o||"."!==e?("["===e?o=!0:"]"===e&&(o=!1),r+=e):r+="[\\s\\S]":r+=e+t.charAt(++i);return r}(t),n)),r&&(a.sticky=!0),h.length&&(a.groups=h)),t!==f)try{lf(s,"source",""===f?"(?:)":f)}catch(t){}return s},If=function(t){t in Af||uf(Af,t,{configurable:!0,get:function(){return Tf[t]},set:function(e){Tf[t]=e}})},Df=hf(Tf),Mf=0;Df.length>Mf;)If(Df[Mf++]);_f.constructor=Af,Af.prototype=_f,gf(sf,"RegExp",Af)}bf("RegExp");var Nf=zt.exports,Ff=Bt,Bf=wi,jf=o,Uf=Cs,Hf="toString",Vf=RegExp.prototype,Gf=Vf.toString,Wf=jf((function(){return"/a/b"!=Gf.call({source:"a",flags:"b"})})),td=Gf.name!=Hf;(Wf||td)&&Nf(RegExp.prototype,Hf,(function(){var t=Ff(this),e=Bf(t.source),n=t.flags;return"/"+e+"/"+Bf(void 0===n&&t instanceof RegExp&&!("flags"in Vf)?Uf.call(t):n)}),{unsafe:!0});var Yf=o,Kf="\t\n\v\f\r                　\u2028\u2029\ufeff",zf=uh.trim;_n({target:"String",proto:!0,forced:function(t){return Yf((function(){return!!Kf[t]()||"​᠎"!="​᠎"[t]()||Kf[t].name!==t}))}("trim")},{trim:function(){return zf(this)}});var Xf=q,qf=Math.floor,$f="".replace,Zf=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Jf=/\$([$&'`]|\d{1,2})/g,Qf=ea,ed=o,nd=Bt,dd=Ae,id=Me,rd=wi,od=k,sd=ga,ad=function(t,e,n,i,r,o){var s=n+t.length,a=i.length,c=Jf;return void 0!==r&&(r=Xf(r),c=Zf),$f.call(o,c,(function(o,c){var l;switch(c.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(s);case"<":l=r[c.slice(1,-1)];break;default:var u=+c;if(0===u)return o;if(u>a){var h=qf(u/10);return 0===h?o:h<=a?void 0===i[h-1]?c.charAt(1):i[h-1]+c.charAt(1):o}l=i[u-1]}return void 0===l?"":l}))},cd=ka,ld=pt("replace"),ud=Math.max,hd=Math.min,fd="$0"==="a".replace(/./,"$0"),pd=!!/./[ld]&&""===/./[ld]("a","$0");Qf("replace",(function(t,e,n){var i=pd?"$":"$0";return[function(t,n){var i=od(this),r=null==t?void 0:t[ld];return void 0!==r?r.call(t,i,n):e.call(rd(i),t,n)},function(t,r){var o=nd(this),s=rd(t);if("string"==typeof r&&-1===r.indexOf(i)&&-1===r.indexOf("$<")){var a=n(e,o,s,r);if(a.done)return a.value}var c="function"==typeof r;c||(r=rd(r));var l=o.global;if(l){var u=o.unicode;o.lastIndex=0}for(var h=[];;){var f=cd(o,s);if(null===f)break;if(h.push(f),!l)break;""===rd(f[0])&&(o.lastIndex=sd(s,id(o.lastIndex),u))}for(var d,p="",v=0,g=0;g<h.length;g++){f=h[g];for(var y=rd(f[0]),m=ud(hd(dd(f.index),s.length),0),k=[],b=1;b<f.length;b++)k.push(void 0===(d=f[b])?d:String(d));var w=f.groups;if(c){var x=[y].concat(k,m,s);void 0!==w&&x.push(w);var C=rd(r.apply(void 0,x))}else C=ad(y,s,m,k,w,r);m>=v&&(p+=s.slice(v,m)+C,v=m+y.length)}return p+s.slice(v)}]}),!!ed((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!fd||pd);var vd=Math.floor,gd=function(t,e){var n=t.length,i=vd(n/2);return n<8?yd(t,e):md(gd(t.slice(0,i),e),gd(t.slice(i),e),e)},yd=function(t,e){for(var n,i,r=t.length,o=1;o<r;){for(i=o,n=t[o];i&&e(t[i-1],n)>0;)t[i]=t[--i];i!==o++&&(t[i]=n)}return t},md=function(t,e,n){for(var i=t.length,r=e.length,o=0,s=0,a=[];o<i||s<r;)o<i&&s<r?a.push(n(t[o],e[s])<=0?t[o++]:e[s++]):a.push(o<i?t[o++]:e[s++]);return a},kd=gd,bd=S.match(/firefox\/(\d+)/i),wd=!!bd&&+bd[1],xd=/MSIE|Trident/.test(S),Cd=S.match(/AppleWebKit\/(\d+)\./),Td=!!Cd&&+Cd[1],_d=_n,Ed=En,Sd=q,Pd=Me,Rd=wi,Od=o,Ld=kd,Ad=Qo,Id=wd,Dd=xd,Md=D,Nd=Td,Fd=[],Bd=Fd.sort,jd=Od((function(){Fd.sort(void 0)})),Ud=Od((function(){Fd.sort(null)})),Hd=Ad("sort"),Vd=!Od((function(){if(Md)return Md<70;if(!(Id&&Id>3)){if(Dd)return!0;if(Nd)return Nd<603;var t,e,n,i,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(i=0;i<47;i++)Fd.push({k:e+i,v:n})}for(Fd.sort((function(t,e){return e.v-t.v})),i=0;i<Fd.length;i++)e=Fd[i].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}}));_d({target:"Array",proto:!0,forced:jd||!Ud||!Hd||!Vd},{sort:function(t){void 0!==t&&Ed(t);var e=Sd(this);if(Vd)return void 0===t?Bd.call(e):Bd.call(e,t);var n,i,r=[],o=Pd(e.length);for(i=0;i<o;i++)i in e&&r.push(e[i]);for(n=(r=Ld(r,function(t){return function(e,n){return void 0===n?-1:void 0===e?1:void 0!==t?+t(e,n)||0:Rd(e)>Rd(n)?1:-1}}(t))).length,i=0;i<n;)e[i]=r[i++];for(;i<o;)delete e[i++];return e}});var Gd="undefined"!=typeof window&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,Wd={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},Yd="%c[xgplayer]",Kd={config:{debug:Gd?3:1},logInfo:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=3&&(e=console).log.apply(e,[Yd,Wd.info,t].concat(i))},logWarn:function(t){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this.config.debug>=1&&(e=console).warn.apply(e,[Yd,Wd.warn,t].concat(i))},logError:function(t){var e;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];(e=console)[n].apply(e,[Yd,Wd.error,t].concat(r))}}},zd=function(){function t(e){ui(this,t),this.bufferedList=e}return bo(t,[{key:"start",value:function(t){return this.bufferedList[t].start}},{key:"end",value:function(t){return this.bufferedList[t].end}},{key:"length",get:function(){return this.bufferedList.length}}]),t}(),rp={};function Xd(t,e){for(var n=0,i=e.length;n<i;n++)if(t.indexOf(e[n])>-1)return!0;return!1}rp.createDom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=document.createElement(t);return r.className=i,r.innerHTML=e,Object.keys(n).forEach((function(e){var i=e,o=n[e];"video"===t||"audio"===t||"live-video"===t?o&&r.setAttribute(i,o):r.setAttribute(i,o)})),r},rp.createDomFromHtml=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";try{var i=document.createElement("div");i.innerHTML=t;var r=i.children;return i=null,r.length>0?(r=r[0],n&&rp.addClass(r,n),e&&Object.keys(e).forEach((function(t){r.setAttribute(t,e[t])})),r):null}catch(t){return Kd.logError("util.createDomFromHtml",t),null}},rp.hasClass=function(t,e){if(!t||!e)return!1;try{return Array.prototype.some.call(t.classList,(function(t){return t===e}))}catch(r){var n=t.className&&"object"===di(t.className)?t.getAttribute("class"):t.className;return n&&!!n.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}},rp.addClass=function(t,e){if(t&&e)try{e.trim().split(/\s+/g).forEach((function(e){e&&t.classList.add(e)}))}catch(n){rp.hasClass(t,e)||(t.className&&"object"===di(t.className)?t.setAttribute("class",t.getAttribute("class")+" "+e):t.className+=" "+e)}},rp.removeClass=function(t,e){if(t&&e)try{e.trim().split(/\s+/g).forEach((function(e){e&&t.classList.remove(e)}))}catch(n){rp.hasClass(t,e)&&e.split(/\s+/g).forEach((function(e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className&&"object"===di(t.className)?t.setAttribute("class",t.getAttribute("class").replace(n," ")):t.className=t.className.replace(n," ")}))}},rp.toggleClass=function(t,e){t&&e.split(/\s+/g).forEach((function(e){rp.hasClass(t,e)?rp.removeClass(t,e):rp.addClass(t,e)}))},rp.classNames=function(){for(var t=arguments,e=[],n=function(n){"String"===rp.typeOf(t[n])?e.push(t[n]):"Object"===rp.typeOf(t[n])&&Object.keys(t[n]).map((function(i){t[n][i]&&e.push(i)}))},i=0;i<arguments.length;i++)n(i);return e.join(" ")},rp.findDom=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=arguments.length>1?arguments[1]:void 0;try{t=e.querySelector(n)}catch(r){Kd.logError("util.findDom",r),0===n.indexOf("#")&&(t=e.getElementById(n.slice(1)))}return t},rp.getCss=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,!1)[e]},rp.padStart=function(t,e,n){for(var i=String(n),r=e>>0,o=Math.ceil(r/i.length),s=[],a=String(t);o--;)s.push(i);return s.join("").substring(0,r-a.length)+a},rp.format=function(t){if(window.isNaN(t))return"";t=Math.round(t);var e=rp.padStart(Math.floor(t/3600),2,0),n=rp.padStart(Math.floor((t-3600*e)/60),2,0),i=rp.padStart(Math.floor(t-3600*e-60*n),2,0);return("00"===e?[n,i]:[e,n,i]).join(":")},rp.event=function(t){if(t.touches){var e=t.touches[0]||t.changedTouches[0];t.clientX=e.clientX||0,t.clientY=e.clientY||0,t.offsetX=e.pageX-e.target.offsetLeft,t.offsetY=e.pageY-e.target.offsetTop}t._target=t.target||t.srcElement},rp.typeOf=function(t){return Object.prototype.toString.call(t).match(/([^\s.*]+)(?=]$)/g)[0]},rp.deepCopy=function(t,e){if("Object"===rp.typeOf(e)&&"Object"===rp.typeOf(t))return Object.keys(e).forEach((function(n){"Object"!==rp.typeOf(e[n])||e[n]instanceof Node?"Array"===rp.typeOf(e[n])?t[n]="Array"===rp.typeOf(t[n])?t[n].concat(e[n]):e[n]:t[n]=e[n]:void 0===t[n]||void 0===t[n]?t[n]=e[n]:rp.deepCopy(t[n],e[n])})),t},rp.deepMerge=function(t,e){return Object.keys(e).map((function(n){var i;"Array"===rp.typeOf(e[n])&&"Array"===rp.typeOf(t[n])?"Array"===rp.typeOf(t[n])&&(i=t[n]).push.apply(i,Zh(e[n])):rp.typeOf(t[n])!==rp.typeOf(e[n])||null===t[n]||"Object"!==rp.typeOf(t[n])||e[n]instanceof window.Node?null!==e[n]&&(t[n]=e[n]):rp.deepMerge(t[n],e[n])})),t},rp.getBgImage=function(t){var e=(t.currentStyle||window.getComputedStyle(t,null)).backgroundImage;if(!e||"none"===e)return"";var n=document.createElement("a");return n.href=e.replace(/url\("|"\)/g,""),n.href},rp.copyDom=function(t){if(t&&1===t.nodeType){var e=document.createElement(t.tagName);return Array.prototype.forEach.call(t.attributes,(function(t){e.setAttribute(t.name,t.value)})),t.innerHTML&&(e.innerHTML=t.innerHTML),e}return""},rp.setInterval=function(t,e,n,i){t._interval[e]||(t._interval[e]=setInterval(n.bind(t),i))},rp.clearInterval=function(t,e){clearInterval(t._interval[e]),t._interval[e]=null},rp.setTimeout=function(t,e,n){t._timers||(t._timers=[]);var i=setTimeout((function(){e(),rp.clearTimeout(t,i)}),n);return t._timers.push(i),i},rp.clearTimeout=function(t,e){var n=t._timers;if("Array"===rp.typeOf(n)){for(var i=0;i<n.length;i++)if(n[i]===e){n.splice(i,1),clearTimeout(e);break}}else clearTimeout(e)},rp.clearAllTimers=function(t){var e=t._timers;"Array"===rp.typeOf(e)&&(e.map((function(t){clearTimeout(t)})),t._timerIds=[])},rp.createImgBtn=function(t,e,n,i){var r,o,s,a=rp.createDom("xg-".concat(t),"",{},"xgplayer-".concat(t,"-img"));return a.style.backgroundImage='url("'.concat(e,'")'),n&&i&&(["px","rem","em","pt","dp","vw","vh","vm","%"].every((function(t){return!(n.indexOf(t)>-1&&i.indexOf(t)>-1&&(r=parseFloat(n.slice(0,n.indexOf(t)).trim()),o=parseFloat(i.slice(0,i.indexOf(t)).trim()),s=t,1))})),a.style.width="".concat(r).concat(s),a.style.height="".concat(o).concat(s),a.style.backgroundSize="".concat(r).concat(s," ").concat(o).concat(s),a.style.margin="start"===t?"-".concat(o/2).concat(s," auto auto -").concat(r/2).concat(s):"auto 5px auto 5px"),a},rp.Hex2RGBA=function(t,e){var n=[];if(/^\#[0-9A-F]{3}$/i.test(t)){var i="#";t.replace(/[0-9A-F]/gi,(function(t){i+=t+t})),t=i}return/^#[0-9A-F]{6}$/i.test(t)?(t.replace(/[0-9A-F]{2}/gi,(function(t){n.push(parseInt(t,16))})),"rgba(".concat(n.join(","),", ").concat(e,")")):"rgba(255, 255, 255, 0.1)"},rp.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},rp.checkIsFunction=function(t){return t&&"function"==typeof t},rp.checkIsObject=function(t){return null!==t&&"object"===di(t)},rp.hide=function(t){t.style.display="none"},rp.show=function(t,e){t.style.display=e||"block"},rp.isUndefined=function(t){if(null==t)return!0},rp.setStyleFromCsstext=function(t,e){e&&("String"===rp.typeOf(e)?e.replace(/\s+/g,"").split(";").map((function(e){if(e){var n=e.split(":");n.length>1&&(t.style[n[0]]=n[1])}})):Object.keys(e).map((function(n){t.style[n]=e[n]})))},rp.filterStyleFromText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=t.style.cssText;if(!n)return{};var i=n.replace(/\s+/g,"").split(";"),r={},o={};return i.map((function(t){if(t){var n=t.split(":");n.length>1&&(Xd(n[0],e)?r[n[0]]=n[1]:o[n[0]]=n[1])}})),t.setAttribute("style",""),Object.keys(o).map((function(e){t.style[e]=o[e]})),r},rp.getStyleFromCsstext=function(t){var e=t.style.cssText;if(!e)return{};var n=e.replace(/\s+/g,"").split(";"),i={};return n.map((function(t){if(t){var e=t.split(":");e.length>1&&(i[e[0]]=e[1])}})),i},rp.preloadImg=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t){var i=new window.Image;i.complete?e&&e():(i.onload=function(t){i=null,e&&e(t)},i.onerror=function(t){i=null,n&&n(t)}),i.src=t}},rp.stopPropagation=function(t){t&&(t.stopPropagation(),t.cancelable&&t.preventDefault())},rp.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},rp.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0},rp.checkTouchSupport=function(){return"ontouchstart"in window},rp.getBuffered2=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=[],i=0;i<t.length;i++)n.push({start:t.start(i)<.5?0:t.start(i),end:t.end(i)});n.sort((function(t,e){return t.start-e.start||e.end-t.end}));var r=[];if(e)for(var o=0;o<n.length;o++){var s=r.length;if(s){var a=r[s-1].end;n[o].start-a<e?n[o].end>a&&(r[s-1].end=n[o].end):r.push(n[o])}else r.push(n[o])}else r=n;return new zd(r)},rp.getEventPos=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{x:t.x/e,y:t.y/e,clientX:t.clientX/e,clientY:t.clientY/e,offsetX:t.offsetX/e,offsetY:t.offsetY/e,pageX:t.pageX/e,pageY:t.pageY/e}},rp.requestAnimationFrame=function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(e)return e(t)},rp.getHostFromUrl=function(t){if(null==t||""===t||"string"!=typeof t)return"";var e=t.split("/"),n="";return e.length>3&&e[2]&&(n=e[2]),n},rp.cancelAnimationFrame=function(t){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;e&&e(t)};var qd=rp,$d=/(Android)\s([\d.]+)/,Zd=/(Version)\/([\d.]+)/,Jd=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],Qd={get device(){return Qd.os.isPc?"pc":"mobile"},get browser(){if("undefined"==typeof navigator)return"";var t=navigator.userAgent.toLowerCase(),e={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(e).filter((function(n){return e[n].test(t)})))[0]},get os(){if("undefined"==typeof navigator)return{};var t=navigator.userAgent,e=/(?:Windows Phone)/.test(t),n=/(?:SymbianOS)/.test(t)||e,i=/(?:Android)/.test(t),r=/(?:Firefox)/.test(t),o=/(?:iPad|PlayBook)/.test(t)||i&&!/(?:Mobile)/.test(t)||r&&/(?:Tablet)/.test(t),s=/(?:iPhone)/.test(t)&&!o,a=!(s||i||n||o),c=/(?:iPad|PlayBook)/.test(t);return{isTablet:o,isPhone:s,isIpad:c,isIos:s||c,isAndroid:i,isPc:a,isSymbian:n,isWindowsPhone:e,isFireFox:r}},get osVersion(){var t=navigator.userAgent,e="",n=(e=/(?:iPhone)|(?:iPad|PlayBook)/.test(t)?Zd:$d)?e.exec(t):[];if(n&&n.length>=3){var i=n[2].split(".");return i.length>0?parseInt(i[0]):0}return 0},get isWeixin(){return"undefined"!=typeof navigator&&(!!/(micromessenger)\/([\d.]+)/.exec(navigator.userAgent.toLocaleLowerCase())||void 0)},isSupportMP4:function(){if(this.supportResult)return this.supportResult;var t=document.createElement("video"),e={isSupport:!1,mime:""};return"function"==typeof t.canPlayType&&Jd.map((function(n){"probably"===t.canPlayType('video/mp4; codecs="'.concat(n,'"'))&&(e.isSupport=!0,e.mime+="||".concat(n))})),this.supportResult=e,t=null,e}},tp=Qd,ep="3.0.0-next.22",np={1:"network",2:"network",3:"decoder",4:"format"},ip=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};ui(this,t);var i=e&&e.i18n?e.i18n.ERROR_TYPES:null;if(e.video){var r=n.mediaError?n.mediaError:e.video.error||{},o=e.duration,s=e.currentTime,a=e.ended,c=e.src,l=e.currentSrc,u=e.video,h=u.readyState,f=u.networkState,d={playerVersion:ep,currentTime:s,duration:o,ended:a,readyState:h,networkState:f,src:c||l,errorType:n.errorType,errorCode:n.errorCode||r.code,message:n.errorMessage||r.message,mediaError:r,originError:n.originError?n.originError.stack:""};return n.ext&&Object.keys(n.ext).map((function(t){d[t]=n.ext[t]})),d}if(arguments.length>1){for(var p={playerVersion:ep,domain:document.domain},v=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],g=0;g<arguments.length;g++)p[v[g]]=arguments[g];return p.ex=i?(i[arguments[0]]||{}).msg:"",p}},op="play",sp="playing",ap="ended",cp="pause",lp="error",up="seeking",hp="seeked",fp="timeupdate",dp="waiting",pp="canplay",vp="durationchange",gp="volumechange",yp="loadeddata",mp="ratechange",kp="progress",bp="loadstart",wp="emptied",xp="focus",Cp="blur",Tp="ready",_p="urlNull",Ep="autoplay_started",Sp="autoplay_was_prevented",Pp="complete",Rp="destroy",Op="urlchange",Lp="fullscreen_change",Ap="cssFullscreen_change",Ip="mini_state_change",Dp="definition_change",Mp="after_definition_change",Np="video_resize",Fp="pip_change",Bp="rotate",jp="screenShot",Up="playnext",Hp="shortcut",Vp="user_action",Gp=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","ratechange","progress","loadstart","emptied","stalled","suspend","abort"],Wp={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},Yp=Object.freeze({__proto__:null,PLAY:op,PLAYING:sp,ENDED:ap,PAUSE:cp,ERROR:lp,SEEKING:up,SEEKED:hp,TIME_UPDATE:fp,WAITING:dp,CANPLAY:pp,CANPLAY_THROUGH:"canplaythrough",DURATION_CHANGE:vp,VOLUME_CHANGE:gp,LOADED_DATA:yp,RATE_CHANGE:mp,PROGRESS:kp,LOAD_START:bp,EMPTIED:wp,STALLED:"stalled",SUSPEND:"suspend",ABORT:"abort",BUFFER_CHANGE:"bufferedChange",PLAYER_FOCUS:xp,PLAYER_BLUR:Cp,READY:Tp,URL_NULL:_p,AUTOPLAY_STARTED:Ep,AUTOPLAY_PREVENTED:Sp,COMPLETE:Pp,REPLAY:"replay",DESTROY:Rp,URL_CHANGE:Op,FULLSCREEN_CHANGE:Lp,CSS_FULLSCREEN_CHANGE:Ap,MINI_STATE_CHANGE:Ip,DEFINITION_CHANGE:Dp,BEFORE_DEFINITION_CHANGE:"before_definition_change",AFTER_DEFINITION_CHANGE:Mp,SEI_PARSED:"SEI_PARSED",RETRY:"retry",VIDEO_RESIZE:Np,PIP_CHANGE:Fp,ROTATE:Bp,SCREEN_SHOT:jp,PLAYNEXT:Up,SHORTCUT:Hp,XGLOG:"xglog",USER_ACTION:Vp,USER_ACTION1:"user_action1",VIDEO_EVENTS:Gp,STATS_EVENTS:Wp});function Kp(t,e){this&&this.emit&&("error"===t?this.errorHandler(t):this.emit(t,e))}function zp(t,e){return function(n){var i={player:e,eventName:t,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:e.currentTime,duration:e.duration,paused:e.paused,ended:e.ended,isInternalOp:!!e._internalOp[n.type],muted:e.muted,volume:e.volume,host:qd.getHostFromUrl(e.currentSrc),vtype:e.vtype};if(e.removeInnerOP(n.type),"timeupdate"===t&&(e._currentTime=e.video&&e.video.currentTime),"durationchange"===t&&(e._duration=e.video.duration),"volumechange"===t&&(i.isMutedChange=e._lastMuted!==e.muted,e._lastMuted=e.muted),e.videoEventMiddleware[t])try{e.videoEventMiddleware[t].call(e,i,Kp.bind(e))}catch(n){throw Kp.call(e,t,i),n}else Kp.call(e,t,i)}}var Xp=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;ui(this,n),(i=e.call(this,t))._hasStart=!1,i._currentTime=0,i._duration=0,i._internalOp={},i._lastMuted=!1,i.vtype="MP4",i.videoConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:2,mediaType:t.mediaType||"video"},t.videoConfig,t.videoAttributes);var r=t["x5-video-player-type"]||t.x5VideoPlayerType;return tp.isWeixin&&tp.os.isAndroid&&r&&(i.videoConfig["x5-video-player-type"]=r,delete i.videoConfig.playsinline,delete i.videoConfig["webkit-playsinline"],delete i.videoConfig["x5-playsinline"]),t.loop&&(i.videoConfig.loop="loop"),i.video=qd.createDom(i.videoConfig.mediaType,"",i.videoConfig,""),t.defaultPlaybackRate&&(i.video.defaultPlaybackRate=i.video.playbackRate=t.defaultPlaybackRate),"Number"===qd.typeOf(t.volume)&&(i.volume=t.volume),t.autoplayMuted&&(i.video.muted=!0,i._lastMuted=!0),t.autoplay&&(i.video.autoplay=!0),i._interval={},i.videoEventMiddleware={},i.attachVideoEvents(),i}return bo(n,[{key:"setEventsMiddleware",value:function(t){var e=this;Object.keys(t).map((function(n){e.videoEventMiddleware[n]=t[n]}))}},{key:"removeEventsMiddleware",value:function(t){var e=this;Object.keys(t).map((function(t){delete e.videoEventMiddleware[t]}))}},{key:"attachVideoEvents",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers||(this._evHandlers=Gp.map((function(e){var n="on".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));return"function"==typeof t[n]&&t.on(e,t[n]),yi({},e,zp(e,t))}))),this._evHandlers.forEach((function(t){var n=Object.keys(t)[0];e.addEventListener(n,t[n],!1)}))}},{key:"detachVideoEvents",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.video;this._evHandlers.forEach((function(t){var n=Object.keys(t)[0];e.removeEventListener(n,t[n],!1)})),this._evHandlers.forEach((function(e){var n=Object.keys(e)[0],i="on".concat(n.charAt(0).toUpperCase()).concat(n.slice(1));"function"==typeof t[i]&&t.off(n,t[i])})),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(t,e){var n=this;t.removeAttribute("src"),e.forEach((function(t){n.video.appendChild(qd.createDom("source","",{src:"".concat(t.src),type:"".concat(t.type||"")}))}));var i=t.children;if(i){this._videoSourceCount=i.length,!this._sourceError&&(this._sourceError=function(t){n._videoSourceCount--,0===n._videoSourceCount&&(n.videoEventMiddleware.error?n.videoEventMiddleware.error.call(n,t,(function(){n.errorHandler("error")})):n.errorHandler("error",{code:4,message:"sources load error"}))});for(var r=0;r<i.length;r++)i[r].addEventListener("error",this._sourceError)}}},{key:"_detachSourceEvents",value:function(t){var e=t.children;if(e&&0!==e.length&&this._sourceError){for(var n=0;n<e.length;n++)e[n].removeEventListener("error",this._sourceError);for(;e.length>0;)t.removeChild(e[0])}}},{key:"errorHandler",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.video&&(this.video.error||e)){var n=this.video.error||e,i=n.code?np[n.code]:"other";n.message,this.video.currentSrc||(n={code:6,message:"empty_src"}),this.emit(t,new ip(this,{errorType:i,errorCode:n.code,errorMessage:n.message||"",mediaError:n}))}}},{key:"destroy",value:function(){for(var t in this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this.videoConfig=null,this._interval)clearInterval(this._interval[t]),this._interval[t]=null;this.detachVideoEvents(),this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){return this.video?this.video.play():null}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"canPlayType",value:function(t){return!!this.video&&this.video.canPlayType(t)}},{key:"getBufferedRange",value:function(t){var e=[0,0];if(!this.video)return e;t||(t=this.video.buffered);var n=this.video.currentTime;if(t)for(var i=0,r=t.length;i<r&&(e[0]=t.start(i),e[1]=t.end(i),!(e[0]<=n&&n<=e[1]));i++);return e[0]-n<=0&&n-e[1]<=0?e:[0,0]}},{key:"autoplay",get:function(){return!!this.video&&this.video.autoplay},set:function(t){this.video&&(this.video.autoplay=t)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?qd.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var t={start:0,end:0};if(!this.video)return t;var e=this.video.buffered;if(!e||0===e.length)return t;for(var n=0;n<e.length;n++)if((e.start(n)<=this.currentTime||e.start(n)<.1)&&e.end(n)>=this.currentTime)return{start:e.start(n),end:e.end(n)};return t}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(t){this.video&&(this.video.crossOrigin=t)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(t){this.video&&(this.video.currentSrc=t)}},{key:"currentTime",get:function(){return this.video?void 0!==this.video.currentTime?this.video.currentTime:this._currentTime:0},set:function(t){this.video&&(this.video.currentTime=t)}},{key:"defaultMuted",get:function(){return!!this.video&&this.video.defaultMuted},set:function(t){this.video&&(this.video.defaultMuted=t)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return!!this.video&&this.video.ended}},{key:"error",get:function(){return this.video.error}},{key:"errorNote",get:function(){return this.video.error?["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"][this.video.error.code-1]:""}},{key:"loop",get:function(){return!!this.video&&this.video.loop},set:function(t){this.video&&(this.video.loop=t)}},{key:"muted",get:function(){return!!this.video&&this.video.muted},set:function(t){this.video&&this.video.muted!==t&&(this._lastMuted=this.video.muted,this.video.muted=t)}},{key:"networkState",get:function(){return this.video.networkState}},{key:"paused",get:function(){return!this.video||this.video.paused}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(t){this.video&&t!==1/0&&(this.video.defaultPlaybackRate=t,this.video.playbackRate=t)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return!!this.video&&this.video.preload},set:function(t){this.video&&(this.video.preload=t)}},{key:"readyState",get:function(){return this.video.readyState}},{key:"seekable",get:function(){return!!this.video&&this.video.seekable}},{key:"seeking",get:function(){return!!this.video&&this.video.seeking}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(t){this.video&&(this.emit(Op,t),this.emit(dp),this._currentTime=0,this._duration=0,/^blob/.test(this.video.currentSrc)||/^blob/.test(this.video.src)?this.onWaiting():(this._detachSourceEvents(this.video),"Array"===qd.typeOf(t)?this._attachSourceEvents(this.video,t):this.video.src=t,this.load()))}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(t){t!==1/0&&this.video&&(this.video.volume=t)}},{key:"addInnerOP",value:function(t){this._internalOp[t]=!0}},{key:"removeInnerOP",value:function(t){delete this._internalOp[t]}},{key:"emit",value:function(t,e){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=wo(gi(n.prototype),"emit",this)).call.apply(i,[this,t,e].concat(o))}},{key:"on",value:function(t,e){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=wo(gi(n.prototype),"on",this)).call.apply(i,[this,t,e].concat(o))}},{key:"once",value:function(t,e){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=wo(gi(n.prototype),"once",this)).call.apply(i,[this,t,e].concat(o))}},{key:"off",value:function(t,e){for(var i,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];(i=wo(gi(n.prototype),"off",this)).call.apply(i,[this,t,e].concat(o))}},{key:"offAll",value:function(){wo(gi(n.prototype),"removeAllListeners",this).call(this)}}]),n}(qh),qp=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};ui(this,t),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=e}return bo(t,[{key:"openDB",value:function(t){var e=this,n=this,i=this.myDB.version||1,r=n.indexedDB.open(n.myDB.name,i);r.onerror=function(t){},r.onsuccess=function(i){e.myDB.db=i.target.result,t.call(n)},r.onupgradeneeded=function(t){var e=t.target.result;t.target.transaction,e.objectStoreNames.contains(n.myDB.ojstore.name)||e.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){this.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(t,e){for(var n,i=this.myDB.db.transaction(t,"readwrite").objectStore(t),r=0;r<e.length;r++)(n=i.add(e[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"putData",value:function(t,e){for(var n,i=this.myDB.db.transaction(t,"readwrite").objectStore(t),r=0;r<e.length;r++)(n=i.put(e[r])).onerror=function(){},n.onsuccess=function(){}}},{key:"getDataByKey",value:function(t,e,n){var i=this,r=this.myDB.db.transaction(t,"readwrite").objectStore(t).get(e);r.onerror=function(){n.call(i,null)},r.onsuccess=function(t){var e=t.target.result;n.call(i,e)}}},{key:"deleteData",value:function(t,e){this.myDB.db.transaction(t,"readwrite").objectStore(t).delete(e)}},{key:"clearData",value:function(t){this.myDB.db.transaction(t,"readwrite").objectStore(t).clear()}}]),t}(),$p=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Zp=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Jp=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"];function Qp(t,e,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];var s=e.call.apply(e,[t].concat(r));n&&"function"==typeof n&&(s&&s.then?s.then((function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];n.call.apply(n,[t].concat(i))})):n.call.apply(n,[t].concat(r)))}function tv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[t]&&(this.__hooks[t]=null),function(){var i=arguments,r=this;if(n.pre)try{var o;(o=n.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(t,":pre error] >> ").concat(e.message),e}if(this.__hooks&&this.__hooks[t])try{var s,a=(s=this.__hooks[t]).call.apply(s,[this,this].concat(Array.prototype.slice.call(arguments)));a?a.then?a.then((function(t){!1!==t&&Qp.apply(void 0,[r,e,n.next].concat(Zh(i)))})).catch((function(t){throw t})):Qp.apply(void 0,[this,e,n.next].concat(Array.prototype.slice.call(arguments))):void 0===a&&Qp.apply(void 0,[this,e,n.next].concat(Array.prototype.slice.call(arguments)))}catch(e){throw e.message="[pluginName: ".concat(this.pluginName,":").concat(t,"] >> ").concat(e.message),e}else Qp.apply(void 0,[this,e,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function ev(t,e){var n=this.__hooks;if(n)return n.hasOwnProperty(t)?(n&&(n[t]=e),!0):(console.warn("has no supported hook which name [".concat(t,"]")),!1)}function nv(t){if(this.plugins&&this.plugins[t.toLowerCase()]){for(var e=this.plugins[t.toLowerCase()],n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return e.useHooks&&e.useHooks.apply(e,i)}}function iv(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.__hooks={},e&&e.map((function(e){t.__hooks[e]=null})),Object.defineProperty(t,"hooks",{get:function(){return t.__hooks&&Object.keys(t.__hooks).map((function(e){if(t.__hooks[e])return e}))}})}function rv(t){t.__hooks=null}function ov(t,e,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];if(!t.__hooks||!t.__hooks[e])return n.call.apply(n,[t,t].concat(r));var s,a=(s=t.__hooks[e]).call.apply(s,[t,t].concat(r));if(a&&a.then)a.then((function(e){return!1===e?null:n.call.apply(n,[t,t].concat(r))})).catch((function(t){console.warn("[runHooks]".concat(e," reject"),t.message)}));else if(!1!==a)return n.call.apply(n,[t,t].concat(r))}function sv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function av(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sv(Object(n),!0).forEach((function(e){yi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function cv(t,e){Kd.logError("[".concat(t,"] event or callback cant be undefined or null when call ").concat(e))}var lv=function(){function t(e){ui(this,t),qd.checkIsFunction(this.beforeCreate)&&this.beforeCreate(e),iv(this),this.__args=e,this.__events={},this.config=e.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(e)}return bo(t,[{key:"beforeCreate",value:function(t){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(t){this.player=t.player,this.playerConfig=t.player&&t.player.config,this.pluginName=t.pluginName?t.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=t.player&&t.player.logger}},{key:"updateLang",value:function(t){}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var t=qd.checkTouchSupport()?"touch":"mouse";return!this.playerConfig||"touch"!==this.playerConfig.domEventType&&"mouse"!==this.playerConfig.domEventType||(t=this.playerConfig.domEventType),t}},{key:"on",value:function(t,e){var n=this;t&&e&&this.player?"string"==typeof t?(this.__events[t]=e,this.player.on(t,e)):Array.isArray(t)&&t.forEach((function(t){n.__events[t]=e,n.player.on(t,e)})):cv(this.pluginName,"plugin.on(event, callback)")}},{key:"once",value:function(t,e){t&&e&&this.player?this.player.once(t,e):cv(this.pluginName,"plugin.once(event, callback)")}},{key:"off",value:function(t,e){var n=this;t&&e&&this.player?"string"==typeof t?(delete this.__events[t],this.player.off(t,e)):Array.isArray(t)&&t.forEach((function(i){delete n.__events[t],n.player.off(i,e)})):cv(this.pluginName,"plugin.off(event, callback)")}},{key:"offAll",value:function(){var t=this;Object.keys(this.__events).map((function(e){t.__events[e]&&t.off(e,t.__events[e]),e&&delete t.__events[e]})),this.__events={}}},{key:"emit",value:function(t){var e;if(this.player){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=this.player).emit.apply(e,[t].concat(i))}}},{key:"emitUserAction",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=av(av({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(t,e,i)}},{key:"hook",value:function(t,e){return tv.call.apply(tv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return ev.call.apply(ev,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(this.player)return n&&(e.pluginName=n),this.player.registerPlugin({plugin:t,options:e})}},{key:"getPlugin",value:function(t){return this.player?this.player.getPlugin(t):null}},{key:"__destroy",value:function(){var t=this,e=this.player,n=this.pluginName;this.offAll(),qd.clearAllTimers(this),qd.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map((function(e){t[e]=null})),e.unRegisterPlugin(n),rv(this)}}],[{key:"defineGetterOrSetter",value:function(t,e){for(var n in e)Object.defineProperty(t,n,e[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),t}();if("undefined"!=typeof Element&&!Element.prototype.matches){var uv=Element.prototype;uv.matches=uv.matchesSelector||uv.mozMatchesSelector||uv.msMatchesSelector||uv.oMatchesSelector||uv.webkitMatchesSelector}function hv(t,e,n,i,r){var o=fv.apply(this,arguments);return t.addEventListener(n,o,r),{destroy:function(){t.removeEventListener(n,o,r)}}}function fv(t,e,n,i){return function(n){n.delegateTarget=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}(n.target,e),n.delegateTarget&&i.call(t,n)}}var dv=function(t,e,n,i,r){return"function"==typeof t.addEventListener?hv.apply(null,arguments):"function"==typeof n?hv.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return hv(t,e,n,i,r)})))},pv={CONTROLS:"controls",ROOT:"root"},vv={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function gv(t){return!!t&&t.indexOf&&/^http/.test(t)}function yv(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=null;if(t instanceof window.Element)return qd.addClass(t,n),Object.keys(i).map((function(e){t.setAttribute(e,i[e])})),t;if(gv(t)||gv(t.url))return i.src=gv(t)?t:t.url||"",o=qd.createDom(t.tag||"img","",i,"xg-img ".concat(n));if("function"==typeof t)try{return(o=t())instanceof window.Element?(qd.addClass(o,n),Object.keys(i).map((function(t){o.setAttribute(t,i[t])})),o):(Kd.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(r,"] is a function mast return an Element Object")),null)}catch(t){return Kd.logError("Plugin named [".concat(r,"]:createIcon"),t),null}return"string"==typeof t?qd.createDomFromHtml(t,i,n):(Kd.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(r,"] is invalid")),null)}var mv,kv,bv,wv=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ui(this,n),(t=e.call(this,i)).__delegates=[],t}return bo(n,[{key:"__init",value:function(t){if(wo(gi(n.prototype),"__init",this).call(this,t),t.root){var e=t.root,i=null;this.icons={},this.root=null,this.parent=null,function(t,e){var n=e.config.icons||e.playerConfig.icons;Object.keys(t).map((function(i){var r=t[i],o=r&&r.class?r.class:"",s=r&&r.attr?r.attr:{},a=null;n&&n[i]&&(o=function(t,e){return"object"===di(t)&&t.class&&"string"==typeof t.class?"".concat(e," ").concat(t.class):e}(n[i],o),s=function(t,e){return"object"===di(t)&&t.attr&&"object"===di(t.attr)&&Object.keys(t.attr).map((function(n){e[n]=t.attr[n]})),e}(n[i],s),a=yv(n[i],i,o,s,e.pluginName)),!a&&r&&(a=yv(r.icon?r.icon:r,s,o,{},e.pluginName)),e.icons[i]=a}))}(this.registerIcons()||{},this),this.langText={};var r,o,s=this.registerLanguageTexts()||{};r=s,o=this,Object.keys(r).map((function(t){Object.defineProperty(o.langText,t,{get:function(){var e=o.lang,n=o.i18n;return n[t]?n[t]:r[t]&&r[t][e]||""}})}));var a="";try{a=this.render()}catch(t){throw Kd.logError("Plugin:".concat(this.pluginName,":render"),t),new Error("Plugin:".concat(this.pluginName,":render:").concat(t.message))}if(a)(i=n.insert(a,e,t.index)).setAttribute("data-index",t.index);else{if(!t.tag)return;(i=qd.createDom(t.tag,"",t.attr,t.name)).setAttribute("data-index",t.index),e.appendChild(i)}this.root=i,this.parent=e;var c=this.config.attr||{},l=this.config.style||{};this.setAttr(c),this.setStyle(l),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var t=this;if(this.root){this._children=[];var e=this.children();e&&"object"===di(e)&&Object.keys(e).length>0&&Object.keys(e).map((function(n){var i,r,o=n,s=e[o],a={root:t.root};"function"==typeof s?(i=t.config[o]||{},r=s):"object"===di(s)&&"function"==typeof s.plugin&&(i=s.options?qd.deepCopy(t.config[o]||{},s.options):t.config[o]||{},r=s.plugin),a.config=i,void 0!==i.index&&(a.index=i.index),i.root&&(a.root=i.root),t.registerPlugin(r,a,o)}))}}},{key:"updateLang",value:function(t){t||(t=this.lang);var e=this.root,n=this.i18n,i=this.langText;e&&function t(e,n){for(var i=0;i<e.children.length;i++)e.children[i].children.length>0?t(e.children[i],n):n(e.children[i])}(e,(function(e){var r=e.getAttribute&&e.getAttribute("lang-key");if(r){var o=n[r.toUpperCase()]||i[r];o&&(e.innerHTML="function"==typeof o?o(t):o)}}))}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.i18n||{},i=this.langText;t.setAttribute&&t.setAttribute("lang-key",e);var r=n[e]||i[e]||"";r&&(t.innerHTML=r)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.root=e.root||this.root;var r=wo(gi(n.prototype),"registerPlugin",this).call(this,t,e,i);return this._children.push(r),r}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(t){if(this.root)return this.root.querySelector(t)}},{key:"bind",value:function(t,e,i){var r=this;if(arguments.length<3&&"function"==typeof e)Array.isArray(t)?t.forEach((function(t){r.bindEL(t,e)})):this.bindEL(t,e);else{var o=n.delegate.call(this,this.root,t,e,i);this.__delegates=this.__delegates.concat(o)}}},{key:"unbind",value:function(t,e){var n=this;if(arguments.length<3&&"function"==typeof e)Array.isArray(t)?t.forEach((function(t){n.unbindEL(t,e)})):this.unbindEL(t,e);else for(var i="".concat(t,"_").concat(e),r=0;r<this.__delegates.length;r++)if(this.__delegates[r].key===i){this.__delegates[r].destroy(),this.__delegates.splice(r,1);break}}},{key:"setStyle",value:function(t,e){var n=this;if(this.root)return"String"===qd.typeOf(t)?this.root.style[t]=e:void("Object"===qd.typeOf(t)&&Object.keys(t).map((function(e){n.root.style[e]=t[e]})))}},{key:"setAttr",value:function(t,e){var n=this;if(this.root)return"String"===qd.typeOf(t)?this.root.setAttribute(t,e):void("Object"===qd.typeOf(t)&&Object.keys(t).map((function(e){n.root.setAttribute(e,t[e])})))}},{key:"setHtml",value:function(t,e){this.root&&(this.root.innerHTML=t,"function"==typeof e&&e())}},{key:"bindEL",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(t)in this.root&&"function"==typeof e&&this.root.addEventListener(t,e,n)}},{key:"unbindEL",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.root&&"on".concat(t)in this.root&&"function"==typeof e&&this.root.removeEventListener(t,e,n)}},{key:"show",value:function(t){if(this.root)return this.root.style.display=void 0!==t?t:"block","none"===window.getComputedStyle(this.root,null).getPropertyValue("display")?this.root.style.display="block":void 0}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(t,e){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!(e&&e instanceof window.Element))return null;try{return"string"==typeof t?this.find(t).appendChild(e):t.appendChild(e)}catch(t){return Kd.logError("Plugin:appendChild",t),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var t=this,e=this.player;this.__delegates.map((function(t){t.destroy()})),this.__delegates=[],this._children instanceof Array&&(this._children.map((function(t){e.unRegisterPlugin(t.pluginName)})),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),wo(gi(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map((function(e){t[e]=null}))}}],[{key:"insert",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.children.length,r=Number(n),o=t instanceof window.Node;if(i){for(var s=0,a=null,c="";s<i;s++){a=e.children[s];var l=Number(a.getAttribute("data-index"));if(l>=r){c="beforebegin";break}l<r&&(c="afterend")}return o?"afterend"===c?e.appendChild(t):e.insertBefore(t,a):a.insertAdjacentHTML(c,t),"afterend"===c?e.children[e.children.length-1]:e.children[s]}return o?e.appendChild(t):e.insertAdjacentHTML("beforeend",t),e.children[e.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[];if(t instanceof window.Node&&"function"==typeof i)if(Array.isArray(n))n.forEach((function(n){var s=dv(t,e,n,i,r);s.key="".concat(e,"_").concat(n),o.push(s)}));else{var s=dv(t,e,n,i,r);s.key="".concat(e,"_").concat(n),o.push(s)}return o}},{key:"ROOT_TYPES",get:function(){return pv}},{key:"POSITIONS",get:function(){return vv}}]),n}(lv),xv=!o((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Cv=Q,Tv=q,_v=xv,Ev=rt("IE_PROTO"),Sv=Object.prototype,Pv=_v?Object.getPrototypeOf:function(t){return t=Tv(t),Cv(t,Ev)?t[Ev]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Sv:null},Rv=o,Ov=Pv,Lv=Kt,Av=Q,Iv=pt("iterator"),Dv=!1;[].keys&&("next"in(bv=[].keys())?(kv=Ov(Ov(bv)))!==Object.prototype&&(mv=kv):Dv=!0),(null==mv||Rv((function(){var t={};return mv[Iv].call(t)!==t})))&&(mv={}),Av(mv,Iv)||Lv(mv,Iv,(function(){return this}));var Mv={IteratorPrototype:mv,BUGGY_SAFARI_ITERATORS:Dv},Nv=Mv.IteratorPrototype,Fv=Kn,Bv=d,jv=Ni,Uv=xc,Hv=function(){return this},Vv=function(t,e,n){var i=e+" Iterator";return t.prototype=Fv(Nv,{next:Bv(1,n)}),jv(t,i,!1),Uv[i]=Hv,t},Gv=_n,Wv=Vv,Yv=Pv,Kv=vc,zv=Ni,Xv=Kt,qv=zt.exports,$v=xc,Zv=Mv.IteratorPrototype,Jv=Mv.BUGGY_SAFARI_ITERATORS,Qv=pt("iterator"),tg="values",eg="entries",ng=function(){return this},ig=function(t,e,n,i,r,o,s){Wv(n,e,i);var a,c,l,u=function(t){if(t===r&&v)return v;if(!Jv&&t in d)return d[t];switch(t){case"keys":case tg:case eg:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",f=!1,d=t.prototype,p=d[Qv]||d["@@iterator"]||r&&d[r],v=!Jv&&p||u(r),g="Array"==e&&d.entries||p;if(g&&(a=Yv(g.call(new t)),Zv!==Object.prototype&&a.next&&(Yv(a)!==Zv&&(Kv?Kv(a,Zv):"function"!=typeof a[Qv]&&Xv(a,Qv,ng)),zv(a,h,!0))),r==tg&&p&&p.name!==tg&&(f=!0,v=function(){return p.call(this)}),d[Qv]!==v&&Xv(d,Qv,v),$v[e]=v,r)if(c={values:u(tg),keys:o?v:u("keys"),entries:u(eg)},s)for(l in c)(Jv||f||!(l in d))&&qv(d,l,c[l]);else Gv({target:e,proto:!0,forced:Jv||f},c);return c},rg=x,og=Eo,sg=xc,ag=be,cg=ig,lg="Array Iterator",ug=ag.set,hg=ag.getterFor(lg),fg=cg(Array,"Array",(function(t,e){ug(this,{type:lg,target:rg(t),index:0,kind:e})}),(function(){var t=hg(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values");sg.Arguments=sg.Array,og("keys"),og("values"),og("entries");var dg=pa.charAt,pg=wi,vg=be,gg=ig,yg="String Iterator",mg=vg.set,kg=vg.getterFor(yg);gg(String,"String",(function(t){mg(this,{type:yg,string:pg(t),index:0})}),(function(){var t,e=kg(this),n=e.string,i=e.index;return i>=n.length?{value:void 0,done:!0}:(t=dg(n,i),e.index+=t.length,{value:t,done:!1})}));var bg=r,wg=Zo,xg=fg,Cg=Kt,Tg=pt,_g=Tg("iterator"),Eg=Tg("toStringTag"),Sg=xg.values;for(var Pg in wg){var Rg=bg[Pg],Og=Rg&&Rg.prototype;if(Og){if(Og[_g]!==Sg)try{Cg(Og,_g,Sg)}catch(t){Og[_g]=Sg}if(Og[Eg]||Cg(Og,Eg,Pg),wg[Pg])for(var Lg in xg)if(Og[Lg]!==xg[Lg])try{Cg(Og,Lg,xg[Lg])}catch(t){Og[Lg]=xg[Lg]}}}var Ag=function(){function t(){var e=this;if(ui(this,t),this.__handlers=[],this.timeStamp=0,this.observer=null,window.ResizeObserver)try{this.observer=new window.ResizeObserver((function(t){var n=(new Date).getTime();n-e.timeStamp<100||(e.timeStamp=n,e.__trigger(t))})),this.timeStamp=(new Date).getTime()}catch(t){console.error(t)}}return bo(t,[{key:"addObserver",value:function(t,e){if(this.observer){this.observer&&this.observer.observe(t);for(var n=this.__handlers,i=-1,r=0;r<n.length;r++)n[r]&&t===n[r].target&&(i=r);i>-1?this.__handlers[i].handler=e:this.__handlers.push({target:t,handler:e})}}},{key:"unObserver",value:function(t){var e=-1;this.__handlers.map((function(n,i){t===n.target&&(e=i)}));try{this.observer&&this.observer.unobserve(t)}catch(t){}this.observer&&this.observer.unobserve(t),e>-1&&this.__handlers.splice(e,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(t){for(var e=this.__handlers,n=0;n<e.length;n++)if(e[n]&&t===e[n].target){try{e[n].handler(t)}catch(t){console.error(t)}return!0}return!1}},{key:"__trigger",value:function(t){for(var e=0;e<t.length&&!this.__runHandler(t[e].target);e++);}}]),t}(),Ig=null,Dg={init:function(t){var e,n,i=t._pluginInfoId;i||(i=(new Date).getTime(),t._pluginInfoId=i),this.pluginGroup||(this.pluginGroup={}),!t.config.closeResizeObserver&&(e=t.root,n=function(){t.resize()},Ig||(Ig=new Ag),Ig.addObserver(e,n)),0===Object.keys(this.pluginGroup).length&&(t.isUserActive=!0),this.pluginGroup[i]={_player:t,_originalOptions:t.config||{}}},checkPlayerRoot:function(t){if(this.pluginGroup){for(var e=Object.keys(this.pluginGroup),n=0;n<e.length;n++){var i=this.pluginGroup[e[n]]._player;if(i.root===t)return i}return null}return null},lazyRegister:function(t,e){var n=this,i=e.timeout||1500;return Promise.race([e.loader().then((function(e){var i;i=e&&e.__esModule?e.default:e,n.register(t,i,e.options)})),new Promise((function(t,e){setTimeout((function(){e(new Error("timeout"))}),i)}))])},register:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t&&e&&"function"==typeof e&&void 0!==e.prototype){var i=t._pluginInfoId;i&&this.pluginGroup&&this.pluginGroup[i]||(this.init(t),i=t._pluginInfoId),this.pluginGroup[i]._plugins||(this.pluginGroup[i]._plugins=[]);var r=this.pluginGroup[i]._plugins,o=this.pluginGroup[i]._originalOptions;n.player=this.pluginGroup[i]._player;var s=n.pluginName||e.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(!e.isSupported||e.isSupported()){n.config||(n.config={});for(var a=Object.keys(o),c=0;c<a.length;c++)if(s.toLowerCase()===a[c].toLowerCase()){var l=o[a[c]];"Object"===qd.typeOf(l)?n.config=Object.assign({},n.config,o[a[c]]):"Boolean"===qd.typeOf(l)&&(n.config.disable=!l);break}e.defaultConfig&&Object.keys(e.defaultConfig).map((function(t){void 0===n.config[t]&&(n.config[t]=e.defaultConfig[t])})),n.root?"string"==typeof n.root&&(n.root=t[n.root]):n.root=t.root,n.index=n.config.index||0;try{r[s.toLowerCase()]&&(this.unRegister(i,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var u=new e(n);return r[s.toLowerCase()]=u,r[s.toLowerCase()].func=e,u&&"function"==typeof u.afterCreate&&u.afterCreate(),u}catch(t){throw console.error(t),t}}else console.warn("not supported plugin [".concat(s,"]"))}},unRegister:function(t,e){t._pluginInfoId&&(t=t._pluginInfoId),e=e.toLowerCase();try{var n=this.pluginGroup[t]._plugins[e];n&&(n.pluginName&&n.__destroy(),delete this.pluginGroup[t]._plugins[e])}catch(n){console.error("[unRegister:".concat(e,"] cgid:[").concat(t,"] error"),n)}},deletePlugin:function(t,e){var n=t._pluginInfoId;n&&this.pluginGroup&&this.pluginGroup[n]&&this.pluginGroup[n]._plugins&&delete this.pluginGroup[n]._plugins[e]},getPlugins:function(t){var e=t._pluginInfoId;return e&&this.pluginGroup[e]?this.pluginGroup[e]._plugins:{}},findPlugin:function(t,e){var n=t._pluginInfoId;if(!this.pluginGroup||!n)return null;var i=e.toLowerCase();return this.pluginGroup[n]._plugins[i]},beforeInit:function(t){var e=this;function n(t){return t&&t.then?t:new Promise((function(t){t()}))}return new Promise((function(i){if(e.pluginGroup)return(t._loadingPlugins&&t._loadingPlugins.length?Promise.all(t._loadingPlugins):Promise.resolve()).then((function(){var r=t._pluginInfoId;if(e.pluginGroup[r]){for(var o=e.pluginGroup[r]._plugins,s=[],a=0,c=Object.keys(o);a<c.length;a++){var l=c[a];if(o[l]&&o[l].beforePlayerInit)try{var u=o[l].beforePlayerInit();s.push(n(u))}catch(t){throw s.push(n(null)),t}}Promise.all([].concat(s)).then((function(){i()})).catch((function(t){console.error(t),i()}))}else i()}))}))},afterInit:function(t){var e=t._pluginInfoId;if(this.pluginGroup&&e)for(var n=this.pluginGroup[e]._plugins,i=0,r=Object.keys(n);i<r.length;i++){var o=r[i];n[o]&&n[o].afterPlayerInit&&n[o].afterPlayerInit()}},setLang:function(t,e){var n=e._pluginInfoId;if(this.pluginGroup&&n){var i=this.pluginGroup[n]._plugins;Object.keys(i).map((function(e){if(i[e].updateLang)i[e].updateLang(t);else try{i[e].lang=t}catch(t){console.warn("".concat(e," setLang"))}}))}},reRender:function(t){var e=t._pluginInfoId;if(e){for(var n={},i=this.pluginGroup[e]._plugins,r=0,o=Object.keys(i);r<o.length;r++){var s=o[r];n[s]={plugin:i[s].func,options:i[s]._args},this.unRegister(e,s)}for(var a=0,c=Object.keys(n);a<c.length;a++){var l=c[a];this.register(e,l,n[l].plugin,n[l].options)}}},onPluginsReady:function(t){var e=t._pluginInfoId,n=this.pluginGroup[e]._plugins;e&&n&&Object.keys(n).map((function(t){n[t].onPluginsReady&&"function"==typeof n[t].onPluginsReady&&n[t].onPluginsReady()}))},setCurrentUserActive:function(t,e){if(this.pluginGroup&&this.pluginGroup[t]){if(!e)return this.pluginGroup[t]._player.isUserActive=e,t;for(var n=Object.keys(this.pluginGroup),i=0;i<n.length;i++){var r=this.pluginGroup[n[i]];if(r&&r._player){this.pluginGroup[n[i]]._player.isUserActive=!1;break}}return this.pluginGroup[t]._player.isUserActive=e,t}},getCurrentUseActiveId:function(){if(this.pluginGroup){for(var t=Object.keys(this.pluginGroup),e=0;e<t.length;e++){var n=this.pluginGroup[t[e]];if(n&&n._player&&n._player.isUserActive)return t[e]}return null}},destroy:function(t){var e=t._pluginInfoId;if(this.pluginGroup[e]){var n;n=t.root,Ig.unObserver(n,void 0);for(var r=this.pluginGroup[e]._plugins,o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];this.unRegister(e,a)}var c=t.isUseActive;if(delete this.pluginGroup[e],delete t._pluginInfoId,c){var l=Object.keys(this.pluginGroup);l.length>0&&this.setCurrentUserActive(l[l.length-1],!0)}}}},Mg={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"},Ng=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Fg=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(t=e.call.apply(e,[this].concat(r))),"onMouseEnter",(function(e){var n=pi(t).player;n.userTimer&&(qd.clearTimeout(n,n.userTimer),clearTimeout(n.userTimer))})),yi(pi(t),"onMouseLeave",(function(){pi(t).player.focus()})),t}return bo(n,[{key:"beforeCreate",value:function(t){t.config.mode||"mobile"!==tp.device||(t.config.mode="flex"),t.player.config.marginControls&&(t.config.autoHide=!1)}},{key:"afterCreate",value:function(){var t=this,e=this.config,n=e.disable,i=e.height,r=e.mode;if(!n){"flex"===r&&this.player.addClass(Mg.FLEX_CONTROLS);var o={height:"".concat(i,"px")};Object.keys(o).map((function(e){t.root.style[e]=o[e]})),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(Ip,(function(e){e?qd.addClass(t.root,"mini-controls"):qd.removeClass(t.root,"mini-controls")})),"mobile"!==tp.device&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&qd.addClass(this.root,Mg.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){qd.removeClass(this.root,Mg.CONTROLS_AUTOHIDE)}},{key:"show",value:function(){qd.addClass(this.root,"show")}},{key:"hide",value:function(){qd.removeClass(this.root,"show")}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;if(this.root){var r=t.defaultConfig||{};if(!e.root){var o=e.position?e.position:e.config&&e.config.position?e.config.position:r.position;switch(o){case vv.CONTROLS_LEFT:e.root=this.left;break;case vv.CONTROLS_RIGHT:e.root=this.right;break;case vv.CONTROLS_CENTER:e.root=this.center;break;case vv.CONTROLS:e.root=this.root;break;default:e.root=this.left}return wo(gi(n.prototype),"registerPlugin",this).call(this,t,e,i)}}}},{key:"destroy",value:function(){"mobile"!==tp.device&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var t=this.config,e=t.mode,n=t.autoHide,i=t.initShow;if(!t.disable){var r=qd.classNames({"xgplayer-controls":!0},{"flex-controls":"flex"===e},{"bottom-controls":"bottom"===e},yi({},Mg.CONTROLS_AUTOHIDE,n),{"xgplayer-controls-initshow":i||!n});return'<xg-controls class="'.concat(r,'" unselectable="on" onselectstart="return false">\n    <xg-inner-controls class="xg-inner-controls xg-pos">\n      <xg-left-grid class="xg-left-grid">\n      </xg-left-grid>\n      <xg-center-grid class="xg-center-grid"></xg-center-grid>\n      <xg-right-grid class="xg-right-grid">\n      </xg-right-grid>\n    </xg-inner-controls>\n    </xg-controls>')}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(wv),Bg={},jg={},Ug=[],Hg={};function Vg(){Object.keys(Bg.en).map((function(t){jg[t]=t}))}function Gg(t){("Array"!==qd.typeOf(t)?Object.keys(t).map((function(e){return{LANG:"zh"===e?"zh-cn":e,TEXT:t[e]}})):t).map((function(t){Bg[t.LANG]?qd.deepMerge(Bg[t.LANG]||{},t.TEXT||{}):Hg[t.LANG]=t.TEXT})),Vg()}function Wg(t){var e=t.LANG,n=t.TEXT||{};Bg[e]||Ug.push(e),Bg[e]?qd.deepMerge(n,Bg[e]):Bg[e]=n,Hg[e]&&(Gg([{LANG:e,TEXT:Hg[e]}]),delete Hg[e]),"zh-cn"===e&&(Bg.zh=Bg["zh-cn"]),Vg()}Wg({LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}});var Yg={get textKeys(){return jg},get langKeys(){return Ug},get lang(){var t={};return Ug.map((function(e){t[e]=Bg[e]})),t.zh=Bg["zh-cn"],t},extend:Gg,use:Wg};function Kg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function zg(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Kg(Object(n),!0).forEach((function(e){yi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kg(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Xg=["play","pause","replay","retry"],qg=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;ui(this,n);var r,o=qd.deepMerge({id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!1,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!1,closeControlsBlur:!1,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},ignores:[],whitelist:[],inactive:3e3,lang:(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase(),controls:!0,marginControls:!1,fullscreenTarget:null,controlsList:[],screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],thumbnail:null,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}},t);iv(pi(i=e.call(this,o)),Xg),i.config=o,(r=pi(i)).logInfo=Kd.logInfo.bind(r),r.logWarn=Kd.logWarn.bind(r),r.logError=Kd.logError.bind(r);var s=i.constructor.defaultPreset;if(i.config.presets.length){var a=i.config.presets.indexOf("default");a>=0&&s&&(i.config.presets[a]=s)}else s&&i.config.presets.push(s);if(i.userTimer=null,i.waitTimer=null,i._state=1,i._hasStart=!1,i.isSeeking=!1,i.isCanplay=!1,i._runPending=!1,i.rotateDeg=0,i.isActive=!1,i.fullscreen=!1,i.cssfullscreen=!1,i.isRotateFullscreen=!1,i._fullscreenEl=null,i._cssfullscreenEl=null,i.curDefinition=null,i._orgCss="",i._fullScreenOffset=null,i._videoHeight=0,i._videoWidth=0,i._accPlayed={t:0,acc:0,loopAcc:0},i.innerContainer=null,i.controls=null,i.topBar=null,i.root=null,tp.os.isAndroid&&tp.osVersion>0&&tp.osVersion<6&&(i.config.autoplay=!1),i.database=new qp,i.isUserActive=!1,!i._initDOM())return console.error(new Error("can't find the dom which id is ".concat(i.config.id," or this.config.el does not exist"))),vi(i);var c=i.config,l=c.definition,u=void 0===l?{}:l;if(!c.url&&u.list&&u.list.length>0){var h=u.list.find((function(t){return t.definition&&t.definition===u.defaultDefinition}));h||(u.defaultDefinition=u.list[0].definition,h=u.list[0]),i.config.url=h.url,i.curDefinition=h.definition}return i._bindEvents(),i._registerPresets(),i._registerPlugins(),Dg.onPluginsReady(pi(i)),i.setState(2),i.emit(Tp),i.onReady&&i.onReady(),(i.config.videoInit||i.config.autoplay)&&(!i.hasStart||i.state<4)&&i.start(),i}return bo(n,[{key:"_initDOM",value:function(){var t=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var e=this.config.el;if(!e||1!==e.nodeType)return this.emit(lp,new ip("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1;this.root=e}var n=Dg.checkPlayerRoot(this.root);n&&(Kd.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),n.destroy()),this._initBaseDoms();var i=this.constructor.XgVideoProxy;if(i&&this.videoConfig.mediaType===i.mediaType){var r=this.innerContainer||this.root;this.detachVideoEvents(this.video);var o=new i(r,this.config,this.videoConfig);this.attachVideoEvents(o),this.video=o}if(this.config.controls){var s=Dg.register(this,Fg);this.controls=s}var a=this.config.isMobileSimulateMode?"mobile":tp.device;if(this.addClass("".concat(Mg.DEFAULT," ").concat(Mg.INACTIVE," xgplayer-").concat(a," ").concat(this.config.controls?"":Mg.NO_CONTROLS)),this.config.autoplay?this.addClass(Mg.ENTER):this.addClass(Mg.NO_START),this.config.fluid){var c=this.config,l=c.width,u=c.height;"number"==typeof l&&"number"==typeof u||(l=600,u=337.5);var h={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(100*u/l,"%")};Object.keys(h).forEach((function(e){t.root.style[e]=h[e]}))}else["width","height"].forEach((function(e){t.config[e]&&("number"!=typeof t.config[e]?t.root.style[e]=t.config[e]:t.root.style[e]="".concat(t.config[e],"px"))}));return!0}},{key:"_initBaseDoms",value:function(){this.topBar=qd.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=qd.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=qd.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=qd.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.config.topBarAutoHide&&qd.addClass(this.topBar,Mg.TOP_BAR_AUTOHIDE),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var t=this;["focus","blur"].forEach((function(e){t.on(e,t["on"+e.charAt(0).toUpperCase()+e.slice(1)])})),this.onFullscreenChange=function(e,n){var i=qd.getFullScreenEl();if(t._fullActionFrom?t._fullActionFrom="":t.emit(Vp,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:t.currentTime,duration:t.duration,props:[{prop:"fullscreen",from:!0,to:!1}]}),n||i&&(i===t._fullscreenEl||"VIDEO"===i.tagName))qd.setTimeout(t,(function(){t.resize()}),100),!t.config.closeFocusVideoFocus&&t.video.focus(),t.fullscreen=!0,t.changeFullStyle(t.root,i,Mg.FULLSCREEN),t.emit(Lp,!0,t._fullScreenOffset),t.cssfullscreen&&t.exitCssFullscreen();else if(t.fullscreen){qd.setTimeout(t,(function(){t.resize()}),100);var r=t._fullScreenOffset;t.config.needFullscreenScroll?(window.scrollTo(r.left,r.top),qd.setTimeout(t,(function(){t.fullscreen=!1,t._fullScreenOffset=null}),100)):(!t.config.closeFocusVideoFocus&&t.video.focus(),t.fullscreen=!1,t._fullScreenOffset=null),t.cssfullscreen?t.removeClass(Mg.FULLSCREEN):t.recoverFullStyle(t.root,t._fullscreenEl,Mg.FULLSCREEN),t._fullscreenEl=null,t.emit(Lp,!1)}},$p.forEach((function(e){document&&document.addEventListener(e,t.onFullscreenChange)})),this.__webkitbeginfullscreen=function(e){t._fullscreenEl=t.video,t.onFullscreenChange(e,!0)},this.__webkitendfullscreen=function(e){t.onFullscreenChange(e,!1)},tp.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this.__webkitendfullscreen)),this.once(yp,this.resize),this.playFunc=function(){t.config.closeFocusVideoFocus||t.video.focus()},this.once(op,this.playFunc)}},{key:"_unbindEvents",value:function(){var t=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),$p.forEach((function(e){document.removeEventListener(e,t.onFullscreenChange)})),this.playFunc&&this.off(op,this.playFunc),this.canPlayFunc&&this.off(pp,this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this.__webkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this.__webkitendfullscreen)}},{key:"_startInit",value:function(t){var e=this;if(this.video&&(t&&""!==t&&("Array"!==qd.typeOf(t)||0!==t.length)||(t="",this.emit(_p),Kd.logWarn("config.url is null, please get url and run player._startInit(url)"),!this.config.nullUrlStart))){this.canPlayFunc=function(){if(e.config){var t=e.config,n=t.autoplay,i=t.startTime,r=t.defaultPlaybackRate;Kd.logInfo("player","canPlayFunc",i),i&&(e.currentTime=i>e.duration?e.duration:i,e.config.startTime=0),1!==r&&(e.playbackRate=r),n&&e.videoPlay(),e.off(pp,e.canPlayFunc),e.removeClass(Mg.ENTER)}},this._detachSourceEvents(this.video),"Array"===qd.typeOf(t)?this._attachSourceEvents(this.video,t):this.video.src=t,"Number"===qd.typeOf(this.config.volume)&&(this.volume=this.config.volume),this.loadeddataFunc&&this.once(yp,this.loadeddataFunc);var n=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!n.contains(this.video)&&n.insertBefore(this.video,n.firstChild);var i=this.video.readyState;Kd.logInfo("_startInit readyState",i),this.config.autoplay&&(!/^blob/.test(this.video.currentSrc)&&!/^blob/.test(this.video.src)&&this.load(),(tp.os.isIpad||tp.os.isPhone)&&this.videoPlay()),i>=2?this.canPlayFunc():this.once(pp,this.canPlayFunc),(!this.hasStart||this.state<4)&&Dg.afterInit(this),this.hasStart=!0,this.setState(4),qd.setTimeout(this,(function(){e.emit(Pp)}),0)}}},{key:"_registerPlugins",value:function(){var t=this;this._loadingPlugins=[];var e=this.config.ignores||[],n=this.config.plugins||[];(this.config.i18n||[]).forEach((function(t){Yg.use(t)}));var i=e.join("||").toLowerCase().split("||");n.forEach((function(e){try{var n=e.plugin?e.plugin.pluginName:e.pluginName;if(n&&i.indexOf(n.toLowerCase())>-1)return;if(e.lazy&&e.loader){var r=Dg.lazyRegister(t,e);return void(e.forceBeforeInit&&(r.then((function(){t._loadingPlugins.splice(t._loadingPlugins.indexOf(r),1)})).catch((function(e){Kd.logError("_registerPlugins:loadingPlugin",e),t._loadingPlugins.splice(t._loadingPlugins.indexOf(r),1)})),t._loadingPlugins.push(r)))}return t.registerPlugin(e)}catch(t){Kd.logError("_registerPlugins:",t)}}))}},{key:"_registerPresets",value:function(){var t=this;this.config.presets.forEach((function(e){var n,i,r,o,s,a,c,l,u,h,f,d,p,v;n=t,l=void 0===(c=(a=(i=e).preset&&i.options?new i.preset(i.options,n.config):new i({},n.config)).plugins)?[]:c,h=void 0===(u=a.ignores)?[]:u,f=a.icons,d=void 0===f?{}:f,v=void 0===(p=a.i18n)?[]:p,n.config.plugins||(n.config.plugins=[]),n.config.ignores||(n.config.ignores=[]),(r=n.config.plugins).push.apply(r,Zh(l)),(o=n.config.ignores).push.apply(o,Zh(h)),Object.keys(d).map((function(t){n.config.icons[t]||(n.config.icons[t]=d[t])})),(s=n.config.i18n).push.apply(s,Zh(v))}))}},{key:"registerPlugin",value:function(t,e){var n=null,i=null;t.plugin&&"function"==typeof t.plugin?(n=t.plugin,i=t.options):(n=t,i={}),e&&(i.config=e);for(var r=Object.keys(this.config),o=0;o<r.length;o++)if(n.pluginName.toLowerCase()===r[o].toLowerCase()){var s=this.config[r[o]];"Object"===qd.typeOf(s)&&(s.root&&(i.root=s.root),s.position&&(i.position=s.position));break}var a=i.position?i.position:i.config&&i.config.position||n.defaultConfig&&n.defaultConfig.position,c=wv.POSITIONS;if(!i.root&&"string"==typeof a&&a.indexOf("controls")>-1)return this.controls&&this.controls.registerPlugin(n,i,n.pluginName);if(!i.root)switch(a){case c.ROOT_RIGHT:i.root=this.rightBar;break;case c.ROOT_LEFT:i.root=this.leftBar;break;case c.ROOT_TOP:i.root=this.topBar;break;default:i.root=this.innerContainer||this.root}return Dg.register(this,n,i)}},{key:"deregister",value:function(t){"string"==typeof t?Dg.unRegister(this,t):t instanceof lv&&Dg.unRegister(this,t.pluginName)}},{key:"unRegisterPlugin",value:function(t){this.deregister(t)}},{key:"plugins",get:function(){return Dg.getPlugins(this)}},{key:"getPlugin",value:function(t){var e=Dg.findPlugin(this,t);return e&&e.pluginName?e:null}},{key:"addClass",value:function(t){this.root&&(qd.hasClass(this.root,t)||qd.addClass(this.root,t))}},{key:"removeClass",value:function(t){this.root&&qd.removeClass(this.root,t)}},{key:"hasClass",value:function(t){if(this.root)return qd.hasClass(this.root,t)}},{key:"setAttribute",value:function(t,e){this.root&&this.root.setAttribute(t,e)}},{key:"removeAttribute",value:function(t,e){this.root&&this.root.removeAttribute(t,e)}},{key:"start",value:function(t){var e=this;return this.hasStart||this.state>=3?Promise.resolve():(this.hasStart=!0,this.setState(3),Dg.beforeInit(this).then((function(){if(e.config)return t||(t=e.url||e.config.url),e._startInit(t)})).catch((function(t){throw t.fileName="player",t.lineNumber="236",Kd.logError("start:beforeInit:",t),t})))}},{key:"switchURL",value:function(t){var e=this,n=t;"Object"===qd.typeOf(t)&&(n=t.url);var i=this.currentTime,r=this.paused;return this.src=n,new Promise((function(t){var n=function(){e.currentTime=i,r&&e.once("canplay",(function(){e.pause()})),t()};tp.os.isAndroid?e.once("timeupdate",(function(){n()})):e.once("canplay",(function(){n()})),e.play()}))}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"videoPlay",value:function(){var t=this;if(this.hasStart||!(this.state<4)){this.state<6&&(this.removeClass(Mg.NO_START),!this.isCanplay&&this.addClass(Mg.ENTER));var e=wo(gi(n.prototype),"play",this).call(this);return void 0!==e&&e&&e.then?e.then((function(){t.removeClass(Mg.NOT_ALLOW_AUTOPLAY),t.addClass(Mg.PLAYING),t.state<6&&(Kd.logInfo(">>>>playPromise.then"),t.setState(6),t.emit(Ep))})).catch((function(e){if(Kd.logWarn(">>>>playPromise.catch",e.name),t.video&&t.video.error)return t.onError(),t.removeClass(Mg.ENTER),void t.setState(0);"NotAllowedError"===e.name&&(t._errorTimer=qd.setTimeout(t,(function(){t._errorTimer=null,t.emit(Sp),t.addClass(Mg.NOT_ALLOW_AUTOPLAY),t.removeClass(Mg.ENTER),t.pause(),t.setState(5)}),0))})):(Kd.logWarn("video.play not return promise"),this.state<6&&(this.setState(6),this.removeClass(Mg.NOT_ALLOW_AUTOPLAY),this.removeClass(Mg.NO_START),this.removeClass(Mg.ENTER),this.addClass(Mg.PLAYING),this.emit(Ep))),e}this.removeClass(Mg.NO_START),this.addClass(Mg.ENTER);var i=this.start();i&&i.then((function(e){!t.config.autoplay&&t.videoPlay()}))}},{key:"videoPause",value:function(){wo(gi(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var t=this;this.removeClass(Mg.PAUSED),ov(this,"play",(function(){t.videoPlay()}))}},{key:"pause",value:function(){var t=this;ov(this,"pause",(function(){wo(gi(n.prototype),"pause",t).call(t)}))}},{key:"seek",value:function(t,e){var n=this;if(this.video&&!isNaN(Number(t))){var i=this.config,r=i.isSeekedPlay,o=i.seekedStatus,s=e||(r?"play":o);t=t<0?0:t>this.duration?parseInt(this.duration,10):t,this.once(pp,(function(){switch(n.removeClass(Mg.ENTER),n.isSeeking=!1,s){case"play":n.play();break;case"pause":n.pause();break;default:!n.paused&&n.play()}})),this.state<6?(this.removeClass(Mg.NO_START),this.addClass(Mg.ENTER),this.currentTime=t,"play"===s&&this.play()):this.currentTime=t}}},{key:"changeDefinition",value:function(t,e){var n=this;if(this.emit(Dp,{from:e,to:t}),this.curDefinition=t.definition,this.hasStart){var i=this.switchURL(t.url);i&&i.then?i.then((function(){n.emit(Mp,{from:e,to:t})})):this.emit(Mp,{from:e,to:t})}else this.config.url=t.url}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(yp,this.reloadFunc)}},{key:"resetState",value:function(){var t=this,e=[Mg.NOT_ALLOW_AUTOPLAY,Mg.PLAYING,Mg.NO_START,Mg.PAUSED,Mg.REPLAY,Mg.ENTER,Mg.ENDED,Mg.ERROR,Mg.LOADING];this.hasStart=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,e.forEach((function(e){t.removeClass(e)})),this.addClass(Mg.ENTER),this.emit(wp)}},{key:"destroy",value:function(){var t=this,e=this.innerContainer,i=this.root,r=this.video;if(i&&r){if(this._hasStart=!1,this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),qd.clearAllTimers(this),this.emit(Rp),Dg.destroy(this),rv(this),wo(gi(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),e)for(var o=e.children,s=0;s<o.length;s++)e.removeChild(o[s]);!e&&r instanceof window.Node&&i.contains(r)&&i.removeChild(r),["topBar","leftBar","rightBar","innerContainer"].map((function(e){t[e]&&i.removeChild(t[e]),t[e]=null}));var a=i.className.split(" ");a.length>0?i.className=a.filter((function(t){return t.indexOf("xgplayer")<0})).join(" "):i.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach((function(e){t[e]=!1}))}}},{key:"replay",value:function(){var t=this;this.removeClass(Mg.ENDED),this.currentTime=0,this.isSeeking=!1,ov(this,"replay",(function(){t.once(pp,(function(){var e=t.videoPlay();e&&e.catch&&e.catch((function(t){console.log(t)}))})),t.play(),t.emit("replay"),t.onPlay()}))}},{key:"retry",value:function(){var t=this;this.removeClass(Mg.ERROR),this.addClass(Mg.LOADING),ov(this,"retry",(function(){var e=t.currentTime;t.videoPause(),t.src=t.config.url,!t.config.isLive&&(t.currentTime=e),t.once(pp,(function(){t.videoPlay()}))}))}},{key:"changeFullStyle",value:function(t,e,n,i){t&&(i||(i=Mg.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=qd.filterStyleFromText(t)),qd.addClass(t,n),e&&e!==t&&!this._orgPCss&&(this._orgPCss=qd.filterStyleFromText(e),qd.addClass(e,i)))}},{key:"recoverFullStyle",value:function(t,e,n,i){i||(i=Mg.PARENT_FULLSCREEN),this._orgCss&&(qd.setStyleFromCsstext(t,this._orgCss),this._orgCss=""),qd.removeClass(t,n),e&&e!==t&&this._orgPCss&&(qd.setStyleFromCsstext(e,this._orgPCss),this._orgPCss="",qd.removeClass(e,i))}},{key:"getFullscreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget,e=this.root,n=this.video;t||(t=e),this._fullScreenOffset={top:qd.scrollTop(),left:qd.scrollLeft()},this._fullscreenEl=t,this._fullActionFrom="get";var i=qd.getFullScreenEl();if(i!==this._fullscreenEl)try{for(var r=0;r<Zp.length;r++){var o=Zp[r];if(t[o]){var s="webkitRequestFullscreen"===o?t.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):t[o]();return s&&s.then?s:Promise.resolve()}}return n.fullscreenEnabled||n.webkitSupportsFullscreen?(n.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(t){return Promise.reject(new Error("call getFullscreen fail"))}else this.onFullscreenChange()}},{key:"exitFullscreen",value:function(t){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),this._fullscreenEl||qd.getFullScreenEl()){this.root;var e=this.video;this._fullActionFrom="exit";try{for(var n=0;n<Jp.length;n++){var i=Jp[n];if(document[i]){var r=document[i]();return r&&r.then?r:Promise.resolve()}}return e&&e.webkitSupportsFullscreen?(e.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(t){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var e=t?"".concat(Mg.INNER_FULLSCREEN," ").concat(Mg.CSS_FULLSCREEN):Mg.CSS_FULLSCREEN;this.changeFullStyle(this.root,t,e);var n=this.config.fullscreen,i=void 0===n?{}:n,r=!0===i.useCssFullscreen||"function"==typeof i.useCssFullscreen&&i.useCssFullscreen();r&&(this.fullscreen=!0,this.emit(Lp,!0)),this._cssfullscreenEl=t,this.cssfullscreen=!0,this.emit(Ap,!0)}},{key:"exitCssFullscreen",value:function(){var t=this._cssfullscreenEl?"".concat(Mg.INNER_FULLSCREEN," ").concat(Mg.CSS_FULLSCREEN):Mg.CSS_FULLSCREEN;if(this.fullscreen){var e=this.config.fullscreen,n=void 0===e?{}:e;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(this.recoverFullStyle(this.root,this._cssfullscreenEl,t),this.fullscreen=!1,this.emit(Lp,!1)):this.removeClass(t)}else this.recoverFullStyle(this.root,this._cssfullscreenEl,t);this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(Ap,!1)}},{key:"getRotateFullscreen",value:function(t){this.cssfullscreen&&this.exitCssFullscreen(t);var e=t?"".concat(Mg.INNER_FULLSCREEN," ").concat(Mg.ROTATE_FULLSCREEN):Mg.ROTATE_FULLSCREEN;this._fullscreenEl=t||this.root,this.changeFullStyle(this.root,t,e,Mg.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this.emit(Lp,!0)}},{key:"exitRotateFullscreen",value:function(t){var e=this._fullscreenEl!==this.root?"".concat(Mg.INNER_FULLSCREEN," ").concat(Mg.ROTATE_FULLSCREEN):Mg.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,e,Mg.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(Lp,!1)}},{key:"setRotateDeg",value:function(t){90===window.orientation||-90===window.orientation?this.rotateDeg=0:this.rotateDeg=t}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{autoHide:!this.config.closePlayerBlur,delay:this.config.inactive};this.isActive?this.onFocus(t):this.emit(xp,zg({paused:this.paused,ended:this.ended},t))}},{key:"blur",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ignorePaused:!1};this.isActive?this.emit(Cp,zg({paused:this.paused,ended:this.ended},t)):this.onBlur(t)}},{key:"onFocus",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.autoHide,i=void 0===n?!this.config.closePlayerBlur:n,r=e.delay,o=void 0===r?this.config.inactive:r;this.isActive=!0,this.removeClass(Mg.INACTIVE),this.userTimer&&qd.clearTimeout(this,this.userTimer),i&&(this.userTimer=qd.setTimeout(this,(function(){t.blur()}),o))}},{key:"onBlur",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.ignorePaused,n=void 0!==e&&e;if(this.isActive){var i=this.config.closePauseVideoFocus;this.isActive=!1,(n||i||!this.paused&&!this.ended)&&this.addClass(Mg.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.state>=6&&this.removeClass(Mg.ENTER),this.removeClass(Mg.LOADING),this.isCanplay=!0,this.waitTimer&&qd.clearTimeout(this,this.waitTimer)}},{key:"onPlay",value:function(){7===this.state&&this.setState(6),this.removeClass(Mg.PAUSED),this.ended&&this.removeClass(Mg.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(Mg.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&qd.clearTimeout(this,this.userTimer),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(Mg.ENDED),this.setState(7)}},{key:"onError",value:function(){this.setState(0),this.updateAcc("error"),this.removeClass(Mg.NOT_ALLOW_AUTOPLAY),this.removeClass(Mg.NO_START),this.removeClass(Mg.ENTER),this.removeClass(Mg.LOADING),this.addClass(Mg.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(Mg.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&qd.clearTimeout(this,this.waitTimer),this.removeClass(Mg.LOADING),this.removeClass(Mg.SEEKING)}},{key:"onWaiting",value:function(){var t=this;this.waitTimer&&qd.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=qd.setTimeout(this,(function(){t.addClass(Mg.LOADING),qd.clearTimeout(t,t.waitTimer),t.waitTimer=null}),200)}},{key:"onPlaying",value:function(){var t=this;[Mg.NO_START,Mg.PAUSED,Mg.ENDED,Mg.ERROR,Mg.REPLAY,Mg.LOADING].forEach((function(e){t.removeClass(e)}))}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.resize(),(this.waitTimer||this.hasClass(Mg.LOADING))&&this.video.readyState>2&&(this.removeClass(Mg.LOADING),qd.clearTimeout(this,this.waitTimer),this.waitTimer=null),this._accPlayed.t||this.paused||this.ended||(this._accPlayed.t=(new Date).getTime())}},{key:"onVolumechange",value:function(){"Number"===qd.typeOf(this.config.volume)&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(t,e,n){if(this.video&&e&&t){var i="String"===qd.typeOf(t)?t:t.type||"";n.props&&"Array"!==qd.typeOf(n.props)&&(n.props=[n.props]),this.emit(Vp,zg({eventType:i,action:e,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:t},n))}}},{key:"updateAcc",value:function(t){if(this._accPlayed.t){var e=(new Date).getTime()-this._accPlayed.t;this._accPlayed.acc+=e,this._accPlayed.t=0,("ended"===t||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(t){var e=this.video.buffered;if(!e||0===e.length||!this.duration)return!0;for(var n=t||this.video.currentTime||.2,i=e.length,r=0;r<i;r++)if(e.start(r)<=n&&e.end(r)>n)return!0;return!1}},{key:"position",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{h:0,y:0,x:0,w:0};if(this.video&&t&&t.h){var e=1/t.h,n=1!==e?"scale(".concat(e,")"):"",i=0,r=0;t.y&&(r=(100-100*t.h)/2-100*t.y),t.w&&t.x&&(i=(100-100*t.w)/2-100*t.x),n+=" translate(".concat(i,"%, ").concat(r,"%)"),this.video.style.transform=n,this.video.style.webkitTransform=n}}},{key:"setConfig",value:function(t){var e=this;t&&Object.keys(t).forEach((function(n){e.config[n]=t[n];var i=e.plugins[n.toLowerCase()];i&&"Function"===qd.typeOf(i.setConfig)&&i.setConfig(t[n])}))}},{key:"playNext",value:function(t){this.resetState(),this.setConfig(t),this.play(),this.emit(Up,t)}},{key:"resize",value:function(){var t=this;if(this.video){var e=this.video,n=e.videoWidth,i=e.videoHeight,r=this.config,o=r.fitVideoSize,s=r.videoFillMode;if("fill"!==s&&"cover"!==s||this.setAttribute("data-xgfill",s),i&&n){this._videoHeight=i,this._videoWidth=n;var a=this.root.getBoundingClientRect(),c=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,l=a.width,u=a.height-c,h=parseInt(n/i*1e3,10),f=parseInt(l/u*1e3,10),d=l,p=u,v={};"auto"===o&&f>h||"fixWidth"===o?(p=l/h*1e3,this.config.fluid?v.paddingTop="".concat(100*p/d,"%"):v.height="".concat(p+c,"px")):("auto"===o&&f<h||"fixHeight"===o)&&(d=h*u/1e3,v.width="".concat(d,"px")),this.fullscreen||this.cssfullscreen||Object.keys(v).forEach((function(e){t.root.style[e]=v[e]})),("fillHeight"===s&&f<h||"fillWidth"===s&&f>h)&&this.setAttribute("data-xgfill","cover");var g={videoScale:h,vWidth:d,vHeight:p,cWidth:d,cHeight:p+c};this.emit(Np,g)}}}},{key:"updateObjectPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.video.updateObjectPosition?this.video.updateObjectPosition(t,e):this.video.style.objectPosition="".concat(100*t,"% ").concat(100*e,"%")}},{key:"setState",value:function(t){Kd.logInfo("setState","state from:".concat(Ng[this.state]," to:").concat(Ng[t])),this._state=t}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(t){"boolean"==typeof t&&(this._hasStart=t,!1===t&&(this._state=2),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return 6===this._state||7===this._state}},{key:"definitionList",get:function(){return this.config.definition.list||[]},set:function(t){var e=this,n=this.config.definition;n.list=t,this.emit("resourceReady",t);var i=null,r=null;t.forEach((function(t){e.curDefinition===t.definition&&(i=t),n.defaultDefinition===t.definition&&(r=t)})),!r&&t.length>0&&(r=t[0]),i?this.changeDefinition(i):r&&this.changeDefinition(r)}},{key:"lang",get:function(){return this.config.lang},set:function(t){0!==Yg.langKeys.filter((function(e){return e===t})).length||"zh"===t?(this.config.lang=t,Dg.setLang(t,this)):console.error("Sorry, set lang fail, because the language [".concat(t,"] is not supported now, list of all supported languages is [").concat(Yg.langKeys.join(),"] "))}},{key:"i18n",get:function(){var t=this.config.lang;return Yg.lang[t]||Yg.lang.en}},{key:"i18nKeys",get:function(){return Yg.textKeys||{}}},{key:"version",get:function(){return ep}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(t){this.__url=t}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(t){this.plugins.poster&&this.plugins.poster.update(t)}},{key:"readyState",get:function(){var t=wo(gi(n.prototype),"readyState",this);return this.i18n[t]||t}},{key:"error",get:function(){var t=wo(gi(n.prototype),"error",this);return this.i18n[t]||t}},{key:"networkState",get:function(){var t=wo(gi(n.prototype),"networkState",this);return this.i18n[t]||t}},{key:"fullscreenChanging",get:function(){return!(null===this._fullScreenOffset)}},{key:"cumulateTime",get:function(){var t=this._accPlayed;return this.updateAcc("get"),t.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(t){this.config.zoom=t}},{key:"hook",value:function(t,e){return tv.call.apply(tv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(t,e){return ev.call.apply(ev,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(t,e,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),o=3;o<i;o++)r[o-3]=arguments[o];return nv.call.apply(nv,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(t,e){"boolean"==typeof e&&e!==this.muted&&(this.addInnerOP("volumechange"),this.muted=e),Dg.setCurrentUserActive(this.playerId,t)}}],[{key:"debugger",get:function(){return Kd.config.debug},set:function(t){Kd.config.debug=t}},{key:"getCurrentUserActivePlayerId",value:function(){return Dg.getCurrentUseActiveId()}},{key:"setCurrentUserActive",value:function(t,e){Dg.setCurrentUserActive(t,e)}},{key:"install",value:function(t,e){n.plugins||(n.plugins={}),n.plugins[t]||(n.plugins[t]=e)}},{key:"use",value:function(t,e){n.plugins||(n.plugins={}),n.plugins[t]=e}}]),n}(Xp);function $g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Zg(){return(new Date).getTime()}yi(qg,"defaultPreset",null),yi(qg,"XgVideoProxy",null);var Jg=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(t=e.call.apply(e,[this].concat(r))),"_onTimeupdate",(function(){Kd.logInfo("[xgLogger]Events._onTimeupdate"),t._state.isTimeUpdate=!0,t._sendFirstFrame()})),yi(pi(t),"_onAutoplayStart",(function(){Kd.logInfo("[xgLogger]Events._onAutoplayStart"),t._state.autoplayStart=!0,t._sendFirstFrame()})),yi(pi(t),"_onReset",(function(){t.vt=0,t.pt=0,t.fvt=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t._isWaiting=!1,t._waitTimer&&qd.clearTimeout(pi(t),t._waitTimer),t._waittTimer&&qd.clearTimeout(pi(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0})),yi(pi(t),"_onSeeking",(function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=Zg(),t.emitLog("seekStart",{start:Zg()}))})),yi(pi(t),"_onSeeked",(function(){t.suspendSeekingStatus("seeked")})),yi(pi(t),"_onWaitingLoadStart",(function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=Zg(),t._waitType=1,t.emitLog("waitingStart",{start:t.waitingStart,type:1,endType:"loadstart"}))})),yi(pi(t),"_onWaiting",(function(){!t._isWaiting&&t.vt&&(t._isWaiting=!0,t._waitTimer=qd.setTimeout(pi(t),(function(){t._isWaiting&&(t.waitingStart=Zg(),qd.clearTimeout(pi(t),t._waitTimer),t._waitTimer=null,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t._startWaitTimeout(),t.emitLog("waitingStart",{start:t.waitingStart,type:t._waitType,endType:2===t._waitType?"seek":"playing"}))}),200))})),yi(pi(t),"_onError",(function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")})),yi(pi(t),"_onPlaying",(function(){t._isWaiting&&t.suspendWaitingStatus("playing")})),t}return bo(n,[{key:"afterCreate",value:function(){var t=this;this._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1},this._onReset(),this._waitType="firstFrame",this.on(bp,(function(){var e=t._state.autoplayStart;t._state.isTimeUpdate=!1,t._state.isFFLoading=!0,Kd.logInfo("[xgLogger]Events.LOAD_START",e),t.pt=Zg(),t.vt=0,t.fvt=0,t.off(Ep,t._onAutoplayStart),t.off(fp,t._onTimeupdate),t._onWaitingLoadStart(),e?t.once(fp,t._onTimeupdate):t.once(Ep,t._onAutoplayStart)})),this.on(yp,(function(){t.vt=Zg(),t.fvt=t.vt-t.pt,Kd.logInfo("[xgLogger]Events.LOADED_DATA",t.fvt,t._state.isTimeUpdate),t._state.isTimeUpdate&&t._sendFirstFrame(),t.suspendWaitingStatus("loadeddata")})),this.on(up,this._onSeeking),this.on(hp,this._onSeeked),this.on(Rp,(function(){t.endState("destroy")})),this.on(Op,(function(){t.endState("urlChange"),t._onReset()})),this.on([sp,pp],this._onPlaying),this.on(dp,this._onWaiting),this.on(lp,this._onError),this.on(wp,(function(){t.endState("emptied"),t._onReset()}))}},{key:"_sendFirstFrame",value:function(){this.s=Zg(),this.vt>0&&this._state.isFFLoading&&(Kd.logInfo("[xgLogger]Events._sendFirstFrame",this.vt),this._state.isFFLoading=!1,this.emitLog("firstFrame",{fvt:this.fvt,costTime:this.fvt,vt:this.vt}))}},{key:"_startWaitTimeout",value:function(){var t=this;this._waittTimer&&qd.clearTimeout(this,this._waittTimer),this._waittTimer=qd.setTimeout(this,(function(){t.suspendWaitingStatus("timeout"),qd.clearTimeout(t,t._waittTimer),t._waittTimer=null}),3e4)}},{key:"endState",value:function(t){this.suspendWaitingStatus(t),this.suspendSeekingStatus(t)}},{key:"suspendSeekingStatus",value:function(t){if(this.seekingStart){var e=Zg(),n=e-this.seekingStart;this.seekingStart=0,this.emitLog("seekEnd",{end:e,costTime:n,endType:t})}}},{key:"suspendWaitingStatus",value:function(t){if(this._waitTimer&&(qd.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(qd.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,this.waitingStart){var e=Zg()-this.waitingStart;this._isWaiting=!1,this.waitingStart=0,this.emitLog("waitingEnd",{costTime:e,type:this._waitType,endType:2===this._waitType?"seek":t})}}},{key:"emitLog",value:function(t,e){var n=this.player;this.emit("xglog",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$g(Object(n),!0).forEach((function(e){yi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({t:Zg(),host:qd.getHostFromUrl(n.currentSrc),vtype:n.vtype,eventType:t,currentTime:this.player.currentTime,readyState:n.video.readyState,networkState:n.video.networkState},e))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{}}}]),n}(wv);function Qg(){return(new DOMParser).parseFromString('<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">\n  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var ty=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"registerIcons",value:function(){return{replay:Qg}}},{key:"afterCreate",value:function(){var t=this;wv.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",(function(){t.player.replay()}),{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(ap,(function(){if(t.playerConfig.loop||qd.addClass(t.player.root,"replay"),!t.config.disable){t.show();var e=t.root.querySelector("path");if(e){var n=window.getComputedStyle(e).getPropertyValue("transform");if("string"==typeof n&&n.indexOf("none")>-1)return null;e.setAttribute("transform",n)}}})),this.on(op,(function(){t.hide()}))}},{key:"handleReplay",value:function(t){t.preventDefault(),t.stopPropagation(),this.player.replay(),qd.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return'<xg-replay class="xgplayer-replay">\n      <xg-replay-txt class="xgplayer-replay-txt" lang-key="'.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,"</xg-replay-txt>\n    </xg-replay>")}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(wv),ey=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(t){this.config.isEndedShow=t}},{key:"hide",value:function(){qd.addClass(this.root,"hide")}},{key:"show",value:function(){qd.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(t){"string"==typeof t.player.config.poster&&(t.config.poster=t.player.config.poster)}},{key:"afterCreate",value:function(){var t=this;this.on(ap,(function(){t.isEndedShow&&qd.removeClass(t.root,"hide")})),this.config.hideCanplay?(this.once(fp,(function(){t.onTimeUpdate()})),this.on(Op,(function(){qd.removeClass(t.root,"hide"),qd.addClass(t.root,"xg-showplay"),t.once(fp,(function(){t.onTimeUpdate()}))}))):this.on(op,(function(){qd.addClass(t.root,"hide")}))}},{key:"onTimeUpdate",value:function(){var t=this;this.player.currentTime?qd.removeClass(this.root,"xg-showplay"):this.once(fp,(function(){t.onTimeUpdate()}))}},{key:"update",value:function(t){t&&(this.config.poster=t,this.root.style.backgroundImage="url(".concat(t,")"))}},{key:"render",value:function(){var t=this.config,e=t.poster,n=t.hideCanplay,i=e?"background-image:url(".concat(e,");"):"";return'<xg-poster class="xgplayer-poster '.concat(n?"xg-showplay":"",'" style="').concat(i,'">\n    </xg-poster>')}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),n}(wv);function ny(){return(new DOMParser).parseFromString('<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>\n</svg>\n',"image/svg+xml").firstChild}function iy(){return(new DOMParser).parseFromString('<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>\n</svg>\n',"image/svg+xml").firstChild}var ry={},oy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).autoPlayStart=!1,i}return bo(n,[{key:"afterCreate",value:function(){var t=this,e=this.player,n=this.playerConfig;this.initIcons(),this.once(Tp,(function(){n&&(n.lang&&"en"===n.lang?qd.addClass(e.root,"lang-is-en"):"jp"===n.lang&&qd.addClass(e.root,"lang-is-jp"))})),this.on(Ep,(function(){var e="auto"===t.config.mode?"auto-hide":"hide";qd.addClass(t.root,e),t.autoPlayStart=!0,t.onPlayPause("play")})),n.autoplay||this.show(),this.on(Sp,(function(){var e="auto"===t.config.mode?"auto-hide":"hide";t.setAttr("data-state","play"),qd.removeClass(t.root,e),t.show()})),this.on(op,(function(){t.onPlayPause("play")})),this.on(cp,(function(){t.onPlayPause("pause")})),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(e){e.cancelable&&e.preventDefault(),e.stopPropagation();var n=t.player.paused;t.emitUserAction(e,"switch_play_pause",{props:"paused",from:n,to:!n})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"preventDefault",value:function(t){}},{key:"registerIcons",value:function(){return{startPlay:{icon:ny,class:"xg-icon-play"},startPause:{icon:iy,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild("xg-start-inner",t.startPlay),this.appendChild("xg-start-inner",t.startPause)}},{key:"hide",value:function(){qd.addClass(this.root,"hide")}},{key:"show",value:function(){qd.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){qd.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){qd.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(t){t?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(t){var e=this;!function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{start:null,end:null};ry[t]&&window.clearTimeout(ry[t].id),ry[t]={},n.start&&n.start(),ry[t].id=window.setTimeout((function(){n.end&&n.end(),window.clearTimeout(ry[t].id),delete ry[t]}),e)}("pauseplay",400,{start:function(){qd.addClass(e.root,"interact"),e.show(),e.switchStatus(!0)},end:function(){qd.removeClass(e.root,"interact"),!t&&e.hide()}})}},{key:"switchPausePlay",value:function(t){var e=this.player;t.cancelable&&t.preventDefault(),t.stopPropagation(),e.state<2||(this.player.paused||6!==e.state?e.play():e.pause())}},{key:"onPlayPause",value:function(t){var e=this.config,n=this.player;if(!(n.state<6)&&this.autoPlayStart){if("show"===e.mode)return this.switchStatus(),void this.show();if("auto"!==e.mode){if(e.isShowPause&&n.paused&&!n.ended||e.isShowEnd&&n.ended)return this.switchStatus(),void this.show();if(e.disableAnimate)return this.switchStatus(),void this.hide();if("play"===t)this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||n.ended)return;this.animate()}}else this.switchStatus()}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Object.keys(ry).map((function(t){window.clearTimeout(ry[t].id),delete ry[t]}))}},{key:"render",value:function(){var t=this.playerConfig.autoplay?"auto"===this.config.mode?"auto-hide":"hide":"";return'\n    <xg-start class="xgplayer-start '.concat(t,'">\n    <xg-start-inner></xg-start-inner>\n    </xg-start>')}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(wv),sy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"render",value:function(){var t=this.config.innerHtml,e=qd.createDom("xg-enter","",{},"xgplayer-enter");if(t&&t instanceof window.HTMLElement)e.appendChild(t);else if(t&&"string"==typeof t)e.innerHTML=t;else{for(var n="",i=1;i<=12;i++)n+='<div class="xgplayer-enter-bar'.concat(i,'"></div>');e.innerHTML='<div class="xgplayer-enter-spinner">'.concat(n,"</div>")}return e}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(wv),ay=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var t="MINISCREEN";return'\n      <xg-icon class="xgplayer-miniicon">\n      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</span></div>\n      </xg-icon>")}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:10}}}]),n}(wv);function cy(t){var e=parseFloat(t);return-1===t.indexOf("%")&&!isNaN(e)&&e}var ly=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],uy=ly.length;function hy(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"===di(t)&&t.nodeType){var e=function(t){return window.getComputedStyle(t)}(t);if("none"===e.display)return function(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<uy;e++)t[ly[e]]=0;return t}();var n={};n.width=t.offsetWidth,n.height=t.offsetHeight;for(var i=n.isBorderBox="border-box"===e.boxSizing,r=0;r<uy;r++){var o=ly[r],s=e[o],a=parseFloat(s);n[o]=isNaN(a)?0:a}var c=n.paddingLeft+n.paddingRight,l=n.paddingTop+n.paddingBottom,u=n.marginLeft+n.marginRight,h=n.marginTop+n.marginBottom,f=n.borderLeftWidth+n.borderRightWidth,d=n.borderTopWidth+n.borderBottomWidth,p=i,v=cy(e.width);!1!==v&&(n.width=v+(p?0:c+f));var g=cy(e.height);return!1!==g&&(n.height=g+(p?0:l+d)),n.innerWidth=n.width-(c+f),n.innerHeight=n.height-(l+d),n.outerWidth=n.width+u,n.outerHeight=n.height+h,n}}function fy(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i.identifier===e)return i}}var dy={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},py=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ui(this,n),(i=e.call(this)).isEnabled=!0,i.isDragging=!1,i.isDown=!1,i.position={},i.downPoint={},i.dragPoint={x:0,y:0},i.startPos={x:0,y:0},i._root=t instanceof Element?t:document.querySelector(t),i._handlerDom=r.handle instanceof Element?r.handle:document.querySelector(r.handle),i._root&&i._handlerDom?(i._bindStartEvent(),i):vi(i)}return bo(n,[{key:"_bindStartEvent",value:function(){var t=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),dy[this._startKey].map((function(e){t["on".concat(e)]=t["on".concat(e)].bind(t)}))}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(t){var e=this;if(t){var n=dy[this._startKey];n.map((function(t){window.addEventListener(t,e["on".concat(t)])})),this._boundPointerEvents=n}}},{key:"_unbindPostStartEvents",value:function(){var t=this;this._boundPointerEvents&&(this._boundPointerEvents.map((function(e){window.removeEventListener(e,t["on".concat(e)])})),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(t){this.onUp()}},{key:"animate",value:function(){var t=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame((function(){t.animate()})))}},{key:"positionDrag",value:function(){var t="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=t,this._root.style.webKitTransform=t}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(t){this.dragStart(t,t)}},{key:"onmousemove",value:function(t){this.dragMove(t,t)}},{key:"onmouseup",value:function(t){this.dragEnd(t,t)}},{key:"ontouchstart",value:function(t){var e=t.changedTouches[0];this.dragStart(t,e),this.touchIdentifier=void 0!==e.pointerId?e.pointerId:e.identifier,t.preventDefault()}},{key:"ontouchmove",value:function(t){var e=fy(t.changedTouches,this.touchIdentifier);e&&this.dragMove(t,e)}},{key:"ontouchend",value:function(t){var e=fy(t.changedTouches,this.touchIdentifier);e&&this.dragEnd(t,e),t.preventDefault()}},{key:"ontouchcancel",value:function(t){var e=fy(t.changedTouches,this.touchIdentifier);e&&this.dragCancel(t,e)}},{key:"dragStart",value:function(t,e){if(this._root&&!this.isDown&&this.isEnabled){this.downPoint=e,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var n=hy(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-n.height,this.startPos.maxX=window.innerWidth-n.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(t)}}},{key:"dragRealStart",value:function(t,e){this.isDragging=!0,this.animate(),this.emit("dragStart",this.startPos)}},{key:"dragEnd",value:function(t,e){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit("dragEnded")),this.presetInfo())}},{key:"_dragPointerMove",value:function(t,e){var n={x:e.pageX-this.downPoint.pageX,y:e.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(n)&&this.dragRealStart(t,e),n}},{key:"dragMove",value:function(t,e){if(t=t||window.event,this.isDown){var n=this.startPos,i=n.x,r=n.y,o=this._dragPointerMove(t,e),s=o.x,a=o.y;s=this.checkContain("x",s,i),a=this.checkContain("y",a,r),this.position.x=i+s,this.position.y=r+a,this.dragPoint.x=s,this.dragPoint.y=a,this.emit("dragMove",this.position)}}},{key:"dragCancel",value:function(t,e){this.dragEnd(t,e)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(t){return Math.abs(t.x)>3||Math.abs(t.y)>3}},{key:"checkContain",value:function(t,e,n){return e+n<0?0-n:"x"===t&&e+n>this.startPos.maxX?this.startPos.maxX-n:"y"===t&&e+n>this.startPos.maxY?this.startPos.maxY-n:e}},{key:"_getPosition",value:function(){var t=window.getComputedStyle(this._root),e=this._getPositionCoord(t.left,"width"),n=this._getPositionCoord(t.top,"height");this.position.x=isNaN(e)?0:e,this.position.y=isNaN(n)?0:n,this._addTransformPosition(t)}},{key:"_addTransformPosition",value:function(t){var e=t.transform;if(0===e.indexOf("matrix")){var n=e.split(","),i=0===e.indexOf("matrix3d")?12:4,r=parseInt(n[i],10),o=parseInt(n[i+1],10);this.position.x+=r,this.position.y+=o}}},{key:"_getPositionCoord",value:function(t,e){if(-1!==t.indexOf("%")){var n=hy(this._root.parentNode);return n?parseFloat(t)/100*n[e]:0}return parseInt(t,10)}}]),n}(qh),vy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;ui(this,n),yi(pi(i=e.call(this,t)),"onCancelClick",(function(t){i.exitMini(),i.isClose=!0})),yi(pi(i),"onCenterClick",(function(t){var e=pi(i).player;e.paused?e.play():e.pause()})),yi(pi(i),"onScroll",(function(t){if(!(!window.scrollY&&0!==window.scrollY||Math.abs(window.scrollY-i.pos.scrollY)<50)){var e=parseInt(qd.getCss(i.player.root,"height"));e+=i.config.scrollTop,i.pos.scrollY=window.scrollY,window.scrollY>e+5?!i.isMini&&!i.isClose&&i.getMini():window.scrollY<=e&&(i.isMini&&i.exitMini(),i.isClose=!1)}})),i.isMini=!1,i.isClose=!1;var r=pi(i).config;return i.pos={left:r.left<0?window.innerWidth-r.width-20:r.left,top:r.top<0?window.innerHeight-r.height-20:r.top,height:i.config.height,width:i.config.width,scrollY:window.scrollY||0},i.lastStyle=null,i}return bo(n,[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.mini&&(t.config.isShowIcon=t.player.config.mini)}},{key:"afterCreate",value:function(){var t=this;this.initIcons(),this.on(cp,(function(){t.setAttr("data-state","pause")})),this.on(op,(function(){t.setAttr("data-state","play")}))}},{key:"onPluginsReady",value:function(){var t=this,e=this.player;if(!this.config.disable){if(this.config.isShowIcon){var n={config:{onClick:function(){t.getMini()}}};e.controls.registerPlugin(ay,n,ay.pluginName)}var i=qd.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",i,this.onCancelClick),this.bind(".play-icon",i,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new py(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:ny,class:"xg-icon-play"},pause:{icon:iy,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".play-icon",t.play),this.appendChild(".play-icon",t.pause)}},{key:"getMini",value:function(){var t=this;if(!this.isMini){var e=this.player,n=this.playerConfig,i=this.config.target||this.player.root;this.lastStyle={},qd.addClass(e.root,"xgplayer-mini"),["width","height","top","left"].map((function(e){t.lastStyle[e]=i.style[e],i.style[e]="".concat(t.pos[e],"px")})),n.fluid&&(i.style["padding-top"]=""),this.emit(Ip,!0),e.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var t=this;if(!this.isMini)return!1;var e=this.player,n=this.playerConfig,i=this.config.target||this.player.root;qd.removeClass(e.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map((function(e){i.style[e]=t.lastStyle[e]})),this.lastStyle=null,n.fluid&&(e.root.style.width="100%",e.root.style.height="0",e.root.style["padding-top"]="".concat(100*n.height/n.width,"%")),this.emit(Ip,!1),this.isMini=e.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var t=qd.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",t,this.onCancelClick),this.unbind(".play-icon",t,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return'\n      <xg-mini-layer class="xg-mini-layer">\n      <xg-mini-header class="xgplayer-mini-header">\n      <div lang-key="'.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,'</div>\n      </xg-mini-header>\n      <div class="mini-cancel-btn">\n        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>\n        </svg>\n      </div>\n      <div class="play-icon">\n      </div>\n      </xg-mini-layer>')}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(wv),gy={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},yy=["videoClick","videoDbClick"],my=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(t=e.call.apply(e,[this].concat(r))),"onMouseMove",(function(e){var n=pi(t),i=n.player,r=n.playerConfig;i.isActive||(i.focus({autoHide:!r.closeDelayBlur}),!r.closeFocusVideoFocus&&i.video.focus())})),yi(pi(t),"onMouseEnter",(function(e){var n=pi(t),i=n.playerConfig,r=n.player;r.focus({autoHide:!i.closeDelayBlur}),!i.closeFocusVideoFocus&&r.video.focus()})),yi(pi(t),"onMouseLeave",(function(e){var n=t.playerConfig,i=n.closePlayerBlur,r=n.leavePlayerTime;i||(r?t.player.focus({autoHide:!0,delay:r}):t.player.blur())})),yi(pi(t),"onVideoClick",(function(e){var n=pi(t),i=n.player,r=n.playerConfig;e.target&&r.closeVideoClick||e.target!==i.video&&e.target!==i.innerContainer&&e.target!==i.video.__canvas||(e.preventDefault(),r.closeVideoStopPropagation||e.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout((function(){t._clickCount&&(t._clickCount--,ov(pi(t),yy[0],(function(e,n){t.switchPlayPause(n.e)}),{e:e,paused:i.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)}),300))})),yi(pi(t),"onVideoDblClick",(function(e){var n=pi(t),i=n.player,r=n.playerConfig;!e.target||e.target!==i.video&&e.target!==i.video.__canvas||r.closeVideoDblclick||(t._clickCount<2?t._clickCount=0:(t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),e.preventDefault(),e.stopPropagation(),ov(pi(t),yy[1],(function(e,n){t.emitUserAction(n.e,"switch_fullscreen",{props:"fullscreen",from:i.fullscreen,to:!i.fullscreen}),i.fullscreen?i.exitFullscreen():i.getFullscreen()}),{e:e,fullscreen:i.fullscreen})))})),t}return bo(n,[{key:"afterCreate",value:function(){var t=this;this._clickCount=0,yy.map((function(e){t.__hooks[e]=null}));var e=this.playerConfig,n=e.enableContextmenu;e.isMobileSimulateMode||"mobile"===tp.device&&!tp.os.isIpad||(this.config.disableContextmenu=!n,this.initEvents())}},{key:"initEvents",value:function(){var t=this,e=this.player,n=e.video,i=e.root;n.addEventListener("click",this.onVideoClick,!1),n.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(gy).map((function(e){i.addEventListener(e,t[gy[e]],!1)})),this.config.disableContextmenu&&n.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(t){var e=this.player;this.emitUserAction(t,"switch_play_pause",{props:"paused",from:e.paused,to:!e.paused}),e.ended?e.duration!==1/0&&e.duration>0&&e.replay():e.paused?e.play():e.pause()}},{key:"onContextmenu",value:function(t){(t=t||window.event).preventDefault&&t.preventDefault(),t.stopPropagation?t.stopPropagation():(t.returnValue=!1,t.cancelBubble=!0)}},{key:"destroy",value:function(){var t=this,e=this.player,n=e.video,i=e.root;this.clickTimer&&clearTimeout(this.clickTimer),i.removeEventListener("click",this.onVideoClick,!1),n.removeEventListener("dblclick",this.onVideoDblClick,!1),n.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(gy).map((function(e){i.removeEventListener(e,t[gy[e]],!1)}))}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{disableContextmenu:!0}}}]),n}(lv),ky=p,by=Ae,wy=wi,xy=k,Cy=_n,Ty=Ae,_y=function(t){var e=wy(xy(this)),n="",i=by(t);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(e+=e))1&i&&(n+=e);return n},Ey=o,Sy=1..toFixed,Py=Math.floor,Ry=function(t,e,n){return 0===e?n:e%2==1?Ry(t,e-1,n*t):Ry(t*t,e/2,n)},Oy=function(t,e,n){for(var i=-1,r=n;++i<6;)r+=e*t[i],t[i]=r%1e7,r=Py(r/1e7)},Ly=function(t,e){for(var n=6,i=0;--n>=0;)i+=t[n],t[n]=Py(i/e),i=i%e*1e7},Ay=function(t){for(var e=6,n="";--e>=0;)if(""!==n||0===e||0!==t[e]){var i=String(t[e]);n=""===n?i:n+_y.call("0",7-i.length)+i}return n};Cy({target:"Number",proto:!0,forced:Sy&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!Ey((function(){Sy.call({})}))},{toFixed:function(t){var e,n,i,r,o=function(t){if("number"!=typeof t&&"Number"!=ky(t))throw TypeError("Incorrect invocation");return+t}(this),s=Ty(t),a=[0,0,0,0,0,0],c="",l="0";if(s<0||s>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(c="-",o=-o),o>1e-21)if(n=(e=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e}(o*Ry(2,69,1))-69)<0?o*Ry(2,-e,1):o/Ry(2,e,1),n*=4503599627370496,(e=52-e)>0){for(Oy(a,0,n),i=s;i>=7;)Oy(a,1e7,0),i-=7;for(Oy(a,Ry(10,i,1),0),i=e-1;i>=23;)Ly(a,1<<23),i-=23;Ly(a,1<<i),Oy(a,1,1),Ly(a,2),l=Ay(a)}else Oy(a,0,n),Oy(a,1<<-e,0),l=Ay(a)+_y.call("0",s);return s>0?c+((r=l.length)<=s?"0."+_y.call("0",s-r)+l:l.slice(0,r-s)+"."+l.slice(r-s)):c+l}});var Iy="pressend",Dy={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},My={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Ny(t){return t&&t.length>0?t[t.length-1]:null}function Fy(t){var e=navigator.userAgent;/(?:iPhone|iPad)/.test(e)&&t.cancelable&&t.preventDefault()}var By=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{eventType:"touch"};ui(this,t),this._pos={moving:!1,start:!1,x:0,y:0},this.config={pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0},Object.keys(i).map((function(t){n.config[t]=i[t]})),this.root=e,this.events="mouse"===i.eventType?My:Dy,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return bo(t,[{key:"_initEvent",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(t){var e=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout((function(){e.trigger("press",t),e._pos.press=!0,e.__clearPress()}),n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(t){var e=this,n=this.config;if(this.dbIntrvalId)return this.__clearDb(),void this.trigger("doubleclick",t);this.dbIntrvalId=setTimeout((function(){e.__clearDb(),e._pos.start||e._pos.press||e._pos.moving||e.trigger("click",t)}),n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(t,e){this.__handlers[t]||(this.__handlers[t]=[]),this.__handlers[t].push(e)}},{key:"off",value:function(t,e){if(this.__handlers[t]){for(var n=this.__handlers[t],i=-1,r=0;r<n.length;r++)if(n[r]===e){i=r;break}i>=0&&this.__handlers[t].splice(i,1)}}},{key:"trigger",value:function(t,e){this.__handlers[t]&&this.__handlers[t].map((function(n){try{n(e)}catch(e){console.error("trigger>>:".concat(t),e)}}))}},{key:"onTouchStart",value:function(t){var e=this._pos,n=this.root;this.config.needPreventDefault&&Fy(t);var i=Ny(t.touches);e.x=i?parseInt(i.pageX,10):t.pageX,e.y=i?parseInt(i.pageX,10):t.pageX,e.start=!0,this.__setPress(t),n.addEventListener(this.events.end,this.onTouchEnd),n.addEventListener(this.events.cancel,this.onTouchCancel),n.addEventListener(this.events.move,this.onTouchMove),this.trigger("touchstart",t)}},{key:"onTouchCancel",value:function(t){this.onTouchEnd(t)}},{key:"onTouchEnd",value:function(t){var e=this._pos,n=this.root;this.config.needPreventDefault&&Fy(t),this.__clearPress(),n.removeEventListener(this.events.cancel,this.onTouchCancel),n.removeEventListener(this.events.end,this.onTouchEnd),n.removeEventListener(this.events.move,this.onTouchMove),t.moving=e.moving,t.press=e.press,e.press&&this.trigger(Iy,t),this.trigger("touchend",t),!e.press&&!e.moving&&this.__setDb(t),e.press=!1,e.start=!1,e.moving=!1}},{key:"onTouchMove",value:function(t){var e=this._pos,n=this.config,i=Ny(t.touches),r=i?parseInt(i.pageX,10):t.pageX,o=i?parseInt(i.pageY,10):t.pageX,s=r-e.x,a=o-e.y;Math.abs(a)<n.miniStep&&Math.abs(s)<n.miniStep||(this.__clearPress(),e.press&&this.trigger(Iy,t),e.press=!1,e.moving=!0,this.trigger("touchmove",t))}},{key:"destroy",value:function(){var t=this,e={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(e).map((function(n){t.root.removeEventListener("touchend",t[e[n]])}))}}]),t}();function jy(){return(new DOMParser).parseFromString('<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"\n  xmlns:xlink="http://www.w3.org/1999/xlink">\n  <path opacity="0.54"\n    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"\n    fill="white" />\n  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>\n</svg>',"image/svg+xml").firstChild}var Uy="auto",Hy="seeking",Vy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),yi(pi(i=e.call(this,t)),"onTouchStart",(function(t){var e=pi(i),n=e.player,r=e.config,o=e.pos,s=e.playerConfig,a=i.getTouche(t);if(a&&!r.disableGesture&&i.duration>0&&!n.ended){o.isStart=!0,qd.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),i.find(".xg-dur").innerHTML=qd.format(i.duration);var c=i.root.getBoundingClientRect();90===n.rotateDeg?(o.top=c.left,o.left=c.top,o.width=c.height,o.height=c.width):(o.top=c.top,o.left=c.left,o.width=c.width,o.height=c.height);var l=parseInt(a.pageX-o.left,10),u=parseInt(a.pageY-o.top,10);o.x=90===n.rotateDeg?u:l,o.y=90===n.rotateDeg?l:u,o.scopeL=r.scopeL*o.width,o.scopeR=(1-r.scopeR)*o.width,o.scopeM1=o.width*(1-r.scopeM)/2,o.scopeM2=o.width-o.scopeM1}})),yi(pi(i),"onTouchMove",(function(t){var e=i.getTouche(t),n=pi(i),r=n.pos,o=n.config,s=n.player;if(e&&!o.disableGesture&&i.duration&&r.isStart){var a=o.miniMoveStep,c=o.hideControlsActive,l=parseInt(e.pageX-r.left,10),u=parseInt(e.pageY-r.top,10),h=90===s.rotateDeg?u:l,f=90===s.rotateDeg?l:u;if(Math.abs(h-r.x)>a||Math.abs(f-r.y)>a){var d=h-r.x,p=f-r.y,v=r.scope;if(-1===v&&(0===(v=i.checkScope(h,f,d,p,r))&&(c?s.blur():s.focus({autoHide:!1}),!r.time&&(r.time=parseInt(1e3*s.currentTime,10)+1e3*i.timeOffset)),r.scope=v),-1===v||v>0&&!o.gestureY||0===v&&!o.gestureX)return;t.cancelable&&t.preventDefault(),i.executeMove(d,p,v,r.width,r.height),r.x=h,r.y=f}}})),yi(pi(i),"onTouchEnd",(function(t){var e=pi(i),n=e.player,r=e.pos,o=e.playerConfig;r.isStart&&(r.scope>-1&&t.cancelable&&t.preventDefault(),i.endLastMove(r.scope),setTimeout((function(){n.getPlugin("progress")&&n.getPlugin("progress").resetSeekState()}),10),r.scope=-1,i.resetPos(),qd.checkIsFunction(o.enableSwipeHandler)&&o.enableSwipeHandler(),i.changeAction(Uy))})),yi(pi(i),"onRootTouchMove",(function(t){!i.config.disableGesture&&i.config.gestureX&&i.checkIsRootTarget(t)&&(t.stopPropagation(),i.pos.isStart?i.onTouchMove(t):i.onTouchStart(t))})),yi(pi(i),"onRootTouchEnd",(function(t){i.pos.isStart&&i.checkIsRootTarget(t)&&(t.stopPropagation(),i.onTouchEnd(t))})),i.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},i.timer=null,i}return bo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:jy,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var t=this,e=this.playerConfig,n=this.config,i=this.player;!0===e.closeVideoDblclick&&(n.closedbClick=!0),this.resetPos(),qd.isUndefined(e.disableGesture)||(n.disableGesture=!!e.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=qd.createDom("xg-mask","",{},"xgmask"),i.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var r=this.domEventType;this.touch=new By(this.root,{eventType:r,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",(function(t){t.preventDefault()})),i.root.addEventListener("touchmove",this.onRootTouchMove,!0),i.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(vp,(function(){var e=t.player,n=t.config;1e3*e.duration<n.moveDuration&&(n.moveDuration=1e3*e.duration)})),this.on([pp,ap],(function(){var e=t.pos,n=e.time;!e.isStart&&n>0&&(t.pos.time=0)}));var o={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(o).map((function(e){t.touch.on(e,(function(n){t[o[e]](n)}))})),!n.disableActive){var s=i.plugins.progress;s&&(s.addCallBack("dragmove",(function(e){t.activeSeekNote(e.currentTime,e.forward)})),s.addCallBack("dragend",(function(){t.changeAction(Uy)})))}}},{key:"registerThumbnail",value:function(){var t=this.player.plugins.thumbnail;if(t&&t.usable){this.thumbnail=t.createThumbnail(null,"mobile-thumbnail");var e=this.find(".time-preview");e.insertBefore(this.thumbnail,e.children[0])}}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle,e=t.playedColor,n=t.progressColor;e&&(this.find(".xg-curbar").style.backgroundColor=e,this.find(".xg-cur").style.color=e),n&&(this.find(".xg-bar").style.backgroundColor=n,this.find(".time-preview").style.color=n),this.config.disableTimeProgress&&qd.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var t=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map((function(e){t.pos[e]=0}))):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(t){var e=this.player;this.root.setAttribute("data-xg-action",t);var n=e.plugins.start;n&&n.recover()}},{key:"getTouche",value:function(t){this.player.rotateDeg;var e=t.touches&&t.touches.length>0?t.touches[t.touches.length-1]:t;return{pageX:e.pageX,pageY:e.pageY}}},{key:"checkScope",value:function(t,e,n,i,r){var o=r.width,s=-1;if(t<0||t>o)return s;var a=0===i?Math.abs(n):Math.abs(n/i);return Math.abs(n)>0&&a>=1.73&&t>r.scopeM1&&t<r.scopeM2?s=0:(0===Math.abs(n)||a<=.57)&&(s=t<r.scopeL?1:t>r.scopeR?2:3),s}},{key:"executeMove",value:function(t,e,n,i,r){switch(n){case 0:this.updateTime(t/i*this.config.scopeM);break;case 1:this.updateBrightness(e/r);break;case 2:tp.os.isIos||this.updateVolume(e/r)}}},{key:"endLastMove",value:function(t){var e=this,n=this.pos,i=this.player,r=this.config,o=(n.time-this.timeOffset)/1e3;switch(t){case 0:i.seek(Number(o).toFixed(1)),r.hideControlsEnd?i.blur():i.focus(),this.timer=setTimeout((function(){e.pos.time=0}),500)}this.changeAction(Uy)}},{key:"checkIsRootTarget",value:function(t){var e=this.player.plugins||{};return(!e.progress||!e.progress.root.contains(t.target))&&(e.start&&e.start.root.contains(t.target)||e.controls&&e.controls.root.contains(t.target))}},{key:"sendUseAction",value:function(t){var e=this.player.paused;this.emitUserAction(t,"switch_play_pause",{prop:"paused",from:e,to:!e})}},{key:"onClick",value:function(t){var e=this.player,n=this.config,i=this.playerConfig;e.state<6?i.closeVideoClick||(this.sendUseAction(new Event("click")),e.play()):!n.closedbClick||i.closeVideoClick?e.isActive?e.blur():e.focus():i.closeVideoClick||((e.isActive||n.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),e.focus())}},{key:"onDbClick",value:function(t){var e=this.config,n=this.player;!e.closedbClick&&n.state>=6&&(this.sendUseAction(new Event("dblclick")),this.switchPlayPause())}},{key:"onPress",value:function(t){var e=this.pos,n=this.config,i=this.player;n.disablePress||(e.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:i.playbackRate,to:n.pressRate}),i.playbackRate=n.pressRate,this.changeAction("playbackrate"))}},{key:"onPressEnd",value:function(t){var e=this.pos,n=this.config,i=this.player;n.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:i.playbackRate,to:e.rate}),i.playbackRate=e.rate,e.rate=1,this.changeAction(Uy))}},{key:"updateTime",value:function(t){var e=this.player,n=this.config,i=this.player.duration;t=Number(t.toFixed(4));var r=parseInt(t*n.moveDuration,10)+this.timeOffset;r=(r+=this.pos.time)<0?0:r>1e3*i?1e3*i-200:r,e.getPlugin("time")&&e.getPlugin("time").updateTime(r/1e3),e.getPlugin("progress")&&e.getPlugin("progress").updatePercent(r/1e3/this.duration,!0),this.activeSeekNote(r/1e3,t>0),n.isTouchingSeek&&e.seek(Number((r-this.timeOffset)/1e3).toFixed(1)),this.pos.time=r}},{key:"updateVolume",value:function(t){this.player.rotateDeg&&(t=-t);var e=this.player,n=this.pos;if(t=parseInt(100*t,10),n.volume+=t,!(Math.abs(n.volume)<10)){var i=parseInt(10*e.volume,10)-parseInt(n.volume/10,10);i=i>10?10:i<1?0:i,e.volume=i/10,n.volume=0}}},{key:"updateBrightness",value:function(t){this.player.rotateDeg&&(t=-t);var e=this.pos,n=this.config,i=this.xgMask,r=e.light+.8*t;r=r>n.maxDarkness?n.maxDarkness:r<0?0:r,i&&(i.style.backgroundColor="rgba(0,0,0,".concat(r,")")),e.light=r}},{key:"activeSeekNote",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player,i=this.config,r=!(this.duration!==1/0&&this.duration>0);if(t&&"number"==typeof t&&!r&&!i.disableActive){t<0?t=0:t>n.duration&&(t=n.duration-.2),this.changeAction(Hy);var o=n.plugins.start;o&&o.focusHide(),this.find(".xg-dur").innerHTML=qd.format(this.duration),this.find(".xg-cur").innerHTML=qd.format(t),this.find(".xg-curbar").style.width="".concat(t/this.duration*100,"%"),e?qd.removeClass(this.find(".xg-seek-show"),"xg-back"):qd.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(t)}}},{key:"updateThumbnails",value:function(t){var e=this.player.plugins.thumbnail;e&&e.usable&&this.thumbnail&&e.update(this.thumbnail,t,160,90)}},{key:"switchPlayPause",value:function(){var t=this.player;if(t.state<4)return!1;t.ended||(t.paused?t.play():t.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var t=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,t.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,t.root.removeEventListener("touchmove",this.onRootTouchMove,!0),t.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var t="normal"!==this.config.gradient?"gradient ".concat(this.config.gradient):"gradient";return'\n     <xg-trigger class="trigger">\n     <div class="'.concat(t,'"></div>\n        <div class="time-preview">\n            <div class="xg-seek-show ').concat(this.config.disableSeekIcon?" hide-seek-icon":"",'">\n              <i class="xg-seek-icon"></i>\n              <span class="xg-cur">00:00</span>\n              <span>/</span>\n              <span class="xg-dur">00:00</span>\n            </div>\n              <div class="xg-bar xg-timebar">\n                <div class="xg-curbar"></div>\n              </div>\n        </div>\n        <div class="xg-playbackrate xg-top-note">\n            <span><i>').concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,"</span>\n        </div>\n     </xg-trigger>\n    ")}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:36e4,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(wv);function Gy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Wy(t){t.preventDefault(),t.returnValue=!1}function Yy(t){var e=t.tagName;return!("INPUT"!==e&&"TEXTAREA"!==e&&!t.isContentEditable)}var Ky=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(t=e.call.apply(e,[this].concat(r))),"onBodyKeyDown",(function(e){var n=e||window.event;if(t.player&&(t.player.isUserActive||t.config.isIgnoreUserActive)&&!(t.config.disable||t.config.disableBodyTrigger||!t.checkIsVisible()||n.metaKey||n.altKey||n.ctrlKey)){var i=n.keyCode;return!(n.target!==document.body&&(!t.config.isGlobalTrigger||Yy(n.target))||!t.checkCode(i,!0)||(Wy(n),t.handleKeyCode(i,e),1))}})),yi(pi(t),"onKeydown",(function(e){var n=e||window.event;if(!(t.config.disable||t.config.disableRootTrigger||n.metaKey||n.altKey||n.ctrlKey)&&(t.player.isUserActive||t.config.isIgnoreUserActive)&&(t.player.isUserActive||t.config.isIgnoreUserActive)){if(!n||37!==n.keyCode&&!t.checkCode(n.keyCode)||n.target!==t.player.root&&n.target!==t.player.video&&n.target!==t.player.controls.el)return!0;Wy(n),t.handleKeyCode(n.keyCode,e)}})),t}return bo(n,[{key:"mergekeyCodeMap",value:function(){var t=this,e=this.config.keyCodeMap;e&&Object.keys(e).map((function(n){t.keyCodeMap[n]?["keyCode","action","disable","isBodyTarget"].map((function(i){e[n][i]&&(t.keyCodeMap[n][i]=e[n][i])})):t.keyCodeMap[n]=e[n]}))}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var t="function"==typeof this.config.seekStep?this.config.seekStep(this.player):this.config.seekStep;t&&"number"==typeof t&&(this.seekStep=t),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disable:!1},right:{keyCode:39,action:"seek",disable:!1},esc:{keyCode:27,action:"exitFullscreen",disable:!1}},this.mergekeyCodeMap(),this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var t=this.player.root.getBoundingClientRect(),e=t.height,n=t.top,i=t.bottom,r=window.innerHeight;return!(n<0&&n<0-.9*e||i>0&&i-r>.9*e)}},{key:"checkCode",value:function(t,e){var n=this,i=!1;return Object.keys(this.keyCodeMap).map((function(r){n.keyCodeMap[r]&&t===n.keyCodeMap[r].keyCode&&!n.keyCodeMap[r].disable&&(i=!e||e&&!n.keyCodeMap[r].noBodyTarget)})),i}},{key:"downVolume",value:function(t){var e=this.player,n=parseFloat((e.volume-.1).toFixed(1)),i={volume:{from:e.volume,to:n}};this.emitUserAction(t,"change_volume",{props:i}),e.volume=n>=0?n:0}},{key:"upVolume",value:function(t){var e=this.player,n=parseFloat((e.volume+.1).toFixed(1)),i={volume:{from:e.volume,to:n}};this.emitUserAction(t,"change_volume",{props:i}),e.volume=n<=1?n:1}},{key:"seek",value:function(t){var e,n=this.player,r=n.currentTime,i=n.duration,o={currentTime:{from:r,to:e=r+this.seekStep<=i?r+this.seekStep:i-1}};this.emitUserAction(t,"seek",{props:o}),this.player.currentTime=e}},{key:"seekBack",value:function(t){var e=this.player.currentTime,n=0;e-this.seekStep>=0&&(n=e-this.seekStep);var i={currentTime:{from:e,to:n}};this.emitUserAction(t,"seek",{props:i}),this.player.currentTime=n}},{key:"playPause",value:function(t){var e=this.player;e&&(this.emitUserAction(t,"switch_play_pause"),e.paused?e.play():e.pause())}},{key:"exitFullscreen",value:function(t){var e=this.player,n=e.fullscreen,i=e.cssfullscreen;n&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:n,to:!n}),e.exitFullscreen()),i&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:i,to:!i}),e.exitCssFullscreen())}},{key:"handleKeyCode",value:function(t,e){var n=this;Object.keys(this.keyCodeMap).map((function(i){var r=n.keyCodeMap[i],o=r.action,s=r.keyCode,a=r.disable;s!==t||a||("function"==typeof o?o(e,n.player):"string"==typeof o&&"function"==typeof n[o]&&n[o](e,n.player),n.emit(Hp,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gy(Object(n),!0).forEach((function(e){yi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gy(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({key:i,target:e.target},n.keyCodeMap[i])))}))}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!0,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,isIgnoreUserActive:!1}}}]),n}(lv);function zy(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">\n  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>\n</svg>\n',"image/svg+xml").firstChild}var Xy=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"registerIcons",value:function(){return{loadingIcon:zy}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return'\n    <xg-loading class="xgplayer-loading">\n      <xg-loading-inner></xg-loading-inner>\n    </xg-loading>'}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:vv.ROOT}}}]),n}(wv),qy=_n,$y=$i.findIndex,Zy=Eo,Jy="findIndex",Qy=!0;Jy in[]&&Array(1).findIndex((function(){Qy=!1})),qy({target:"Array",proto:!0,forced:Qy},{findIndex:function(t){return $y(this,t,arguments.length>1?arguments[1]:void 0)}}),Zy(Jy);var tm=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],nm=function(){function t(e){ui(this,t),this.fragments=e.fragments||[],this.focusClass="inner-focus",this.style=e.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return bo(t,[{key:"updateDuration",value:function(t){var e=this;this.duration=parseInt(1e3*t);var n=0,i=this.fragments;this.fragments=i.map((function(t){return t.start=n,t.end=n+t.percent*e.duration,t.duration=t.percent*e.duration,n+=t.percent*e.duration,t}))}},{key:"updateProgress",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"played",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments,r=e.newIndex,o=e.curIndex,s=e.millisecond;r!==o&&n.map((function(e,n){n<r?e[t].style.width="100%":n>r&&(e[t].style.width=0)}));var a=i[r],c=0===s?0:(s-a.start)/a.duration;n[r][t].style.width=c<0?0:"".concat(100*c,"%")}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},e=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(1e3*e,10)!==this.duration){if(!e&&0!==e)return;this.updateDuration(e)}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==qd.typeOf(t.played)){var r=this.findIndex(1e3*t.played,n);this.updateProgress("played",{newIndex:r,curIndex:n,millisecond:parseInt(1e3*t.played,10)}),this.playedIndex=r}if("Undefined"!==qd.typeOf(t.cached)){var o=this.findIndex(1e3*t.cached,i);this.updateProgress("cached",{newIndex:o,curIndex:i,millisecond:parseInt(1e3*t.cached,10)}),this.cachedIndex=o}}},{key:"findIndex",value:function(t,e){var n=this.fragments;return 1===n.length?0:(t>n[e].start&&t<n[e].end||this.fragments.map((function(n,i){t>n.start&&t<=n.end&&(e=i)})),e)}},{key:"findHightLight",value:function(){for(var t=this.root.children,e=0;e<t.length;e++)if(qd.hasClass(t[e],this.focusClass))return{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"findFragment",value:function(t){var e=this.root.children;return t<0||t>=e.length?null:{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var t=this.root.children,e=0;e<t.length;e++)qd.removeClass(t[e],this.focusClass)}},{key:"setHightLight",value:function(t){var e=this.root.children;if(t<e.length)return qd.addClass(e[t],this.focusClass),{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var t=this,e=this.style.progressColor;return this.root=qd.createDom("xg-inners","",{},"progress-list"),this.fragments&&(this.progressList=this.fragments.map((function(n){var i=qd.createDom("xg-inner","",{style:e?"background:".concat(e,"; flex: ").concat(n.percent):"flex: ".concat(n.percent)},"".concat(n.isFocus?"inner-focus":""," xgplayer-progress-inner"));return t.root.appendChild(i),tm.map((function(e){i.appendChild(qd.createDom(e.tag,"",{style:e.styleKey?"background: ".concat(t.style[e.styleKey],"; width:0;"):"width:0;"},e.className))})),{cached:i.children[0],played:i.children[1]}}))),this.root}}]),t}(),im=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),yi(pi(i=e.call(this,t)),"onMoveOnly",(function(t){var e=pi(i),n=e.pos,r=e.config,o=e.player;qd.event(t);var s=qd.getEventPos(t,o.zoom),a=90===o.rotateDeg?s.clientY:s.clientX;if(!(n.moving&&Math.abs(n.x-a)<r.miniMoveStep)){n.moving=!0,n.x=a;var c=i.computeTime(t);i.triggerCallbacks("dragmove",c,t)}})),yi(pi(i),"onBodyClick",(function(t){t.preventDefault(),t.stopPropagation()})),yi(pi(i),"_mouseDownHandler",(function(t,e){i._state.time=e.currentTime,i.updateWidth(e.currentTime,e.percent,0)})),yi(pi(i),"_mouseUpHandler",(function(t,e){pi(i).pos.moving&&i.updateWidth(e.currentTime,e.percent,2)})),yi(pi(i),"_mouseMoveHandler",(function(t,e){var n=pi(i),r=n._state,o=n.pos,s=n.config,a=n.player;r.time<e.currentTime?e.forward=!0:e.forward=!1,r.time=e.currentTime,o.isDown&&!o.moving&&(o.moving=!0,s.isPauseMoving&&a.pause(),i.triggerCallbacks("dragstart",e,t)),i.updateWidth(e.currentTime,e.percent,1),i.triggerCallbacks("dragmove",e,t)})),yi(pi(i),"onMouseDown",(function(t){var e=pi(i),n=e.player,r=e.pos,o=e.config,s=e.playerConfig,a=qd.getEventPos(t,n.zoom),c=90===n.rotateDeg?a.clientY:a.clientX;if(!(n.isMini||o.closeMoveSeek||!s.allowSeekAfterEnded&&n.ended)){t.stopPropagation(),i.focus(),qd.checkIsFunction(s.disableSwipeHandler)&&s.disableSwipeHandler(),qd.checkIsFunction(o.onMoveStart)&&o.onMoveStart(),qd.event(t),r.x=c,r.isDown=!0,r.moving=!1,n.focus({autoHide:!1}),i.isProgressMoving=!0,qd.addClass(i.progressBtn,"active");var l=i.computeTime(t);return i._mouseDownHandlerHook(t,l),"touch"===i.domEventType?(i.root.addEventListener("touchmove",i.onMouseMove),i.root.addEventListener("touchend",i.onMouseUp)):(i.unbind("mousemove",i.onMoveOnly),document.addEventListener("mousemove",i.onMouseMove,!1),document.addEventListener("mouseup",i.onMouseUp,!1),n.root.addEventListener("click",i.onBodyClick,!1)),!0}})),yi(pi(i),"onMouseUp",(function(t){var e=pi(i),n=e.player,r=e.config,o=e.pos,s=e.playerConfig,a=e._state;t.stopPropagation(),t.preventDefault(),qd.checkIsFunction(s.enableSwipeHandler)&&s.enableSwipeHandler(),qd.checkIsFunction(r.onMoveEnd)&&r.onMoveEnd(),qd.event(t),qd.removeClass(i.progressBtn,"active");var c=i.computeTime(t);o.moving?i.triggerCallbacks("dragend",c,t):i.triggerCallbacks("click",c,t),i._mouseUpHandlerHook(t,c),o.moving=!1,o.isDown=!1,o.x=0,o.y=0,a.time=0,"touch"===i.domEventType?(i.root.removeEventListener("touchmove",i.onMouseMove),i.root.removeEventListener("touchend",i.onMouseUp),i.blur()):(document.removeEventListener("mousemove",i.onMouseMove,!1),document.removeEventListener("mouseup",i.onMouseUp,!1),n.root.removeEventListener("click",i.onBodyClick,!1),o.isEnter?!s.isMobileSimulateMode&&i.bind("mousemove",i.onMoveOnly):i.onMouseLeave(t)),qd.setTimeout(pi(i),(function(){i.resetSeekState()}),10),n.focus()})),yi(pi(i),"onMouseMove",(function(t){var e=pi(i),n=e.pos,r=e.player,o=e.config;qd.checkTouchSupport()&&t.preventDefault(),qd.event(t);var s=qd.getEventPos(t,r.zoom),a=90===r.rotateDeg?s.clientY:s.clientX,c=Math.abs(n.x-a);if(!(n.moving&&c<o.miniMoveStep||!n.moving&&c<o.miniStartStep)){n.x=a;var l=i.computeTime(t);i._mouseMoveHandlerHook(t,l)}})),yi(pi(i),"onMouseOut",(function(t){i.triggerCallbacks("mouseout",null,t)})),yi(pi(i),"onMouseOver",(function(t){i.triggerCallbacks("mouseover",null,t)})),yi(pi(i),"onMouseEnter",(function(t){var e=pi(i),n=e.player,r=e.pos;i.triggerCallbacks("mouseenter",null,t),r.isDown||r.isEnter||n.isMini||!n.config.allowSeekAfterEnded&&n.ended||(r.isEnter=!0,i.bind("mousemove",i.onMoveOnly),i.bind("mouseleave",i.onMouseLeave),i.focus())})),yi(pi(i),"onMouseLeave",(function(t){i.triggerCallbacks("mouseleave",null,t);var e=pi(i),n=e.player,r=e.pos;r.isEnter=!1,n.isMini||(i.unbind("mousemove",i.onMoveOnly),r.isDown?i.unbind("mouseleave",i.onMouseLeave):i.blur())})),i.useable=!1,i.isProgressMoving=!1,i.__dragCallBacks=[],i._state={now:-1,direc:0,time:0},i._disableBlur=!1,i}return bo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.useable=t}},{key:"createInner",value:function(){var t=this;this.innerList=new nm({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{}}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map((function(e){t[e]=t.innerList[e].bind(t.innerList)}))}},{key:"afterCreate",value:function(){var t=this;this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer"),this.createInner(),"mobile"===tp.device&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(fp,(function(){t.onTimeupdate()})),this.on(hp,(function(){t.onTimeupdate(),t.onCacheUpdate()})),this.on(kp,(function(){t.onCacheUpdate()})),this.on(ap,(function(){t.onCacheUpdate(),t._state.now=0})),this.on(wp,(function(){t.onReset()})),this.bindDomEvents(),this.initCustomStyle())}},{key:"initCustomStyle",value:function(){var t=(this.playerConfig||{}).commonStyle.sliderBtnStyle,e=this.progressBtn;t&&("string"==typeof t?e.style.boxShadow=t:"object"===di(t)&&Object.keys(t).map((function(n){e.style[n]=t[n]})))}},{key:"triggerCallbacks",value:function(t,e,n){this.__dragCallBacks.length>0&&this.__dragCallBacks.map((function(i){if(i&&i.handler&&i.type===t)try{i.handler(e,n)}catch(t){console.error("[XGPLAYER][triggerCallbacks] ".concat(i," error"),t)}}))}},{key:"addCallBack",value:function(t,e){e&&"function"==typeof e&&this.__dragCallBacks.push({type:t,handler:e})}},{key:"removeCallBack",value:function(t,e){var n=this.__dragCallBacks,i=-1;n.map((function(n,r){n&&n.type===t&&n.handler===e&&(i=r)})),i>-1&&n.splice(i,1)}},{key:"bindDomEvents",value:function(){var t=this.player,e=t.controls,n=t.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),"touch"===this.domEventType?(this.root.addEventListener("touchstart",this.onMouseDown),e&&(e.root&&e.root.addEventListener("touchmove",qd.stopPropagation),e.center&&e.center.addEventListener("touchend",qd.stopPropagation))):(this.bind("mousedown",this.onMouseDown),!n.isMobileSimulateMode&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){qd.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),qd.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(t,e,n){var i=this.config,r=this.player;if(!i.isCloseClickSeek||0!==n){var o=t>r.duration?r.duration-.2:Number(t).toFixed(1);this.updatePercent(e),this.updateTime(t),(1!==n||i.isDragingSeek&&"audio"!==r.videoConfig.mediaType)&&(this._state.now=o,this._state.direc=o>r.currentTime?0:1,r.seek(o))}}},{key:"computeTime",value:function(t){var e,n,i,r=this.player,o=this.root.getBoundingClientRect(),s=o.width,a=o.height,c=o.top,l=o.left,u=qd.getEventPos(t,r.zoom);90===r.rotateDeg?(e=a,n=c,i=u.clientY):(e=s,n=l,i=u.clientX);var h=i-n,f=(h=h>e?e:h<0?0:h)/e;return{percent:f=f<0?0:f>1?1:f,currentTime:parseInt(f*this.duration*1e3,10)/1e3,offset:h,width:e,left:n,e:t}}},{key:"updateTime",value:function(t){var e=this.player,n=this.duration;t>n?t=n:t<0&&(t=0);var i=e.plugins.time;i&&i.updateTime(t)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var t=this.player.plugins.time;t&&t.resetActive()}},{key:"updatePercent",value:function(t,e){if(this.isProgressMoving=!0,!this.config.disable){t=t>1?1:t<0?0:t,this.progressBtn.style.left="".concat(100*t,"%"),this.innerList.update({played:t*this.duration},this.duration);var n=this.player.plugins.miniprogress;n&&n.update({played:t*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(){var t=this.player,e=this._state,n=this.duration;if(!(t.isSeeking||this.isProgressMoving||t.state<6)){if(e.now>-1){var i=parseInt(1e3*e.now,10)-parseInt(1e3*t.currentTime,10);if(0===e.direc&&i>300||1===e.direc&&i>-300)return void(e.now=-1);e.now=-1}var r=this.timeOffset+t.currentTime;this.innerList.update({played:r},n),this.progressBtn.style.left="".concat(r/n*100,"%");var o=this.player.plugins.miniprogress;o&&o.update({played:r},n)}}},{key:"onCacheUpdate",value:function(){var t=this.player,e=this.duration,n=t.bufferedPoint;this.innerList.update({cached:n.end},e);var i=this.player.plugins.miniprogress;i&&i.update({cached:n.end},e)}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var t=this.player.plugins.miniprogress;t&&t.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var t=this.player,e=t.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,"touch"===this.domEventType?(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),e&&(e.root&&e.root.removeEventListener("touchmove",qd.stopPropagation),e.center&&e.center.removeEventListener("touchend",qd.stopPropagation))):(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),t.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var t=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===t?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer">\n        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),n}(wv),rm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var t=this,e=this.player;this.config.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on(cp,(function(){t.animate(e.paused)})),this.on(op,(function(){t.animate(e.paused)})),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:ny,class:"xg-icon-play"},pause:{icon:iy,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(t){t.preventDefault(),t.stopPropagation();var e=this.player;return this.emitUserAction(t,"switch_play_pause",{prop:"paused",from:e.paused,to:!e.paused}),e.ended?e.replay():e.paused?(e.play(),this.animate(!1)):(e.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.play),this.appendChild(".xgplayer-icon",t.pause)}},{key:"animate",value:function(t){var e=this.i18nKeys;t?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),e.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),e.PAUSE_TIPS))}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-play">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:0,disable:!1}}}]),n}(wv);function om(){return(new DOMParser).parseFromString('<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>\n    </g>\n</svg>',"image/svg+xml").firstChild}var sm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var t=this;this.initIcons(),this.onClick=function(e){e.preventDefault(),e.stopPropagation(),t.config.onClick(e)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:om,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(this.root,t.screenBack)}},{key:"show",value:function(){qd.addClass(this.root,"show")}},{key:"hide",value:function(){qd.removeClass(this.root,"show")}},{key:"render",value:function(){return'<xg-icon class="xgplayer-back">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:vv.ROOT_TOP,index:0}}}]),n}(wv);function am(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>\n</svg>\n',"image/svg+xml").firstChild}function cm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">\n  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>\n</svg>\n',"image/svg+xml").firstChild}var lm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(t=e.call.apply(e,[this].concat(r))),"_onOrientationChange",(function(e){t.player.fullscreen&&t.config.rotateFullscreen&&(90===window.orientation||-90===window.orientation?t.player.setRotateDeg(0):t.player.setRotateDeg(90))})),t}return bo(n,[{key:"afterCreate",value:function(){var t=this,e=this.config,n=this.playerConfig;if(!e.disable){e.target&&(this.playerConfig.fullscreenTarget=this.config.target);var i=qd.getFullScreenEl();n.fullscreenTarget===i&&this.player.getFullscreen(),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(e){var n=t.player.fullscreen;t.emitUserAction(e,"switch_fullscreen",{prop:"fullscreen",from:n,to:!n})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(Lp,(function(e){t.changeLangTextKey(t.find(".xg-tips"),e?t.i18nKeys.EXITFULLSCREEN_TIPS:t.i18nKeys.FULLSCREEN_TIPS),t.animate(e)})),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:sm,options:{config:{onClick:function(e){t.handleFullscreen(e)}}}})),"mobile"===tp.device&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:am,class:"xg-get-fullscreen"},exitFullscreen:{icon:cm,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon","mobile"===tp.device?"touchend":"click",this.handleFullscreen),"mobile"===tp.device&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.fullscreen),this.appendChild(".xgplayer-icon",t.exitFullscreen)}},{key:"toggleFullScreen",value:function(t){t&&(t.preventDefault(),t.stopPropagation());var e=this.player,n=this.config;!0===n.useCssFullscreen||"function"==typeof n.useCssFullscreen&&n.useCssFullscreen()?(e.fullscreen?e.exitCssFullscreen():e.getCssFullscreen(),this.animate(e.fullscreen)):n.rotateFullscreen?(e.fullscreen?e.exitRotateFullscreen():e.getRotateFullscreen(),this.animate(e.fullscreen)):n.switchCallback&&"function"==typeof n.switchCallback?n.switchCallback(e.fullscreen):e.fullscreen?e.exitFullscreen():e.getFullscreen()}},{key:"animate",value:function(t){t?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(t?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){wo(gi(n.prototype),"show",this).call(this)}},{key:"hide",value:function(){wo(gi(n.prototype),"hide",this).call(this)}},{key:"render",value:function(){if(!this.config.disable){var t="FULLSCREEN_TIPS";return'<xg-icon class="xgplayer-fullscreen">\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys[t],'">').concat(this.i18n[t],"</div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(wv),um=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).isActiving=!1,i}return bo(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"currentTime",get:function(){return this.player.currentTime||0}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var t=this,e=this.player.controls.config.mode;this.mode="flex"===e?"flex":"normal",this.config.disable||("flex"===this.mode&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on(vp,(function(){t.onTimeUpdate()})),this.on(fp,(function(){t.onTimeUpdate()})),this.on(wp,(function(){t.onReset()})))}},{key:"show",value:function(){"flex"!==this.mode&&wo(gi(n.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(){var t=this.player;if(!(this.config.disable||this.isActiving||t.state<6&&4!==t.state)){var e=this.currentTime+this.timeOffset;"flex"===this.mode?(this.centerCurDom.innerHTML=qd.format(e),this.duration!==1/0&&this.duration>0&&(this.centerDurDom.innerHTML=qd.format(this.duration))):(this.timeDom.innerHTML=qd.format(e),this.duration!==1/0&&this.duration>0&&(this.durationDom.innerHTML=qd.format(this.duration)))}}},{key:"onReset",value:function(){"flex"===this.mode?(this.centerCurDom.innerHTML=qd.format(0),this.centerDurDom.innerHTML=qd.format(0)):(this.timeDom.innerHTML=qd.format(0),this.durationDom.innerHTML=qd.format(0))}},{key:"createCenterTime",value:function(){var t=this.player;if(t.controls&&t.controls.center){var e=t.controls.center;this.centerCurDom=qd.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=qd.createDom("xg-icon","00:00",{},"xgplayer-time right"),e.children.length>0?e.insertBefore(this.centerCurDom,e.children[0]):e.appendChild(this.centerCurDom),e.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var t=this.config;this.duration===1/0||this.playerConfig.isLive?(qd.hide(this.durationDom),qd.hide(this.timeDom),qd.hide(this.find(".time-separator")),qd.show(this.find(".time-live-tag"))):qd.hide(this.find(".time-live-tag")),t.hide?this.hide():this.show()}},{key:"changeLiveState",value:function(t){t?(qd.hide(this.durationDom),qd.hide(this.timeDom),qd.hide(this.find(".time-separator")),qd.show(this.find(".time-live-tag"))):(qd.hide(this.find(".time-live-tag")),qd.show(this.find(".time-separator")),qd.show(this.durationDom),qd.show(this.timeDom))}},{key:"updateTime",value:function(t){this.isActiving=!0,!t&&0!==t||t>this.duration||("flex"!==this.mode?this.timeDom.innerHTML=qd.format(t):this.centerCurDom.innerHTML=qd.format(t))}},{key:"resetActive",value:function(){var t=this,e=this.player,n=function(){t.isActiving=!1};this.off(hp,n),e.isSeeking?this.once(hp,n):this.isActiving=!1}},{key:"destroy",value:function(){var t=this.player.controls.center;this.centerCurDom&&t.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&t.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-time">\n    <span class="time-current">00:00</span>\n    <span class="time-separator">/</span>\n    <span class="time-duration">00:00</span>\n    <span class="time-live-tag">'.concat(this.i18n.LIVE_TIP,"</span>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(wv);function hm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function fm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>\n</svg>\n',"image/svg+xml").firstChild}function dm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>\n  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>\n</svg>\n',"image/svg+xml").firstChild}var pm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(t=e.call.apply(e,[this].concat(r))),"onBarMousedown",(function(e){var n=pi(t).player,i=t.find(".xgplayer-slider"),r=t.find(".xgplayer-bar");i.focus(),qd.event(e);var o=r.getBoundingClientRect(),s=qd.getEventPos(e,n.zoom),a=o.height-(s.clientY-o.top);if(s.h=a,s.barH=o.height,t.pos=s,!(a<-2))return t.updateVolumePos(a,e),document.addEventListener("mouseup",t.onBarMouseUp),t.isStart=!0,!1})),yi(pi(t),"onBarMouseMove",(function(e){if(t.isStart){var n=pi(t),i=n.pos,r=n.player;e.preventDefault(),e.stopPropagation(),qd.event(e);var o=qd.getEventPos(e,r.zoom);t.isMoving=!0;var s=i.h-o.clientY+i.clientY;s>i.barH||t.updateVolumePos(s,e)}})),yi(pi(t),"onBarMouseUp",(function(e){qd.event(e),document.removeEventListener("mouseup",t.onBarMouseUp),t.isStart=!1,t.isMoving=!1})),yi(pi(t),"onMouseenter",(function(e){t._timerId&&(qd.clearTimeout(pi(t),t._timerId),t._timerId=null),qd.addClass(t.root,"slide-show")})),yi(pi(t),"onMouseleave",(function(e){t._timerId&&(qd.clearTimeout(pi(t),t._timerId),t._timerId=null),t._timerId=qd.setTimeout(pi(t),(function(){qd.removeClass(t.root,"slide-show"),t.isStart&&t.onBarMouseUp(e),t._timerId=null}),200)})),yi(pi(t),"onVolumeChange",(function(e){if(t.player){var n=t.player,i=n.muted,r=n.volume;t.isMoving||(t.find(".xgplayer-drag").style.height=i||0===r?"4px":"".concat(100*r,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(i,r)}})),t}return bo(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:fm,class:"xg-volume-small"},volumeLarge:{icon:hm,class:"xg-volume"},volumeMuted:{icon:dm,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var t=this;if(this._timerId=null,!this.config.disable){this.initIcons();var e=this.playerConfig,n=e.commonStyle,i=e.volume;n.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=n.volumeColor),this.changeMutedHandler=this.hook("mutedChange",(function(e){t.changeMuted(e)}),{pre:function(t){t.preventDefault(),t.stopPropagation()}}),"mobile"===tp.device||this.playerConfig.isMobileSimulateMode||(this.bind("mouseenter",this.onMouseenter),this.bind(["blur","mouseleave"],this.onMouseleave),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(gp,this.onVolumeChange),this.once(yp,this.onVolumeChange),"Number"!==qd.typeOf(i)&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(t,e){var n=this.player,i=this.find(".xgplayer-drag"),r=this.find(".xgplayer-bar");if(r&&i){var o=parseInt(t/r.getBoundingClientRect().height*1e3,10);i.style.height="".concat(t,"px");var s=Math.max(Math.min(o/1e3,1),0),a={volume:{from:n.volume,to:s}};n.muted&&(a.muted={from:!0,to:!1}),this.emitUserAction(e,"change_volume",{muted:n.muted,volume:n.volume,props:a}),n.volume=Math.max(Math.min(o/1e3,1),0),n.muted&&(n.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var t=this.player,e=t.volume,n=t.muted,i=this.find(".xgplayer-value-label"),r=Math.max(Math.min(e,1),0);i.innerText=n?0:Math.ceil(100*r)}},{key:"changeMuted",value:function(t){t&&t.stopPropagation();var e=this.player;this.isStart&&this.onBarMouseUp(t),this.emitUserAction(t,"change_muted",{muted:e.muted,volume:e.volume,props:{muted:{from:e.muted,to:!e.muted}}}),e.volume>0&&(e.muted=!e.muted),e.volume<.01&&(e.volume=this.config.miniVolume)}},{key:"animate",value:function(t,e){t||0===e?this.setAttr("data-state","mute"):e<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.volumeSmall),this.appendChild(".xgplayer-icon",t.volumeLarge),this.appendChild(".xgplayer-icon",t.volumeMuted)}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon","mobile"===tp.device?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var t=this.config.default||this.player.volume,e=this.config.showValueLabel;return'\n    <xg-icon class="xgplayer-volume" data-state="normal">\n      <div class="xgplayer-icon">\n      </div>\n      <xg-slider class="xgplayer-slider">\n        '.concat(e?'<div class="xgplayer-value-label">'.concat(100*t,"</div>"):"",'\n        <div class="xgplayer-bar">\n          <xg-drag class="xgplayer-drag" style="height: ').concat(100*t,'%"></xg-drag>\n        </div>\n      </xg-slider>\n    </xg-icon>')}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(wv);function vm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">\n  <g clip-path="url(#clip0)">\n    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>\n    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>\n  </g>\n  <defs>\n    <clipPath id="clip0">\n      <rect width="40" height="40" fill="white"/>\n    </clipPath>\n  </defs>\n</svg>\n',"image/svg+xml").firstChild}var gm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).rotateDeg=i.config.rotateDeg||0,i}return bo(n,[{key:"afterCreate",value:function(){var t=this;this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Np,(function(){t.rotateDeg&&qd.setTimeout(t,(function(){t.updateRotateDeg(t.rotateDeg,t.config.innerRotate)}),100)})),this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate))}},{key:"destroy",value:function(){this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(t){t.preventDefault(),t.stopPropagation(),this.emitUserAction(t,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(t,e){var n=this.player;t||(t=0);var i=this.player,r=i.root,o=i.innerContainer,s=i.video,a=r.offsetWidth,c=o&&e?o.offsetHeight:r.offsetHeight,l="100%",u="100%",h=0,f=0;.75!==t&&.25!==t||(l="".concat(c,"px"),u="".concat(a,"px"),h=-(c-a)/2,f=-(a-c)/2);var d="translate(".concat(h,"px,").concat(f,"px) rotate(").concat(t,"turn)"),p={transformOrigin:"center center",transform:d,webKitTransform:d,height:u,width:l},v=e?s:r,g=e?n.getPlugin("poster"):null;Object.keys(p).map((function(t){v.style[t]=p[t],g&&g.root&&(g.root.style[t]=p[t])}))}},{key:"rotate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.player;this.rotateDeg||(this.rotateDeg=0);var r=t?1:-1;this.rotateDeg=(this.rotateDeg+1+.25*r*n)%1,this.updateRotateDeg(this.rotateDeg,e),i.emit(Bp,360*this.rotateDeg)}},{key:"registerIcons",value:function(){return{rotate:vm}}},{key:"render",value:function(){if(!this.config.disable)return'\n    <xg-icon class="xgplayer-rotate">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.ROTATE_TIPS,'">\n      ').concat(this.i18n.ROTATE_TIPS,"\n      </div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}(wv);function ym(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}function mm(){return(new DOMParser).parseFromString('<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"\n    fill="white" />\n  <path fill-rule="evenodd" clip-rule="evenodd"\n    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"\n    fill="white" />\n</svg>',"image/svg+xml").firstChild}var km="picture-in-picture",bm="fullscreen",wm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(t=e.call.apply(e,[this].concat(r))),"switchPIP",(function(e){if(!t.isPIPAvailable())return!1;e.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(e,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):4===t.player.video.readyState&&(t.requestPIP(),t.emitUserAction(e,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))})),t}return bo(n,[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.pip&&(t.config.showIcon=t.player.config.pip)}},{key:"afterCreate",value:function(){var t=this;this.isPIPAvailable()&&(this.pMode="inline",this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(Pp,(function(){t.config.showIcon&&(qd.removeClass(t.find(".xgplayer-icon"),"xg-icon-disable"),t.bind("click",t.switchPIP))})))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:ym,class:"xg-get-pip"},pipIconExit:{icon:mm,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var t=this.icons;this.appendChild(".xgplayer-icon",t.pipIcon),this.appendChild(".xgplayer-icon",t.pipIconExit)}},{key:"initPipEvents",value:function(){var t=this,e=this.player;this.leavePIPCallback=function(){var n=e.paused;qd.setTimeout(t,(function(){!n&&e.videoPlay()}),0),!n&&e.videoPlay(),t.setAttr("data-state","normal"),e.emit(Fp,!1)},this.enterPIPCallback=function(n){e.emit(Fp,!0),t.pipWindow=n.pictureInPictureWindow,t.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(n){var i=e.video.webkitPresentationMode;t.pMode===bm&&i!==bm&&e.onFullscreenChange(null,!1),t.pMode=i,i===km?t.enterPIPCallback(n):"inline"===i&&t.leavePIPCallback(n)},e.video&&(e.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),e.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.video)&&e.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"requestPIP",value:function(){var t=this.player,e=this.playerConfig;if(this.isPIPAvailable()&&!this.isPip)try{var i=e.poster;return i&&(t.video.poster="String"===qd.typeOf(i)?i:i.poster),n.checkWebkitSetPresentationMode(t.video)?t.video.webkitSetPresentationMode("picture-in-picture"):t.video.requestPictureInPicture(),!0}catch(t){return console.error("requestPiP",t),!1}}},{key:"exitPIP",value:function(){var t=this.player;try{return this.isPIPAvailable()&&this.isPip&&(n.checkWebkitSetPresentationMode(t.video)?t.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()),!0}catch(t){return console.error("exitPIP",t),!1}}},{key:"isPip",get:function(){var t=this.player;return document.pictureInPictureElement&&document.pictureInPictureElement===t.video||t.video.webkitPresentationMode===km}},{key:"isPIPAvailable",value:function(){var t=this.player.video;return("Boolean"!==qd.typeOf(document.pictureInPictureEnabled)||document.pictureInPictureEnabled)&&("Boolean"===qd.typeOf(t.disablePictureInPicture)&&!t.disablePictureInPicture||t.webkitSupportsPresentationMode&&"Function"===qd.typeOf(t.webkitSetPresentationMode))}},{key:"destroy",value:function(){var t=this.player;t.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),t.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(t.video)&&t.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(this.config.showIcon&&this.isPIPAvailable())return'<xg-icon class="xgplayer-pip">\n      <div class="xgplayer-icon xg-icon-disable">\n      </div>\n      <div class="xg-tips" lang-key="'.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:6,showIcon:!1}}},{key:"checkWebkitSetPresentationMode",value:function(t){return"function"==typeof t.webkitSetPresentationMode}}]),n}(wv);function xm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">\n  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Cm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),yi(pi(i=e.call(this,t)),"playNext",(function(t){var e=pi(i).player;t.preventDefault(),t.stopPropagation(),i.idx+1<i.config.urlList.length?(i.idx++,i.nextHandler(i.config.urlList[i.idx],i.idx),e.emit(Up,i.idx+1)):(i.nextHandler(),e.emit(Up))})),i.idx=-1,i}return bo(n,[{key:"afterCreate",value:function(){this.config.urlList&&0!==this.config.urlList.length&&(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:xm}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var t="mobile"===tp.device?"touchend":"click";this.bind(t,this.playNext),this.show()}},{key:"changeSrc",value:function(t){var e=this.player;t&&(e.pause(),e.currentTime=0,e.switchURL?e.switchURL(t):e.src=t,e.config.url=t,e.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(this.config.urlList&&0!==this.config.urlList.length)return'\n     <xg-icon class="xgplayer-playnext">\n      <div class="xgplayer-icon">\n      </div>\n      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">'.concat(this.i18n.PLAYNEXT_TIPS,"</div>\n     </xg-icon>\n    ")}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(wv),Tm={exports:{}};!function(t,e){t.exports=function t(e,n,i){var r,o,s=window,a="application/octet-stream",c=i||a,l=e,u=!n&&!i&&l,h=document.createElement("a"),f=function(t){return String(t)},d=s.Blob||s.MozBlob||s.WebKitBlob||f,p=n||"download";if(d=d.call?d.bind(s):Blob,"true"===String(this)&&(c=(l=[l,c])[0],l=l[1]),u&&u.length<2048&&(p=u.split("/").pop().split("?")[0],h.href=u,-1!==h.href.indexOf(u))){var v=new XMLHttpRequest;return v.open("GET",u,!0),v.responseType="blob",v.onload=function(e){t(e.target.response,p,a)},setTimeout((function(){v.send()}),0),v}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l)){if(!(l.length>2096103.424&&d!==f))return navigator.msSaveBlob?navigator.msSaveBlob(k(l),p):b(l);c=(l=k(l)).type||a}else if(/([\x80-\xff])/.test(l)){for(var g=0,y=new Uint8Array(l.length),m=y.length;g<m;++g)y[g]=l.charCodeAt(g);l=new d([y],{type:c})}function k(t){for(var e=t.split(/[:;,]/),n=e[1],i=("base64"==e[2]?atob:decodeURIComponent)(e.pop()),r=i.length,o=0,s=new Uint8Array(r);o<r;++o)s[o]=i.charCodeAt(o);return new d([s],{type:n})}function b(t,e){if("download"in h)return h.href=t,h.setAttribute("download",p),h.className="download-js-link",h.innerHTML="downloading...",h.style.display="none",document.body.appendChild(h),setTimeout((function(){h.click(),document.body.removeChild(h),!0===e&&setTimeout((function(){s.URL.revokeObjectURL(h.href)}),250)}),66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),window.open(t)||confirm("Displaying New Document\n\nUse Save As... to download, then click back to return to this page.")&&(location.href=t),!0;var n=document.createElement("iframe");document.body.appendChild(n),!e&&/^data:/.test(t)&&(t="data:"+t.replace(/^data:([\w\/\-\+]+)/,a)),n.src=t,setTimeout((function(){document.body.removeChild(n)}),333)}if(r=l instanceof d?l:new d([l],{type:c}),navigator.msSaveBlob)return navigator.msSaveBlob(r,p);if(s.URL)b(s.URL.createObjectURL(r),!0);else{if("string"==typeof r||r.constructor===f)try{return b("data:"+c+";base64,"+s.btoa(r))}catch(t){return b("data:"+c+","+encodeURIComponent(r))}(o=new FileReader).onload=function(t){b(this.result)},o.readAsDataURL(r)}return!0}}(Tm);var _m=Tm.exports;function Em(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">\n  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">\n      <g id="Group-2">\n        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">\n          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>\n          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>\n          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>\n          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>\n        </g>\n      </g>\n    </g>\n  </g>\n</svg>\n',"image/svg+xml").firstChild}var Sm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),yi(pi(i=e.call(this,t)),"download",(function(t){if(!i.isLock){i.emitUserAction(t,"download");var e=i.getAbsoluteURL(i.player.src);_m(e),i.isLock=!0,i.timer=window.setTimeout((function(){i.isLock=!1,window.clearTimeout(i.timer),i.timer=null}),300)}})),i.timer=null,i.isLock=!1,i}return bo(n,[{key:"afterCreate",value:function(){this.config.disable||(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:Em}}},{key:"getAbsoluteURL",value:function(t){if(!t.match(/^https?:\/\//)){var e=document.createElement("div");e.innerHTML='<a href="'.concat(t,'">x</a>'),t=e.firstChild.href}return t}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class="xgplayer-download">\n   <div class="xgplayer-icon">\n   </div>\n   <div class="xg-tips" lang-key="'.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(wv),Pm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"beforeCreate",value:function(t){"boolean"==typeof t.player.config.screenShot&&(t.config.disable=!t.player.config.screenShot)}},{key:"afterCreate",value:function(){this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var t=this.config;this.initSize=function(e){t.fitVideo&&(t.width=e.vWidth,t.height=e.vHeight)},this.once(Np,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(t,e){var n=document.createElement("a");n.href=t,n.download=e;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}},{key:"createCanvans",value:function(t,e){var n=document.createElement("canvas");this.canvasCtx=n.getContext("2d"),this.canvas=n,n.width=t||this.config.width,n.height=e||this.config.height}},{key:"onClickBtn",value:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.emitUserAction(t,"shot"),this.shot().then((function(t){e.emit(jp,t),e.saveScreenShot(t,e.config.name+e.config.format)}))}},{key:"shot",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{quality:.92,type:"image/png"},r=this.config,o=this.player,s=i.quality||r.quality,a=i.type||r.type;return new Promise((function(i,c){n.canvas?(n.canvas.width=t||r.width,n.canvas.height=e||r.height):n.createCanvans(t,e),n.canvasCtx.drawImage(o.video,0,0,t||r.width,e||r.height);var l=n.canvas.toDataURL(a,s).replace(a,"image/octet-stream");i(l=l.replace(/^data:image\/[^;]+/,"data:application/octet-stream"))}))}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.onClickBtn),this.off(Np,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var t=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",e="SCREENSHOT";return'\n      <xg-icon class="xgplayer-shot">\n      <div class="'.concat(t,'">\n      ').concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[e],'">').concat(this.i18n[e],"</span>")," \n      </div>\n    </xg-icon>")}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(wv),Rm=function(){function t(e){ui(this,t),this.config=e.config,this.parent=e.root,this.root=qd.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),e.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var n="mobile"===tp.device?"touchend":"click";this._delegates=wv.delegate.call(this,this.root,"li",n,this.onItemClick)}return bo(t,[{key:"renderItemList",value:function(t){var e=this,n=this.config,i=this.root;t?n.data=t:t=n.data,n.style&&Object.keys(n.style).map((function(t){i.style[t]=n[t]})),t.length>0&&(this.attrKeys=Object.keys(t[0])),this.root.innerHTML="",t.map((function(t,n){var i=t.selected?"option-item selected":"option-item";t["data-index"]=n,e.root.appendChild(qd.createDom("li","<span>".concat(t.showText,"</span>"),t,i))}))}},{key:"onItemClick",value:function(t){t.delegateTarget||(t.delegateTarget=t.target);var e=t.delegateTarget;if(e&&qd.hasClass(e,"selected"))return!1;var n="function"==typeof this.config.onItemClick?this.config.onItemClick:null,i=this.root.querySelector(".selected");qd.addClass(e,"selected"),i&&qd.removeClass(i,"selected"),n(t,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(e,this.attrKeys)})}},{key:"getAttrObj",value:function(t,e){if(!t||!e)return{};var n={};e.map((function(e){n[e]=t.getAttribute(e)}));var i=t.getAttribute("data-index");return i&&(n.index=Number(i)),n}},{key:"show",value:function(){qd.removeClass(this.root,"hide"),qd.addClass(this.root,"active")}},{key:"hide",value:function(){qd.removeClass(this.root,"active"),qd.addClass(this.root,"hide")}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map((function(t){t.destroy&&t.destroy()})),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),t}(),Om="mobile"===tp.device,Lm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).isActive=!1,i.curValue=null,i.curIndex=0,i}return bo(n,[{key:"updateLang",value:function(t){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var t=this,e=this.config;Om&&"middle"!==e.listType&&(e.listType="rightSide"),e.hidePortrait&&qd.addClass(this.root,"portrait"),this.once(pp,(function(){e.list&&e.list.length>0&&(t.renderItemList(e.list),t.show())})),Om&&this.on(xp,(function(){t.isActive&&(t.optionsList&&t.optionsList.hide(),t.isActive=!1)})),this.activeEvent=Om?"touchend":"mouseenter",this.onEnter=this.onEnter.bind(this),this.onLeave=this.onLeave.bind(this),this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)}},{key:"show",value:function(){!this.config.list||this.config.list.length<2||qd.addClass(this.root,"show")}},{key:"hide",value:function(){qd.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(t,e,n){if(void 0===t)return"";var i=this.config.list;return!n&&(n=this.player.lang),e=!e||qd.isUndefined(t[e])?"text":e,"number"==typeof t&&(t=i[t]),"object"===di(t[e])?t[e][n]||t[e].zh:t[e]||""}},{key:"onEnter",value:function(t){t.preventDefault(),t.stopPropagation(),this.onToggle(!0)}},{key:"onLeave",value:function(t){t.preventDefault(),t.stopPropagation(),this.isActive&&this.onToggle(!1)}},{key:"onToggle",value:function(t){if(this.isActive!==t){var e=this.player.controls,n=this.config.listType;t?("rightSide"===n?e.blur():e.focus(),this.optionsList&&this.optionsList.show()):("rightSide"===n?e.focus():e.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=t}}},{key:"onItemClick",value:function(t,e){t.preventDefault(),t.stopPropagation();var n=this.config,i=n.listType,r=n.list;(Om||"rightSide"===i)&&this.onToggle(!1),this.curIndex=e.to.index,this.curItem=r[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"changeCurrentText",value:function(){var t=this.config.list,e=t[this.curIndex<t.length?this.curIndex:0];e&&(this.find(".icon-text").innerHTML=this.getTextByLang(e,"iconText"))}},{key:"renderItemList",value:function(t,e){var n=this,i=this.config,r=this.optionsList,o=this.player;if("number"==typeof e&&(this.curIndex=e,this.curItem=i.list[e]),r)return r.renderItemList(t),void this.changeCurrentText();var s={config:{data:t||[],className:"rightSide"===i.listType?"right-side":"",onItemClick:function(t,e){n.onItemClick(t,e)}},root:"rightSide"===i.listType?o.root:this.root};this.config.isShowIcon&&(this.optionsList=new Rm(s),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",'">\n    <div class="xgplayer-icon btn-text">\n    <span class="icon-text"></span>\n    </div>\n   </xg-icon>')}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),n}(wv),Am=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).curTime=0,i.isPaused=!0,i}return bo(n,[{key:"beforeCreate",value:function(t){var e=t.config.list;Array.isArray(e)&&e.length>0&&(t.config.list=e.map((function(t){return!t.text&&t.name&&(t.text=t.name),t.text||(t.text=t.definition),t})))}},{key:"afterCreate",value:function(){var t=this;wo(gi(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",(function(e){t.changeDefinitionList(e)})),this.on(Dp,(function(e){t.renderItemList(t.config.list,e.to)})),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var t=this.config,e=t.list,n=t.defaultDefinition;if(e.length>0){var i=null;e.map((function(t){t.definition===n&&(i=t)})),i||(i=e[0]),this.changeDefinition(i)}}},{key:"renderItemList",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.list||[],i=arguments.length>1?arguments[1]:void 0,r=i&&i.definition?i.definition:this.config.defaultDefinition;i&&e.forEach((function(t){t.selected=!1}));var o=0,s=e.map((function(e,n){var i={url:e.url,definition:e.definition||"",showText:t.getTextByLang(e)||e.definition,selected:!1};return(e.selected||e.definition&&e.definition===r)&&(i.selected=!0,o=n),i}));wo(gi(n.prototype),"renderItemList",this).call(this,s,o)}},{key:"changeDefinitionList",value:function(t){Array.isArray(t)&&(this.config.list=t.map((function(t){return!t.text&&t.name&&(t.text=t.name),t.text||(t.text=t.definition),t})),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(t,e){this.player.changeDefinition(t,e)}},{key:"onItemClick",value:function(t,e){wo(gi(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(t,"change_definition",{from:e.from,to:e.to}),this.player.changeDefinition(e.to,e.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),n}(Lm),Im=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).curRate=1,i}return bo(n,[{key:"beforeCreate",value:function(t){var e=t.player.config.playbackRate,n=e?Array.isArray(e)?e:t.config.list:[];Array.isArray(n)&&(t.config.list=n.map((function(t){return"number"==typeof t?t={rate:t,text:"".concat(t,"x")}:!t.text&&t.rate&&(t.text="".concat(t.rate,"x")),t})))}},{key:"afterCreate",value:function(){var t=this;wo(gi(n.prototype),"afterCreate",this).call(this),this.on(mp,(function(){t.curValue!==t.player.playbackRate&&t.renderItemList()})),this.renderItemList()}},{key:"show",value:function(){this.config.list&&0!==this.config.list.length&&wo(gi(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(t,e){wo(gi(n.prototype),"onItemClick",this).apply(this,arguments);var i=t.delegateTarget,r=Number(i.getAttribute("rate"));if(!r||r===this.curValue)return!1;var o={playbackRate:{from:this.player.playbackRate,to:r}};this.emitUserAction(t,"change_rate",{props:o}),this.curValue=r,this.player.playbackRate=r}},{key:"renderItemList",value:function(){var t=this,e=this.player.playbackRate||1;this.curValue=e;var i=0,r=this.config.list.map((function(n,r){var o={rate:n.rate};return o.rate===e&&(o.selected=!0,i=r),o.showText=t.getTextByLang(n),o}));wo(gi(n.prototype),"renderItemList",this).call(this,r,i)}},{key:"destroy",value:function(){wo(gi(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),n}(Lm);function Dm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" class=\'path_full\' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}function Mm(){return(new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">\n  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>\n</svg>\n',"image/svg+xml").firstChild}var Nm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var t=this;this.config.disable||(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Ap,(function(e){t.animate(e)})),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var t=this.icons,e=this.find(".xgplayer-icon");e.appendChild(t.cssFullscreen),e.appendChild(t.exitCssFullscreen)}},{key:"btnClick",value:function(t){t.preventDefault(),t.stopPropagation();var e=this.player.isCssfullScreen;this.emitUserAction(t,"switch_cssfullscreen",{cssfullscreen:e}),e?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(t){this.root&&(t?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(t))}},{key:"switchTips",value:function(t){var e=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),t?e.EXITCSSFULLSCREEN_TIPS:e.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:Dm,class:"xg-get-cssfull"},exitCssFullscreen:{icon:Mm,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return'<xg-icon class=\'xgplayer-cssfullscreen\'>\n    <div class="xgplayer-icon">\n    </div>\n    <div class="xg-tips" lang-key="'.concat(this.i18nKeys.EXITCSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,"</div>\n    </xg-icon>")}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:vv.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(wv),Fm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var t=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(t){t.preventDefault(),t.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(pp,(function(){t.handleCanPlay()})),this.on(lp,(function(e){t.onError(e)}))}},{key:"errorRetry",value:function(t){this.emitUserAction(t,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){qd.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.player,n=t.errorType,i=e.errorNote?this.i18n[e.errorNote]:"";if(!i)switch(n){case"decoder":i=this.i18n.MEDIA_ERR_DECODE;break;case"network":i=this.i18n.MEDIA_ERR_NETWORK;break;default:i=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=i,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return'<xg-error class="xgplayer-error">\n      <div class="xgplayer-errornote">\n       <span class="xgplayer-error-text"></span>\n       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>\n      </div>\n    </xg-error>'}}],[{key:"pluginName",get:function(){return"error"}}]),n}(wv),Bm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){var t=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],(function(e){(t.config.onClick||t.customOnClick)&&(e.preventDefault(),e.stopPropagation(),t.customOnClick?t.customOnClick(e):t.config.onClick(e))})),this.player.showPrompt=function(){t.show.apply(t,arguments)},this.player.hidePrompt=function(){t.hide()}}},{key:"setStyle",value:function(t){var e=this;Object.keys(t).map((function(n){e.root.style[n]=t[n]}))}},{key:"show",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(t){this.customOnClick=i;var r=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),qd.addClass(this.root,"show"),"arrow"===n.mode&&qd.addClass(this.root,"arrow"),this.find(".xgplayer-prompt-detail").innerHTML="string"==typeof t?t:"".concat(t.text||"")+"".concat(t.highlight?'<i class="highlight">'.concat(t.highlight,"</i>"):""),n.style&&this.setStyle(n.style);var o="boolean"==typeof n.autoHide?n.autoHide:this.config.autoHide;if(o){var s=n.interval||r;this.intervalId=setTimeout((function(){e.hide()}),s)}}}},{key:"hide",value:function(){qd.removeClass(this.root,"show"),qd.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(Mg.CONTROLS_FOLLOW,'">\n    <span class="xgplayer-prompt-detail"></span>\n    </xg-prompt>')}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(wv),jm={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Um(t){Object.keys(jm).map((function(e){void 0===t[e]&&(t[e]=jm[e])}))}var Hm={initDots:function(){var t=this;this._ispots.map((function(e){t.createDot(e,!1)})),this._ispotsInit=!0},createDot:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.player.plugins.progress;if(n&&(e&&(Um(t),this._ispots.push(t)),this._ispotsInit||!e)){var i=this.calcuPosition(t.time,t.duration),r=t.style||{};r.left="".concat(i.left,"%"),r.width="".concat(i.width,"%");var o="xgspot_".concat(t.id," xgplayer-spot");i.isMini&&(o+=" mini");var s=qd.createDom("xg-spot",t.template||"",{"data-text":t.text,"data-time":t.time,"data-id":t.id},o);Object.keys(r).map((function(t){s.style[t]=r[t]})),n.outer&&n.outer.appendChild(s)}},findDot:function(t){if(this.player.plugins.progress){var e=this._ispots.filter((function(e,n){return e.id===t}));return e.length>0?e[0]:null}},updateDot:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.plugins.progress;if(n){var i=this.findDot(t.id);if(i&&Object.keys(t).map((function(e){i[e]=t[e]})),this._ispotsInit){var r=n.find('xg-spot[data-id="'.concat(t.id,'"]'));if(r){var o=this.calcuPosition(t.time,t.duration),s=t.style||{};s.left="".concat(o.left,"%"),s.width="".concat(o.width,"%"),r.setAttribute("data-text",t.text),r.setAttribute("data-time",t.time),o.isMini?qd.addClass(r,"mini"):qd.removeClass(r,"mini"),Object.keys(s).map((function(t){r.style[t]=s[t]})),e&&this.showDot(t.id)}}}},deleteDot:function(t){var e=this._ispots,n=this.player.plugins.progress;if(n){for(var i=[],r=0;r<e.length;r++)e[r].id===t&&i.push(r);for(var o=i.length-1;o>=0;o--)if(e.splice(i[o],1),this._ispotsInit){var s=n.find('xg-spot[data-id="'.concat(t,'"]'));s&&s.parentElement.removeChild(s)}}},deleteAllDots:function(){var t=this.player.plugins.progress;if(t)if(this._ispotsInit){for(var e=t.root.getElementsByTagName("xg-spot"),n=e.length-1;n>=0;n--)t.outer.removeChild(e[n]);this._ispots=[]}else this._ispots=[]},updateAllDots:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=this.player.plugins.progress;if(n)if(this._ispotsInit){this._ispots=[];var i=n.root.getElementsByTagName("xg-spot"),r=i.length;if(r>e.length)for(var o=r-1;o>e.length-1;o--)n.outer.removeChild(i[o]);e.map((function(e,n){n<r?(i[n].setAttribute("data-id","".concat(e.id)),t._ispots.push(e),t.updateDot(e)):t.createDot(e)}))}else this._ispots=e},getAllDotsDom:function(){var t=this.player.plugins.progress;return t?t.root.getElementsByTagName("xg-spot"):[]},getDotDom:function(t){var e=this.player.plugins.progress;if(e)return e.find('xg-spot[data-id="'.concat(t,'"]'))}},Vm={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver"},Gm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),yi(pi(i=e.call(this,t)),"onMousemove",(function(t){(i._state.f||qd.hasClass(t.target,"xg-spot-content"))&&(qd.event(t),t.stopPropagation())})),yi(pi(i),"onMousedown",(function(t){(i._state.f||qd.hasClass(t.target,"xg-spot-content"))&&(qd.event(t),t.stopPropagation())})),yi(pi(i),"onDotMouseLeave",(function(t){i._curDot.removeEventListener("mouseleave",i.onDotMouseLeave),i.blurDot(t.target),i._curDot=null;var e=i.player.plugins.progress;e&&e.enableBlur(),i.show()})),yi(pi(i),"onProgressMouseOver",(function(t,e){if(qd.hasClass(e.target,"xgplayer-spot")&&!i._curDot){i._curDot=e.target,i.focusDot(e.target),i._curDot.children.length>0&&i.hide();var n=i.player.plugins.progress;n&&n.disableBlur(),i._curDot.addEventListener("mouseleave",i.onDotMouseLeave)}})),i._ispots=[],i.videoPreview=null,i.videothumbnail=null,i.thumbnail=null,i._state={now:0,f:!1},i}return bo(n,[{key:"beforeCreate",value:function(t){var e=t.player.plugins.progress;e&&(t.root=e.root)}},{key:"afterCreate",value:function(){var t=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",(function(e,n){n.time&&t.player.seek(n.time)})),function(t){var e=t.config,n=t.player;Object.keys(Hm).map((function(e){t[e]=Hm[e].bind(t)}));var i=n.config.progressDot||e.ispots||[];t._ispots=i.map((function(t){return Um(t),t})),t._ispotsInit=!1,n.once(vp,(function(){t.initDots()}))}(this)}},{key:"onPluginsReady",value:function(){this.player.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var t=this,e=this.player.plugins.progress;if(e&&(Object.keys(Vm).map((function(n){t[Vm[n]]=t[Vm[n]].bind(t),e.addCallBack(n,t[Vm[n]])})),"mobile"!==tp.device)){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown);var n=this.hook("previewClick",(function(){}));this.handlerPreviewClick=function(e){e.stopPropagation(),n(parseInt(1e3*t._state.now,10)/1e3,e)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(t,e){this.updatePosition(t.offset,t.width,t.currentTime,t.e)}},{key:"onProgressDragStart",value:function(t){console.log("onProgressDragStart"),this.isDrag=!0,this.videoPreview&&qd.addClass(this.videoPreview,"show")}},{key:"onProgressDragEnd",value:function(t){this.isDrag=!1,this.videoPreview&&qd.removeClass(this.videoPreview,"show")}},{key:"onProgressClick",value:function(t,e){if(qd.hasClass(e.target,"xgplayer-spot")){e.stopPropagation(),e.preventDefault();var n={};["time","id","text"].map((function(t){n[t]=e.target.getAttribute("data-".concat(t))})),n.time&&(n.time=Number(n.time)),this.handlerSpotClick(e,n)}}},{key:"updateLinePos",value:function(t,e){var n,i,r=this.root,o=this.previewLine,s=this.timePoint,a="flex"===this.player.controls.mode,c=r.getBoundingClientRect().width,l=s.getBoundingClientRect().width,u=t-c/2;u<0&&!a?(u=0,n=t-c/2,!this.thumbnail&&(i=t-c/2-l/2)):u>e-c&&!a?(n=u-(e-c),!this.thumbnail&&(i=u-(e-c)-l/2),u=e-c):!this.thumbnail&&(i=-l/2),o.style.transform=void 0!==n?"translateX(".concat(n,"px)"):"",s.style.transform=void 0!==i?"translateX(".concat(i,"px)"):"",r.style.transform="translateX(".concat(u,"px)")}},{key:"updateTimeText",value:function(t){var e=this.timeText,n=this.timePoint;e.textContent=t,!this.thumbnail&&(n.textContent=t)}},{key:"updatePosition",value:function(t,e,n,i){var r=this.root,o=this.config,s=this._state;if(r){this.updateLinePos(t,e),s.now=n;var a=qd.format(n);i&&i.target&&qd.hasClass(i.target,"xgplayer-spot")?(this.showTips(i.target.getAttribute("data-text"),!1,a),this.focusDot(i.target),s.f=!0,o.isFocusDots&&s.f&&(s.now=parseInt(i.target.getAttribute("data-time"),10))):o.defaultText?(s.f=!1,this.showTips(o.defaultText,!0,a)):(s.f=!1,this.hideTips("")),this.updateTimeText(a),this.updateThumbnails(s.now)}}},{key:"updateThumbnails",value:function(t){var e=this.player,n=this.videoPreview,i=e.plugins.thumbnail;if(i&&i.usable){this.thumbnail&&i.update(this.thumbnail,t,160,90);var r=n&&n.getBoundingClientRect();this.videothumbnail&&i.update(this.videothumbnail,t,r.width,r.height)}}},{key:"changeThumbnail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==tp.device){var e=this.player,n=this.config,i=e.getPlugin("thumbnail");if(i.changeConfig(t),i&&i.usable&&n.isShowThumbnail){qd.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&r.removeChild(this.thumbnail),this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=qd.createDom("xg-video-preview","",{},"xgvideo-preview"),e.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else{qd.addClass(this.root,"short-line no-thumbnail");var o=this.find(".xg-spot-thumbnail");this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.thumbnail&&o.removeChild(this.thumbnail),this.videothumbnail=null,this.thumbnail=null,this._hasThumnail=!1}}}},{key:"registerThumbnail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("mobile"!==tp.device){var e=this.player,n=this.config,i=e.getPlugin("thumbnail");if(i&&Object.keys(t).map((function(e){i.config[e]=t[e]})),i&&i.usable&&n.isShowThumbnail){qd.removeClass(this.root,"short-line no-thumbnail"),this._hasThumnail=!0;var r=this.find(".xg-spot-thumbnail");this.thumbnail=i.createThumbnail(r,"progress-thumbnail"),n.isShowCoverPreview&&(this.videoPreview=qd.createDom("xg-video-preview","",{},"xgvideo-preview"),e.root.appendChild(this.videoPreview),this.videothumbnail=i.createThumbnail(this.videoPreview,"xgvideo-thumbnail"))}else qd.addClass(this.root,"short-line no-thumbnail")}}},{key:"calcuPosition",value:function(t,e){var n=this.player.plugins.progress,i=this.player,r=n.root.getBoundingClientRect().width,o=i.duration/r*6;return t+e>i.duration&&(e=i.duration-t),i.duration,i.duration,{left:t/i.duration*100,width:e/i.duration*100,isMini:e<o}}},{key:"showDot",value:function(t){var e=this.findDot(t);if(e){var n=this.root.getBoundingClientRect().width,i=e.time/this.player.duration*n;this.updatePosition(i,n,e.time)}}},{key:"focusDot",value:function(t,e){t&&(e||(e=t.getAttribute("data-id")),qd.addClass(t,"active"),this._activeDotId=e)}},{key:"blurDot",value:function(t){if(!t){var e=this._activeDotId;t=this.getDotDom(e)}t&&(qd.removeClass(t,"active"),this._activeDotId=null)}},{key:"showTips",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";qd.addClass(this.root,"no-timepoint"),t&&(qd.addClass(this.find(".xg-spot-content"),"show-text"),e&&"production"===this.config.mode?(qd.addClass(this.root,"product"),this.tipText.textContent=t):(qd.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?t:"".concat(n," ").concat(t)))}},{key:"hideTips",value:function(){qd.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",qd.removeClass(this.find(".xg-spot-content"),"show-text"),qd.removeClass(this.root,"product")}},{key:"hide",value:function(){qd.addClass(this.root,"hide")}},{key:"show",value:function(){qd.removeClass(this.root,"hide")}},{key:"destroy",value:function(){var t=this,e=this.player.plugins.progress;e&&Object.keys(Vm).map((function(n){e.removeCallBack(n,t[Vm[n]])})),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return"mobile"===tp.device||this.playerConfig.isMobileSimulateMode?"":'<div class="xg-spot-info '.concat("short"===this.config.mode?"short-line":"",'">\n      <div class="xg-spot-content">\n        <div class="xg-spot-thumbnail">\n          <span class="xg-spot-time"></span>\n        </div>\n        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>\n      </div>\n      <div class="xgplayer-progress-point">00:00</div>\n      <div class="xg-spot-line"></div>\n    </div>')}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:""}}}]),n}(wv),Wm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(t){var i;return ui(this,n),(i=e.call(this,t)).ratio=1,i.interval=-1,i.preloadMark={},i}return bo(n,[{key:"afterCreate",value:function(){var t=this;this.usable&&this.initThumbnail(),this.on([vp],(function(){var e=t.config,n=e.pic_num,i=e.interval;t.usable&&(t.interval=i>0?i:Math.round(1e3*t.player.duration/n)/1e3)}))}},{key:"usable",get:function(){var t=this.config,e=t.urls,n=t.pic_num;return e&&e.length>0&&n>0}},{key:"initThumbnail",value:function(){var t=this.config,e=t.width,n=t.height,i=t.pic_num,r=t.interval;this.ratio=e/n*100,this.interval=r>0?r:Math.round(1e3*this.player.duration/i)/1e3,this.preload(0)}},{key:"getUrlByIndex",value:function(t){return t>=0&&t<this.config.urls.length?this.config.urls[t]:""}},{key:"preload",value:function(t){var e=this,n=this.config.urls,i=n.length;[t-1,t,t+1,t+2].map((function(t){!e.preloadMark[t]&&t>=0&&t<i&&(qd.preloadImg(n[t]),e.preloadMark[t]=!0)}))}},{key:"getPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.config,r=i.pic_num,o=i.row,s=i.col,a=i.width,c=i.height,l=Math.ceil(t/this.interval),u=(l=l>r?r:l)<o*s?0:Math.ceil(l/(o*s))-1,h=l-u*(s*o),f=h>0?Math.ceil(h/s)-1:0,d=h>0?h-f*s-1:0,p=0,v=0;if(e&&n){var g=e/n;g<a/c?v=(p=e)/(a/c):p=(v=n)*(a/c)}else v=(p=e||a)/(a/c);var y=this.getUrlByIndex(u);return{urlIndex:u,rowIndex:f,colIndex:d,url:y,height:v,width:p,style:{backgroundImage:"url(".concat(y,")"),backgroundSize:"".concat(p*s,"px auto"),backgroundPosition:"-".concat(d*p,"px -").concat(f*v,"px"),width:"".concat(p,"px"),height:"".concat(v,"px")}}}},{key:"update",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=this.config,s=o.pic_num,a=o.urls;if(!(s<1)&&a&&0!==a.length){var c=this.getPosition(e,n,i);this.preload(c.urlIndex),Object.keys(c.style).map((function(e){t.style[e]=c.style[e]})),Object.keys(r).map((function(e){t.style[e]=r[e]}))}}},{key:"changeConfig",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).forEach((function(n){void 0!==t.config[n]&&(t.config[n]=e[n])})),this.usable&&this.initThumbnail()}},{key:"createThumbnail",value:function(t,e){var n=qd.createDom("xg-thumbnail","",{},"thumbnail ".concat(e));return t&&t.appendChild(n),n}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,width:160,height:90,scale:1,className:"",hidePortrait:!1}}}]),n}(wv),Ym=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return bo(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cached:0,played:0},e=arguments.length>1?arguments[1]:void 0;e&&this.root&&(t.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(t.cached/e*100,"%")),t.played&&(this.find("xg-mini-progress-played").style.width="".concat(t.played/e*100,"%")))}},{key:"render",value:function(){if(this.playerConfig.progress&&this.playerConfig.miniprogress)return'<xg-mini-progress class="xg-mini-progress">\n    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>\n    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>\n    </xg-mini-progress>'}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(wv),Km="realtime",zm="firstframe";function Xm(){try{return window.performance.now()}catch(t){return(new Date).getTime()}}function qm(t){return"safari"!==tp.browser||!/^blob/.test(t.currentSrc)&&!/^blob/.test(t.src)}var $m=null,Zm=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(t=e.call.apply(e,[this].concat(r))),"onLoadedData",(function(){if(t.player){var e=t.player.video;t.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10)}})),yi(pi(t),"start",(function(){var e=t.player.video,n=Xm();qm(e)&&t.canvasCtx&&(t.stop(),(t.config.mode===Km||n-t.preTime>=t.interval)&&(e&&e.videoWidth&&t.update(e,e.videoWidth,e.videoHeight),t.preTime=n),t.frameId=window.setTimeout((function(){t.start()}),t.interval))})),yi(pi(t),"stop",(function(){t.frameId&&(window.clearTimeout(t.frameId),t.frameId=null)})),t}return bo(n,[{key:"afterCreate",value:function(){var t=this;!0===this.playerConfig.dynamicBg&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var e=this.config,i=e.disable,r=e.mode;i||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0},this.isStart=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/this.config.frameRate,10),this.canvas=null,this.canvasCtx=null,this.once(Pp,(function(){t.player&&(t.init(),!t.player.paused&&t.start())})),this.once(yp,this.onLoadedData),this.on(Op,(function(){t.once(yp,t.onLoadedData)})),r!==zm&&(this.on(op,(function(){t.start()})),this.on(cp,(function(){t.stop()}))),r===zm&&this.once(fp,(function(){var e=t.player.video;e&&qm(e)&&e.videoWidth&&t.update(e,e.videoWidth,e.videoHeight)})))}},{key:"init",value:function(){var t=this.player,e=this.config;this.canvasFilter=n.supportCanvasFilter();try{var i=this.config.isInnerRender&&t.innerContainer||t.root;i.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg"><canvas>\n        </canvas><xgmask></xgmask></div>'),this.root=i.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=e.filter,this.canvas.style.webkitFilter=e.filter),this.mask=this.find("xgmask"),e.addMask&&(this.mask.style.background=e.maskBg),this.canvasCtx=this.canvas.getContext("2d");var r=this.playerConfig.poster;if(r){var o="String"===qd.typeOf(r)?r:"String"===qd.typeOf(r.poster)?r.poster:null;this.updateImg(o)}}catch(t){Kd.logError("plugin:DynamicBg",t)}}},{key:"updateImg",value:function(t){var e=this;if(t){var n=this.canvas.getBoundingClientRect(),i=n.width,r=n.height,o=new window.Image;o.onload=function(){e.canvas&&(e.canvas.height=r,e.canvas.width=i,o=null)},o.src=t}}},{key:"update",value:function(t,e,n){if(this.canvas&&this.canvasCtx&&this.videoPI)try{var i=this._pos,r=this.config,o=this.canvas.getBoundingClientRect(),s=o.width,a=o.height;if(this.videoPI=parseInt(e/n*100,10),s!==i.width||a!==i.height){var c=parseInt(s/a*100,10);i.width=this.canvas.width=s,i.height=this.canvas.height=a;var l=a,u=s;c<this.videoPI?u=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(l=parseInt(100*s/this.videoPI,10)),c<this.videoPI?u=parseInt(a*this.videoPI/100,10):c>this.videoPI&&(l=parseInt(100*s/this.videoPI,10)),i.rwidth=1.2*u,i.rheight=1.2*l,i.x=(s-i.rwidth)/2,i.y=(a-i.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=r.filter),this.canvasCtx.drawImage(t,i.x,i.y,i.rwidth,i.rheight)}catch(t){Kd.logError("plugin:DynamicBg",t)}}},{key:"destroy",value:function(){this.stop(),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,mode:"framerate",frameRate:10,filter:"blur(50px)",addMask:!0,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return"boolean"==typeof $m?$m:$m=function(){try{return!!document.createElement("canvas").getContext}catch(t){return!1}}()}},{key:"supportCanvasFilter",value:function(){return!("safari"===tp.browser||"firefox"===tp.browser)}}]),n}(wv),Jm={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}},Qm=o,tk=pt("iterator"),ek=!Qm((function(){var t=new URL("b?a=1&b=2&c=3","http://a"),e=t.searchParams,n="";return t.pathname="c%20d",e.forEach((function(t,i){e.delete("b"),n+=i+t})),!e.sort||"http://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[tk]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),nk=Bt,ik=Ac,rk=Bi,ok=q,sk=function(t,e,n,i){try{return i?e(nk(n)[0],n[1]):e(n)}catch(e){throw ik(t),e}},ak=Ec,ck=Me,lk=po,uk=Oc,hk=2147483647,fk=/[^\0-\u007E]/,dk=/[.\u3002\uFF0E\uFF61]/g,pk="Overflow: input needs wider integers to process",vk=Math.floor,gk=String.fromCharCode,yk=function(t){return t+22+75*(t<26)},mk=function(t,e,n){var i=0;for(t=n?vk(t/700):t>>1,t+=vk(t/e);t>455;i+=36)t=vk(t/35);return vk(i+36*t/(t+38))},kk=function(t){var e,n,i=[],r=(t=function(t){for(var e=[],n=0,i=t.length;n<i;){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&r)<<10)+(1023&o)+65536):(e.push(r),n--)}else e.push(r)}return e}(t)).length,o=128,s=0,a=72;for(e=0;e<t.length;e++)(n=t[e])<128&&i.push(gk(n));var c=i.length,l=c;for(c&&i.push("-");l<r;){var u=hk;for(e=0;e<t.length;e++)(n=t[e])>=o&&n<u&&(u=n);var h=l+1;if(u-o>vk((hk-s)/h))throw RangeError(pk);for(s+=(u-o)*h,o=u,e=0;e<t.length;e++){if((n=t[e])<o&&++s>hk)throw RangeError(pk);if(n==o){for(var f=s,d=36;;d+=36){var p=d<=a?1:d>=a+26?26:d-a;if(f<p)break;var v=f-p,g=36-p;i.push(gk(yk(p+v%g))),f=vk(v/g)}i.push(gk(yk(f))),a=mk(s,h,l==c),s=0,++l}}++s,++o}return i.join("")},bk=Bt,wk=Oc,xk=_n,Ck=E,Tk=ek,_k=zt.exports,Ek=fc,Sk=Ni,Pk=Vv,Rk=be,Ok=wc,Lk=Q,Ak=Bi,Ik=rc,Dk=Bt,Mk=C,Nk=wi,Fk=Kn,Bk=d,jk=function(t){var e=wk(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return bk(e.call(t))},Uk=Oc,Hk=pt,Vk=Ck("fetch"),Gk=Ck("Request"),Wk=Gk&&Gk.prototype,Yk=Ck("Headers"),Kk=Hk("iterator"),zk="URLSearchParams",Xk="URLSearchParamsIterator",qk=Rk.set,$k=Rk.getterFor(zk),Zk=Rk.getterFor(Xk),Jk=/\+/g,Qk=Array(4),tb=function(t){return Qk[t-1]||(Qk[t-1]=RegExp("((?:%[\\da-f]{2}){"+t+"})","gi"))},eb=function(t){try{return decodeURIComponent(t)}catch(e){return t}},nb=function(t){var e=t.replace(Jk," "),n=4;try{return decodeURIComponent(e)}catch(t){for(;n;)e=e.replace(tb(n--),eb);return e}},ib=/[!'()~]|%20/g,rb={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},ob=function(t){return rb[t]},sb=function(t){return encodeURIComponent(t).replace(ib,ob)},ab=function(t,e){if(e)for(var n,i,r=e.split("&"),o=0;o<r.length;)(n=r[o++]).length&&(i=n.split("="),t.push({key:nb(i.shift()),value:nb(i.join("="))}))},cb=function(t){this.entries.length=0,ab(this.entries,t)},lb=function(t,e){if(t<e)throw TypeError("Not enough arguments")},ub=Pk((function(t,e){qk(this,{type:Xk,iterator:jk($k(t).entries),kind:e})}),"Iterator",(function(){var t=Zk(this),e=t.kind,n=t.iterator.next(),i=n.value;return n.done||(n.value="keys"===e?i.key:"values"===e?i.value:[i.key,i.value]),n})),hb=function(){Ok(this,hb,zk);var t,e,n,i,r,o,s,a,c,l=arguments.length>0?arguments[0]:void 0,u=this,h=[];if(qk(u,{type:zk,entries:h,updateURL:function(){},updateSearchParams:cb}),void 0!==l)if(Mk(l))if("function"==typeof(t=Uk(l)))for(n=(e=t.call(l)).next;!(i=n.call(e)).done;){if((s=(o=(r=jk(Dk(i.value))).next).call(r)).done||(a=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");h.push({key:Nk(s.value),value:Nk(a.value)})}else for(c in l)Lk(l,c)&&h.push({key:c,value:Nk(l[c])});else ab(h,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:Nk(l))},fb=hb.prototype;if(Ek(fb,{append:function(t,e){lb(arguments.length,2);var n=$k(this);n.entries.push({key:Nk(t),value:Nk(e)}),n.updateURL()},delete:function(t){lb(arguments.length,1);for(var e=$k(this),n=e.entries,i=Nk(t),r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;e.updateURL()},get:function(t){lb(arguments.length,1);for(var e=$k(this).entries,n=Nk(t),i=0;i<e.length;i++)if(e[i].key===n)return e[i].value;return null},getAll:function(t){lb(arguments.length,1);for(var e=$k(this).entries,n=Nk(t),i=[],r=0;r<e.length;r++)e[r].key===n&&i.push(e[r].value);return i},has:function(t){lb(arguments.length,1);for(var e=$k(this).entries,n=Nk(t),i=0;i<e.length;)if(e[i++].key===n)return!0;return!1},set:function(t,e){lb(arguments.length,1);for(var n,i=$k(this),r=i.entries,o=!1,s=Nk(t),a=Nk(e),c=0;c<r.length;c++)(n=r[c]).key===s&&(o?r.splice(c--,1):(o=!0,n.value=a));o||r.push({key:s,value:a}),i.updateURL()},sort:function(){var t,e,n,i=$k(this),r=i.entries,o=r.slice();for(r.length=0,n=0;n<o.length;n++){for(t=o[n],e=0;e<n;e++)if(r[e].key>t.key){r.splice(e,0,t);break}e===n&&r.push(t)}i.updateURL()},forEach:function(t){for(var e,n=$k(this).entries,i=Ak(t,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)i((e=n[r++]).value,e.key,this)},keys:function(){return new ub(this,"keys")},values:function(){return new ub(this,"values")},entries:function(){return new ub(this,"entries")}},{enumerable:!0}),_k(fb,Kk,fb.entries),_k(fb,"toString",(function(){for(var t,e=$k(this).entries,n=[],i=0;i<e.length;)t=e[i++],n.push(sb(t.key)+"="+sb(t.value));return n.join("&")}),{enumerable:!0}),Sk(hb,zk),xk({global:!0,forced:!Tk},{URLSearchParams:hb}),!Tk&&"function"==typeof Yk){var db=function(t){if(Mk(t)){var e,n=t.body;if(Ik(n)===zk)return(e=t.headers?new Yk(t.headers):new Yk).has("content-type")||e.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),Fk(t,{body:Bk(0,String(n)),headers:Bk(0,e)})}return t};if("function"==typeof Vk&&xk({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Vk(t,arguments.length>1?db(arguments[1]):{})}}),"function"==typeof Gk){var pb=function(t){return Ok(this,pb,"Request"),new Gk(t,arguments.length>1?db(arguments[1]):{})};Wk.constructor=pb,pb.prototype=Wk,xk({global:!0,forced:!0},{Request:pb})}}var vb,gb={URLSearchParams:hb,getState:$k},yb=_n,mb=c,kb=ek,bb=r,wb=In,xb=zt.exports,Cb=wc,Tb=Q,_b=Kh,Eb=function(t){var e,n,i,r,o,s,a=ok(t),c="function"==typeof this?this:Array,l=arguments.length,u=l>1?arguments[1]:void 0,h=void 0!==u,f=uk(a),d=0;if(h&&(u=rk(u,l>2?arguments[2]:void 0,2)),null==f||c==Array&&ak(f))for(n=new c(e=ck(a.length));e>d;d++)s=h?u(a[d],d):a[d],lk(n,d,s);else for(o=(r=f.call(a)).next,n=new c;!(i=o.call(r)).done;d++)s=h?sk(r,u,[i.value,d],!0):i.value,lk(n,d,s);return n.length=d,n},Sb=pa.codeAt,Pb=wi,Rb=Ni,Ob=gb,Lb=be,Ab=bb.URL,Ib=Ob.URLSearchParams,Db=Ob.getState,Mb=Lb.set,Nb=Lb.getterFor("URL"),Fb=Math.floor,Bb=Math.pow,jb="Invalid scheme",Ub="Invalid host",Hb="Invalid port",Vb=/[A-Za-z]/,Gb=/[\d+-.A-Za-z]/,Wb=/\d/,Yb=/^0x/i,Kb=/^[0-7]+$/,zb=/^\d+$/,Xb=/^[\dA-Fa-f]+$/,qb=/[\0\t\n\r #%/:<>?@[\\\]^|]/,$b=/[\0\t\n\r #/:<>?@[\\\]^|]/,Zb=/^[\u0000-\u0020]+|[\u0000-\u0020]+$/g,Jb=/[\t\n\r]/g,Qb=function(t,e){var n,i,r;if("["==e.charAt(0)){if("]"!=e.charAt(e.length-1))return Ub;if(!(n=ew(e.slice(1,-1))))return Ub;t.host=n}else if(lw(t)){if(e=function(t){var e,n,i=[],r=t.toLowerCase().replace(dk,".").split(".");for(e=0;e<r.length;e++)n=r[e],i.push(fk.test(n)?"xn--"+kk(n):n);return i.join(".")}(e),qb.test(e))return Ub;if(null===(n=tw(e)))return Ub;t.host=n}else{if($b.test(e))return Ub;for(n="",i=Eb(e),r=0;r<i.length;r++)n+=aw(i[r],iw);t.host=n}},tw=function(t){var e,n,i,r,o,s,a,c=t.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),(e=c.length)>4)return t;for(n=[],i=0;i<e;i++){if(""==(r=c[i]))return t;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=Yb.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)s=0;else{if(!(10==o?zb:8==o?Kb:Xb).test(r))return t;s=parseInt(r,o)}n.push(s)}for(i=0;i<e;i++)if(s=n[i],i==e-1){if(s>=Bb(256,5-e))return null}else if(s>255)return null;for(a=n.pop(),i=0;i<n.length;i++)a+=n[i]*Bb(256,3-i);return a},ew=function(t){var e,n,i,r,o,s,a,c=[0,0,0,0,0,0,0,0],l=0,u=null,h=0,f=function(){return t.charAt(h)};if(":"==f()){if(":"!=t.charAt(1))return;h+=2,u=++l}for(;f();){if(8==l)return;if(":"!=f()){for(e=n=0;n<4&&Xb.test(f());)e=16*e+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,l>6)return;for(i=0;f();){if(r=null,i>0){if(!("."==f()&&i<4))return;h++}if(!Wb.test(f()))return;for(;Wb.test(f());){if(o=parseInt(f(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;h++}c[l]=256*c[l]+r,2!=++i&&4!=i||l++}if(4!=i)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;c[l++]=e}else{if(null!==u)return;h++,u=++l}}if(null!==u)for(s=l-u,l=7;0!=l&&s>0;)a=c[l],c[l--]=c[u+s-1],c[u+--s]=a;else if(8!=l)return;return c},nw=function(t){var e,n,i,r;if("number"==typeof t){for(e=[],n=0;n<4;n++)e.unshift(t%256),t=Fb(t/256);return e.join(".")}if("object"==typeof t){for(e="",i=function(t){for(var e=null,n=1,i=null,r=0,o=0;o<8;o++)0!==t[o]?(r>n&&(e=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(e=i,n=r),e}(t),n=0;n<8;n++)r&&0===t[n]||(r&&(r=!1),i===n?(e+=n?":":"::",r=!0):(e+=t[n].toString(16),n<7&&(e+=":")));return"["+e+"]"}return t},iw={},rw=_b({},iw,{" ":1,'"':1,"<":1,">":1,"`":1}),ow=_b({},rw,{"#":1,"?":1,"{":1,"}":1}),sw=_b({},ow,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),aw=function(t,e){var n=Sb(t,0);return n>32&&n<127&&!Tb(e,t)?t:encodeURIComponent(t)},cw={ftp:21,file:null,http:80,https:443,ws:80,wss:443},lw=function(t){return Tb(cw,t.scheme)},uw=function(t){return""!=t.username||""!=t.password},hw=function(t){return!t.host||t.cannotBeABaseURL||"file"==t.scheme},fw=function(t,e){var n;return 2==t.length&&Vb.test(t.charAt(0))&&(":"==(n=t.charAt(1))||!e&&"|"==n)},dw=function(t){var e;return t.length>1&&fw(t.slice(0,2))&&(2==t.length||"/"===(e=t.charAt(2))||"\\"===e||"?"===e||"#"===e)},pw=function(t){var e=t.path,n=e.length;!n||"file"==t.scheme&&1==n&&fw(e[0],!0)||e.pop()},vw=function(t){return"."===t||"%2e"===t.toLowerCase()},gw={},yw={},mw={},kw={},bw={},ww={},xw={},Cw={},Tw={},_w={},Ew={},Sw={},Pw={},Rw={},Ow={},Lw={},Aw={},Iw={},Dw={},Mw={},Nw={},Fw=function(t,e,n,i){var r,o,s,a,c,l=n||gw,u=0,h="",f=!1,d=!1,p=!1;for(n||(t.scheme="",t.username="",t.password="",t.host=null,t.port=null,t.path=[],t.query=null,t.fragment=null,t.cannotBeABaseURL=!1,e=e.replace(Zb,"")),e=e.replace(Jb,""),r=Eb(e);u<=r.length;){switch(o=r[u],l){case gw:if(!o||!Vb.test(o)){if(n)return jb;l=mw;continue}h+=o.toLowerCase(),l=yw;break;case yw:if(o&&(Gb.test(o)||"+"==o||"-"==o||"."==o))h+=o.toLowerCase();else{if(":"!=o){if(n)return jb;h="",l=mw,u=0;continue}if(n&&(lw(t)!=Tb(cw,h)||"file"==h&&(uw(t)||null!==t.port)||"file"==t.scheme&&!t.host))return;if(t.scheme=h,n)return void(lw(t)&&cw[t.scheme]==t.port&&(t.port=null));h="","file"==t.scheme?l=Rw:lw(t)&&i&&i.scheme==t.scheme?l=kw:lw(t)?l=Cw:"/"==r[u+1]?(l=bw,u++):(t.cannotBeABaseURL=!0,t.path.push(""),l=Dw)}break;case mw:if(!i||i.cannotBeABaseURL&&"#"!=o)return jb;if(i.cannotBeABaseURL&&"#"==o){t.scheme=i.scheme,t.path=i.path.slice(),t.query=i.query,t.fragment="",t.cannotBeABaseURL=!0,l=Nw;break}l="file"==i.scheme?Rw:ww;continue;case kw:if("/"!=o||"/"!=r[u+1]){l=ww;continue}l=Tw,u++;break;case bw:if("/"==o){l=_w;break}l=Iw;continue;case ww:if(t.scheme=i.scheme,o==vb)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query;else if("/"==o||"\\"==o&&lw(t))l=xw;else if("?"==o)t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query="",l=Mw;else{if("#"!=o){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.path.pop(),l=Iw;continue}t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=Nw}break;case xw:if(!lw(t)||"/"!=o&&"\\"!=o){if("/"!=o){t.username=i.username,t.password=i.password,t.host=i.host,t.port=i.port,l=Iw;continue}l=_w}else l=Tw;break;case Cw:if(l=Tw,"/"!=o||"/"!=h.charAt(u+1))continue;u++;break;case Tw:if("/"!=o&&"\\"!=o){l=_w;continue}break;case _w:if("@"==o){f&&(h="%40"+h),f=!0,s=Eb(h);for(var v=0;v<s.length;v++){var g=s[v];if(":"!=g||p){var y=aw(g,sw);p?t.password+=y:t.username+=y}else p=!0}h=""}else if(o==vb||"/"==o||"?"==o||"#"==o||"\\"==o&&lw(t)){if(f&&""==h)return"Invalid authority";u-=Eb(h).length+1,h="",l=Ew}else h+=o;break;case Ew:case Sw:if(n&&"file"==t.scheme){l=Lw;continue}if(":"!=o||d){if(o==vb||"/"==o||"?"==o||"#"==o||"\\"==o&&lw(t)){if(lw(t)&&""==h)return Ub;if(n&&""==h&&(uw(t)||null!==t.port))return;if(a=Qb(t,h))return a;if(h="",l=Aw,n)return;continue}"["==o?d=!0:"]"==o&&(d=!1),h+=o}else{if(""==h)return Ub;if(a=Qb(t,h))return a;if(h="",l=Pw,n==Sw)return}break;case Pw:if(!Wb.test(o)){if(o==vb||"/"==o||"?"==o||"#"==o||"\\"==o&&lw(t)||n){if(""!=h){var m=parseInt(h,10);if(m>65535)return Hb;t.port=lw(t)&&m===cw[t.scheme]?null:m,h=""}if(n)return;l=Aw;continue}return Hb}h+=o;break;case Rw:if(t.scheme="file","/"==o||"\\"==o)l=Ow;else{if(!i||"file"!=i.scheme){l=Iw;continue}if(o==vb)t.host=i.host,t.path=i.path.slice(),t.query=i.query;else if("?"==o)t.host=i.host,t.path=i.path.slice(),t.query="",l=Mw;else{if("#"!=o){dw(r.slice(u).join(""))||(t.host=i.host,t.path=i.path.slice(),pw(t)),l=Iw;continue}t.host=i.host,t.path=i.path.slice(),t.query=i.query,t.fragment="",l=Nw}}break;case Ow:if("/"==o||"\\"==o){l=Lw;break}i&&"file"==i.scheme&&!dw(r.slice(u).join(""))&&(fw(i.path[0],!0)?t.path.push(i.path[0]):t.host=i.host),l=Iw;continue;case Lw:if(o==vb||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&fw(h))l=Iw;else if(""==h){if(t.host="",n)return;l=Aw}else{if(a=Qb(t,h))return a;if("localhost"==t.host&&(t.host=""),n)return;h="",l=Aw}continue}h+=o;break;case Aw:if(lw(t)){if(l=Iw,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=vb&&(l=Iw,"/"!=o))continue}else t.fragment="",l=Nw;else t.query="",l=Mw;break;case Iw:if(o==vb||"/"==o||"\\"==o&&lw(t)||!n&&("?"==o||"#"==o)){if(".."===(c=(c=h).toLowerCase())||"%2e."===c||".%2e"===c||"%2e%2e"===c?(pw(t),"/"==o||"\\"==o&&lw(t)||t.path.push("")):vw(h)?"/"==o||"\\"==o&&lw(t)||t.path.push(""):("file"==t.scheme&&!t.path.length&&fw(h)&&(t.host&&(t.host=""),h=h.charAt(0)+":"),t.path.push(h)),h="","file"==t.scheme&&(o==vb||"?"==o||"#"==o))for(;t.path.length>1&&""===t.path[0];)t.path.shift();"?"==o?(t.query="",l=Mw):"#"==o&&(t.fragment="",l=Nw)}else h+=aw(o,ow);break;case Dw:"?"==o?(t.query="",l=Mw):"#"==o?(t.fragment="",l=Nw):o!=vb&&(t.path[0]+=aw(o,iw));break;case Mw:n||"#"!=o?o!=vb&&("'"==o&&lw(t)?t.query+="%27":t.query+="#"==o?"%23":aw(o,iw)):(t.fragment="",l=Nw);break;case Nw:o!=vb&&(t.fragment+=aw(o,rw))}u++}},Bw=function(t){var e,n,i=Cb(this,Bw,"URL"),r=arguments.length>1?arguments[1]:void 0,o=Pb(t),s=Mb(i,{type:"URL"});if(void 0!==r)if(r instanceof Bw)e=Nb(r);else if(n=Fw(e={},Pb(r)))throw TypeError(n);if(n=Fw(s,o,null,e))throw TypeError(n);var a=s.searchParams=new Ib,c=Db(a);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(a)||null},mb||(i.href=Uw.call(i),i.origin=Hw.call(i),i.protocol=Vw.call(i),i.username=Gw.call(i),i.password=Ww.call(i),i.host=Yw.call(i),i.hostname=Kw.call(i),i.port=zw.call(i),i.pathname=Xw.call(i),i.search=qw.call(i),i.searchParams=$w.call(i),i.hash=Zw.call(i))},jw=Bw.prototype,Uw=function(){var t=Nb(this),e=t.scheme,n=t.username,i=t.password,r=t.host,o=t.port,s=t.path,a=t.query,c=t.fragment,l=e+":";return null!==r?(l+="//",uw(t)&&(l+=n+(i?":"+i:"")+"@"),l+=nw(r),null!==o&&(l+=":"+o)):"file"==e&&(l+="//"),l+=t.cannotBeABaseURL?s[0]:s.length?"/"+s.join("/"):"",null!==a&&(l+="?"+a),null!==c&&(l+="#"+c),l},Hw=function(){var t=Nb(this),e=t.scheme,n=t.port;if("blob"==e)try{return new Bw(e.path[0]).origin}catch(t){return"null"}return"file"!=e&&lw(t)?e+"://"+nw(t.host)+(null!==n?":"+n:""):"null"},Vw=function(){return Nb(this).scheme+":"},Gw=function(){return Nb(this).username},Ww=function(){return Nb(this).password},Yw=function(){var t=Nb(this),e=t.host,n=t.port;return null===e?"":null===n?nw(e):nw(e)+":"+n},Kw=function(){var t=Nb(this).host;return null===t?"":nw(t)},zw=function(){var t=Nb(this).port;return null===t?"":String(t)},Xw=function(){var t=Nb(this),e=t.path;return t.cannotBeABaseURL?e[0]:e.length?"/"+e.join("/"):""},qw=function(){var t=Nb(this).query;return t?"?"+t:""},$w=function(){return Nb(this).searchParams},Zw=function(){var t=Nb(this).fragment;return t?"#"+t:""},Jw=function(t,e){return{get:t,set:e,configurable:!0,enumerable:!0}};if(mb&&wb(jw,{href:Jw(Uw,(function(t){var e=Nb(this),n=Pb(t),i=Fw(e,n);if(i)throw TypeError(i);Db(e.searchParams).updateSearchParams(e.query)})),origin:Jw(Hw),protocol:Jw(Vw,(function(t){var e=Nb(this);Fw(e,Pb(t)+":",gw)})),username:Jw(Gw,(function(t){var e=Nb(this),n=Eb(Pb(t));if(!hw(e)){e.username="";for(var i=0;i<n.length;i++)e.username+=aw(n[i],sw)}})),password:Jw(Ww,(function(t){var e=Nb(this),n=Eb(Pb(t));if(!hw(e)){e.password="";for(var i=0;i<n.length;i++)e.password+=aw(n[i],sw)}})),host:Jw(Yw,(function(t){var e=Nb(this);e.cannotBeABaseURL||Fw(e,Pb(t),Ew)})),hostname:Jw(Kw,(function(t){var e=Nb(this);e.cannotBeABaseURL||Fw(e,Pb(t),Sw)})),port:Jw(zw,(function(t){var e=Nb(this);hw(e)||(""==(t=Pb(t))?e.port=null:Fw(e,t,Pw))})),pathname:Jw(Xw,(function(t){var e=Nb(this);e.cannotBeABaseURL||(e.path=[],Fw(e,Pb(t),Aw))})),search:Jw(qw,(function(t){var e=Nb(this);""==(t=Pb(t))?e.query=null:("?"==t.charAt(0)&&(t=t.slice(1)),e.query="",Fw(e,t,Mw)),Db(e.searchParams).updateSearchParams(e.query)})),searchParams:Jw($w),hash:Jw(Zw,(function(t){var e=Nb(this);""!=(t=Pb(t))?("#"==t.charAt(0)&&(t=t.slice(1)),e.fragment="",Fw(e,t,Nw)):e.fragment=null}))}),xb(jw,"toJSON",(function(){return Uw.call(this)}),{enumerable:!0}),xb(jw,"toString",(function(){return Uw.call(this)}),{enumerable:!0}),Ab){var Qw=Ab.createObjectURL,tx=Ab.revokeObjectURL;Qw&&xb(Bw,"createObjectURL",(function(t){return Qw.apply(Ab,arguments)})),tx&&xb(Bw,"revokeObjectURL",(function(t){return tx.apply(Ab,arguments)}))}function ex(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function nx(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ex(Object(n),!0).forEach((function(e){yi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ex(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Rb(Bw,"URL"),yb({global:!0,forced:!kb,sham:!mb},{URL:Bw});var ix=Wp,rx=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){var t;ui(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return yi(pi(t=e.call.apply(e,[this].concat(r))),"_recordUserActions",(function(e){var n=t._getTime(),i=Object.assign({},e,{msg:e.msg||e.action});t._stats.info.push(nx(nx({type:"userAction"},n),{},{payload:i}))})),yi(pi(t),"_onReset",(function(){t.reset()})),yi(pi(t),"_recordInfo",(function(e){t.info(e)})),yi(pi(t),"_downloadStats",(function(){var e=t.getStats(),n=new Blob([JSON.stringify(e)],{type:"application/json"}),i=window.URL.createObjectURL(n),r=document.createElement("a");r.style.display="none",r.href=i,console.log("linkhref",i),r.download="player.txt",r.disabled=!1,r.click()})),t}return bo(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:(new Date).toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(Vp,this._recordUserActions),this.on(ix.STATS_INFO,this._recordInfo),this.on(ix.STATS_DOWNLOAD,this._downloadStats),this.on(ix.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(t){t.profile?this._infoProfile(t):this._info(t)}},{key:"_info",value:function(t){var e=this._getTime();this._stats.info.push(nx(nx({},e),{},{payload:t}))}},{key:"_infoProfile",value:function(t){if(t&&t.startMs){var e=nx({cat:"function",dur:Date.now()-t.startMs,name:t.name||t.msg,ph:"X",pid:0,tid:0,ts:t.startMs,profile:!0},t);this._info(e)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var t;this._stats=(yi(t={},"info",[]),yi(t,"media",{}),t)}},{key:"getStats",value:function(){for(var t=this.player.video,e=[],n=0;n<t.buffered.length;n++)e.push({start:t.buffered.start(n),end:t.buffered.end(n)});var i={currentTime:t.currentTime,readyState:t.readyState,buffered:e,paused:t.paused,ended:t.ended};return this._stats.media=i,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){return this._stats.info.map((function(t){var e=t.payload.data,n="";try{e instanceof Error?n=e.msg:void 0!==e&&(n=JSON.stringify(e))}catch(t){console.log("err",t)}return"[".concat(t.timeFormat,"] : ").concat(t.payload.msg," ").concat(n," ")}))}},{key:"_getProfile",value:function(){var t={traceEvents:[]};return this._stats.info.forEach((function(e){e.payload.profile&&t.traceEvents.push(e.payload)})),t}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(lv),ox=function(t){fi(n,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=gi(t);if(e){var r=gi(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return vi(this,n)}}(n);function n(){return ui(this,n),e.apply(this,arguments)}return n}(qg);return yi(ox,"defaultPreset",(function t(e,n){var i,r,o;ui(this,t);var s=n&&n.isMobileSimulateMode,a=n.isLive,c=[].concat(a?[]:[im,Ym,Gm,um],[rm,lm,gm,Cm,Am,Im,Sm,Pm,pm,wm]),l=[ty,ey,oy,Xy,sy,Fm,Bm,Wm,vy];this.plugins=[rx,Jg].concat(Zh(c),l);var u=s?"mobile":tp.device;switch(u){case"pc":(i=this.plugins).push.apply(i,[Ky,my,Nm]);break;case"mobile":(r=this.plugins).push.apply(r,[Vy]);break;default:(o=this.plugins).push.apply(o,[Ky,my,Nm])}(tp.os.isIpad||"pc"===u)&&this.plugins.push(Zm),tp.os.isIpad&&this.plugins.push(my),this.ignores=[],this.i18n=[Jm]})),yi(ox,"Util",qd),yi(ox,"Sniffer",tp),yi(ox,"Errors",ip),yi(ox,"Events",Yp),yi(ox,"Plugin",wv),yi(ox,"BasePlugin",lv),yi(ox,"I18N",Yg),yi(ox,"STATE_CLASS",Mg),ox}()}).call(this,n(76))},964:function(t,e,n){!function(){function e(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function n(t,n){var r=function(t,n){var r=e(t)*e(n);if(0===r)return 0;var o=function(t,e){return t.x*e.x+t.y*e.y}(t,n)/r;return o>1&&(o=1),Math.acos(o)}(t,n);return function(t,e){return t.x*e.y-e.x*t.y}(t,n)>0&&(r*=-1),180*r/Math.PI}var r=function(t){this.handlers=[],this.el=t};function o(t,e){var n=new r(t);return n.add(e),n}r.prototype.add=function(t){this.handlers.push(t)},r.prototype.del=function(t){t||(this.handlers=[]);for(var i=this.handlers.length;i>=0;i--)this.handlers[i]===t&&this.handlers.splice(i,1)},r.prototype.dispatch=function(){for(var i=0,t=this.handlers.length;i<t;i++){var e=this.handlers[i];"function"==typeof e&&e.apply(this.el,arguments)}};var c=function(t,option){this.element="string"==typeof t?document.querySelector(t):t,this.start=this.start.bind(this),this.move=this.move.bind(this),this.end=this.end.bind(this),this.cancel=this.cancel.bind(this),this.element.addEventListener("touchstart",this.start,!1),this.element.addEventListener("touchmove",this.move,!1),this.element.addEventListener("touchend",this.end,!1),this.element.addEventListener("touchcancel",this.cancel,!1),this.preV={x:null,y:null},this.pinchStartLen=null,this.zoom=1,this.isDoubleTap=!1;var e=function(){};this.rotate=o(this.element,option.rotate||e),this.touchStart=o(this.element,option.touchStart||e),this.multipointStart=o(this.element,option.multipointStart||e),this.multipointEnd=o(this.element,option.multipointEnd||e),this.pinch=o(this.element,option.pinch||e),this.swipe=o(this.element,option.swipe||e),this.tap=o(this.element,option.tap||e),this.doubleTap=o(this.element,option.doubleTap||e),this.longTap=o(this.element,option.longTap||e),this.singleTap=o(this.element,option.singleTap||e),this.pressMove=o(this.element,option.pressMove||e),this.twoFingerPressMove=o(this.element,option.twoFingerPressMove||e),this.touchMove=o(this.element,option.touchMove||e),this.touchEnd=o(this.element,option.touchEnd||e),this.touchCancel=o(this.element,option.touchCancel||e),this._cancelAllHandler=this.cancelAll.bind(this),window.removeEventListener("scroll",this._cancelAllHandler),window.addEventListener("scroll",this._cancelAllHandler),this.delta=null,this.last=null,this.now=null,this.tapTimeout=null,this.singleTapTimeout=null,this.longTapTimeout=null,this.swipeTimeout=null,this.x1=this.x2=this.y1=this.y2=null,this.preTapPosition={x:null,y:null}};c.prototype={start:function(t){if(t.touches){this.now=Date.now(),this.x1=t.touches[0].pageX,this.y1=t.touches[0].pageY,this.delta=this.now-(this.last||this.now),this.touchStart.dispatch(t,this.element),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var n=this.preV;if(t.touches.length>1){this._cancelLongTap(),this._cancelSingleTap();var r={x:t.touches[1].pageX-this.x1,y:t.touches[1].pageY-this.y1};n.x=r.x,n.y=r.y,this.pinchStartLen=e(n),this.multipointStart.dispatch(t,this.element)}this._preventTap=!1,this.longTapTimeout=setTimeout(function(){this.longTap.dispatch(t,this.element),this._preventTap=!0}.bind(this),750)}},move:function(t){if(t.touches){var r=this.preV,o=t.touches.length,c=t.touches[0].pageX,l=t.touches[0].pageY;if(this.isDoubleTap=!1,o>1){var h=t.touches[1].pageX,f=t.touches[1].pageY,d={x:t.touches[1].pageX-c,y:t.touches[1].pageY-l};null!==r.x&&(this.pinchStartLen>0&&(t.zoom=e(d)/this.pinchStartLen,this.pinch.dispatch(t,this.element)),t.angle=n(d,r),this.rotate.dispatch(t,this.element)),r.x=d.x,r.y=d.y,null!==this.x2&&null!==this.sx2?(t.deltaX=(c-this.x2+h-this.sx2)/2,t.deltaY=(l-this.y2+f-this.sy2)/2):(t.deltaX=0,t.deltaY=0),this.twoFingerPressMove.dispatch(t,this.element),this.sx2=h,this.sy2=f}else null!==this.x2?(t.deltaX=c-this.x2,t.deltaY=l-this.y2):(t.deltaX=0,t.deltaY=0),this.pressMove.dispatch(t,this.element);this.touchMove.dispatch(t,this.element),this._cancelLongTap(),this.x2=c,this.y2=l,o>1&&t.preventDefault()}},end:function(t){if(t.changedTouches){this._cancelLongTap();var e=this;t.touches.length<2&&(this.multipointEnd.dispatch(t,this.element),this.sx2=this.sy2=null),this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.y1-this.y2)>30?(t.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),this.swipeTimeout=setTimeout((function(){e.swipe.dispatch(t,e.element)}),0)):(this.tapTimeout=setTimeout((function(){e._preventTap||e.tap.dispatch(t,e.element),e.isDoubleTap&&(e.doubleTap.dispatch(t,e.element),clearTimeout(e.singleTapTimeout),e.isDoubleTap=!1)}),0),e.isDoubleTap||(e.singleTapTimeout=setTimeout((function(){e.singleTap.dispatch(t,e.element)}),250))),this.touchEnd.dispatch(t,this.element),this.preV.x=0,this.preV.y=0,this.zoom=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null}},cancelAll:function(){this._preventTap=!0,clearTimeout(this.singleTapTimeout),clearTimeout(this.tapTimeout),clearTimeout(this.longTapTimeout),clearTimeout(this.swipeTimeout)},cancel:function(t){this.cancelAll(),this.touchCancel.dispatch(t,this.element)},_cancelLongTap:function(){clearTimeout(this.longTapTimeout)},_cancelSingleTap:function(){clearTimeout(this.singleTapTimeout)},_swipeDirection:function(t,e,n,r){return Math.abs(t-e)>=Math.abs(n-r)?t-e>0?"Left":"Right":n-r>0?"Up":"Down"},on:function(t,e){this[t]&&this[t].add(e)},off:function(t,e){this[t]&&this[t].del(e)},destroy:function(){return this.singleTapTimeout&&clearTimeout(this.singleTapTimeout),this.tapTimeout&&clearTimeout(this.tapTimeout),this.longTapTimeout&&clearTimeout(this.longTapTimeout),this.swipeTimeout&&clearTimeout(this.swipeTimeout),this.element.removeEventListener("touchstart",this.start),this.element.removeEventListener("touchmove",this.move),this.element.removeEventListener("touchend",this.end),this.element.removeEventListener("touchcancel",this.cancel),this.rotate.del(),this.touchStart.del(),this.multipointStart.del(),this.multipointEnd.del(),this.pinch.del(),this.swipe.del(),this.tap.del(),this.doubleTap.del(),this.longTap.del(),this.singleTap.del(),this.pressMove.del(),this.twoFingerPressMove.del(),this.touchMove.del(),this.touchEnd.del(),this.touchCancel.del(),this.preV=this.pinchStartLen=this.zoom=this.isDoubleTap=this.delta=this.last=this.now=this.tapTimeout=this.singleTapTimeout=this.longTapTimeout=this.swipeTimeout=this.x1=this.x2=this.y1=this.y2=this.preTapPosition=this.rotate=this.touchStart=this.multipointStart=this.multipointEnd=this.pinch=this.swipe=this.tap=this.doubleTap=this.longTap=this.singleTap=this.pressMove=this.touchMove=this.touchEnd=this.touchCancel=this.twoFingerPressMove=null,null}},t.exports=c}()}}]);